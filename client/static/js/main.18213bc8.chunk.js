(this["webpackJsonpcrm-shool-app"]=this["webpackJsonpcrm-shool-app"]||[]).push([[0],{345:function(e,t,n){},346:function(e,t,n){},347:function(e,t,n){},381:function(e,t,n){},457:function(e,t){},459:function(e,t){},472:function(e,t){},474:function(e,t){},502:function(e,t){},504:function(e,t){},505:function(e,t){},510:function(e,t){},512:function(e,t){},531:function(e,t){},543:function(e,t){},546:function(e,t){},563:function(e,t,n){},564:function(e,t,n){},567:function(e,t,n){"use strict";n.r(t);var a,c,o,r,i,s,l,d,u,j,p,b,h,m=n(0),f=n(36),x=n.n(f),O=(n(345),n(4)),g=(n(346),n(31)),v=n.n(g),y=n(43),k=n(54),N=(n(347),"http://crm.3place.ru"),S=n(80),C=n.n(S),I=n(233),w=n.n(I),_=w()(C.a),D=function(e,t){_.fire({icon:"error",title:e,text:t})},P=w()(C.a),E=function(e,t){P.fire({icon:"success",title:e,text:t})},R=C.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",C.a.stopTimer),e.addEventListener("mouseleave",C.a.resumeTimer)}}),B=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";C.a.fire({title:e,html:n,timerProgressBar:!0,didOpen:function(){C.a.showLoading(),t=setInterval((function(){var e=C.a.getHtmlContainer();if(e){var t=e.querySelector("b");t&&(t.textContent=C.a.getTimerLeft())}}),100)},willClose:function(){clearInterval(t)}})},z=function(){C.a.close()},M=function(e){403==e&&R.fire({icon:"error",title:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043f\u0440\u0430\u0432 \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})},T=n(13),G=n(1),F=n(44),L=T.a.div({height:"500px",button:{fontWeight:"bold",fontSize:"21px",width:"150px",borderRadius:"19px",transition:"0.3s",borderColor:"#007bff",color:"#000","&:hover":{transition:"0.3s",backgroundColor:"#f7d99f"}},label:{fontSize:"24px",fontWeight:"400"},input:{color:"#000",fontSize:"20px"},"input[type=text]":{background:"none"},"input[type=password]":{background:"none"},i:{cursor:"pointer"}}),A=function(e){var t=e.setUser,n=Object(m.useState)({icons:"bi-eye-fill",type:"password"}),r=Object(O.a)(n,2),i=r[0],s=r[1],l=Object(m.useState)(""),d=Object(O.a)(l,2),u=d[0],j=d[1],p=Object(m.useState)(""),b=Object(O.a)(p,2),h=b[0],f=b[1],x=Object(m.useState)("submit"),g=Object(O.a)(x,2),S=g[0],C=g[1],I=Object(m.useState)("\u041b\u043e\u0433\u0438\u043d"),w=Object(O.a)(I,2),_=w[0],P=w[1],E=Object(m.useState)(""),B=Object(O.a)(E,2),z=B[0],A=B[1],Y=Object(m.useState)(""),U=Object(O.a)(Y,2),V=U[0],H=U[1],q=h,K=u,W="1";"button"===S&&(W="0.3");var $=T.a.input(a||(a=Object(k.a)(["\n      border: ",";\n    "])),z),X=T.a.input(c||(c=Object(k.a)(["\n      border: ",";\n    "])),V),J=T.a.button(o||(o=Object(k.a)(["\n      opacity: ",";\n    "])),W),Q=new RegExp(/^[\w\d\W]{1,40}$/),Z=new RegExp(/^.{1,40}$/),ee=function(){var e=Object(y.a)(v.a.mark((function e(n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(K),f(q),P("\u041b\u043e\u0433\u0438\u043d"),n.preventDefault(),Q.test(q)?A(""):A("2px solid red"),Z.test(K)?H(""):H("2px solid red"),Q.test(q)&Z.test(K)&&(C("button"),F({method:"post",url:"".concat(N,"/auth"),headers:{"Content-Type":"application/json;charset=utf-8"},data:{login:q,password:K}}).then((function(e){localStorage.setItem("tokenID",e.data.token),j(""),f(""),C("submit"),R.fire({icon:"success",title:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u043e\u0448\u043b\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443"}),t(q)})).catch((function(e){e.response&&(M(e.response.status),400===e.response.status?(D("\u041e\u0439..","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"),A("2px solid red"),H("2px solid red"),C("submit")):C("submit"))})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(G.jsx)(L,{className:"LogIn container d-flex align-items-center justify-content-center",children:Object(G.jsx)("form",{onSubmit:ee,className:"col-md-8 col-12",children:Object(G.jsxs)("fieldset",{children:[Object(G.jsxs)("div",{className:"mb-3",children:[Object(G.jsx)("label",{htmlFor:"exampleInputEmail1",className:"form-label",children:_}),Object(G.jsx)($,{required:!0,onChange:function(e){q=e.target.value},defaultValue:h,autoComplete:"current-password",type:"name",className:"form-control",name:"login",id:"exampleInputEmail1"})]}),Object(G.jsxs)("div",{className:"mb-3",children:[Object(G.jsx)("label",{htmlFor:"exampleInputPassword1",className:"form-label",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(G.jsx)(X,{required:!0,onChange:function(e){K=e.target.value},defaultValue:u,autoComplete:"current-password",type:"".concat(i.type),className:"form-control",name:"password",id:"exampleInputPassword1"}),Object(G.jsx)("div",{className:"password-control",children:Object(G.jsx)("div",{className:"d-flex justify-content-end",children:Object(G.jsx)("i",{onClick:function(){j(K),f(q),"bi-eye-fill"===i.icons?s({icons:"bi-eye-slash-fill",type:"text"}):s({icons:"bi-eye-fill",type:"password"})},className:"bi ".concat(i.icons),style:{fontSize:"28px",color:"#F5896C"}})})})]}),Object(G.jsx)(J,{type:S,className:"btn",children:"\u0412\u043e\u0439\u0442\u0438"})]})},"form1")})},Y=n(32),U=n(48),V=n(571),H=n(87),q=n(195),K=n(586),W=n(587),$=n(588),X=n(589),J=n(590),Q=n(591),Z=function(e){localStorage.removeItem("tokenID"),localStorage.setItem("tokenID",e)},ee=function(e,t){if(t.response){for(var n=arguments.length,a=new Array(n>2?n-2:0),c=2;c<n;c++)a[c-2]=arguments[c];a.forEach((function(e){e()})),M(t.response.status);var o=t.response,r=o.status,i=o.data;404==r||(401==r?"TOKEN_EXPIRED"==i.message?(Z(i.token),e()):(localStorage.removeItem("tokenID"),window.location.replace("/")):500==r?D("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430"):400==r&&D("\u041d\u0435 \u0432\u0435\u0440\u043d\u043e \u0432\u0432\u0435\u0434\u0435\u043d\u044b \u0434\u0430\u043d\u043d\u044b\u0435"))}},te=n(569),ne=n(578),ae=T.a.div({height:"30px",input:{height:"30px"},".ant-input-search-button":{paddingBottom:"none"}}),ce=function(e,t){var n="/student/".concat(t.id);return n="pupil"==t.type?"/student/".concat(t.id):"/group/".concat(t.id),{value:e,label:Object(G.jsx)(Y.b,{className:"link-info",to:n,style:{display:"flex",justifyContent:"space-between"},children:e})}},oe=n(44),re=function(e){var t=e.tutorid,n=void 0===t?"":t,a=Object(m.useState)([]),c=Object(O.a)(a,2),o=c[0],r=c[1],i=Object(m.useState)(""),s=Object(O.a)(i,2),l=s[0],d=s[1];Object(m.useEffect)((function(){document.getElementById("Search").focus()}));var u,j=function e(t){var a=encodeURI(t);oe({method:"get",url:"".concat(N,"/CRM/Search/autocompletion?query=").concat(a).concat(n),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){d(t),r(e.data.body.hits.hits)})).catch((function(t){ee(e,t)}))},p=function(e){return Object(G.jsx)("span",{children:e})},b=[{label:p("\u0423\u0447\u0435\u043d\u0438\u043a\u0438"),options:[]},{label:p("\u0413\u0440\u0443\u043f\u043f\u044b"),options:[]}];o.forEach((function(e){if("pupil"==e._source.type){var t=e._source,n=t.surname,a=t.name,c=t.midname;b[0].options.push(ce("".concat(n," ").concat(a," ").concat(c),e._source))}else{var o=e._source.group_name;b[1].options.push(ce(o,e._source))}}));var h=function(e){clearTimeout(u),e?u=setTimeout((function(){j(e)}),500):(d(""),r([]))};return Object(G.jsx)(ae,{children:Object(G.jsx)(te.a,{dropdownClassName:"certain-category-search-dropdown",dropdownMatchSelectWidth:500,options:b,defaultOpen:function(){return!!l},defaultValue:"".concat(l),onSearch:function(e){h(e)},id:"Search",children:Object(G.jsx)(ne.a,{size:"large",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e CRM"})})})},ie=n(2),se=n(9),le=n(8),de=n(336),ue=n(572),je=n(27),pe=n.n(je),be=function(e){var t=pe()(e).format("YYYY-MM-DD"),n=pe()().diff(t,"years");return n||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"},he=n(193),me=(n(254),Math.round(document.documentElement.clientHeight/55)-2),fe=function(e){var t=e.offset,n=e.setOffset,a=e.getItem,c=e.count,o=T.a.div({margin:"3px 3px 20px 3px",".ant-pagination-item-link":{height:"34px"}});return Object(G.jsx)(o,{children:Object(G.jsx)(he.a,{defaultPageSize:me,defaultCurrent:t/me+1,total:c,showSizeChanger:!1,onChange:function(e){n((e-1)*me),a((e-1)*me)}})})},xe=n(577),Oe=n(52),ge=n(573),ve=n(130),ye=n.n(ve),ke=n(584),Ne={borderRadius:"2px"},Se={fontSize:"18px",color:"white",position:"absolute",top:"4px",right:"2px"},Ce=T.a.span(r||(r=Object(k.a)(["\n  font-weight: bold;\n"]))),Ie=T.a.div(i||(i=Object(k.a)(["\n  position: relative;\n"]))),we=T.a.div(s||(s=Object(k.a)(["\n  ::-webkit-scrollbar {\n    height: 5px;\n  }\n  ::-webkit-scrollbar-thumb {\n    background-color: darkgrey;\n  }\n  overflow: auto hidden;\n  max-height: 110vh;\n  min-width: 100%;\n  display: flex;\n  justify-content: ",";\n  .droppable-container {\n    min-height: 150px;\n    height: 100%;\n  }\n"])),(function(e){return e.jstctn?"space-evenly":"flex-start"})),_e=T.a.div(l||(l=Object(k.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin: 10px 0;\n  > p {\n    flex: 1 0 50%;\n    margin: 0;\n    padding: 0;\n  }\n  > Input {\n    flex: 1 0 50%;\n  }\n"]))),De=T.a.div(d||(d=Object(k.a)(["\n  overflow: hidden;\n  max-width: 260px;\n  min-width: 260px;\n  margin: 0px 10px;\n  background: white;\n  border-radius: 4px;\n  .ant-pagination.ant-pagination-simple {\n    display: flex;\n    justify-content: center;\n    margin-bottom: 3px;\n  }\n"]))),Pe=T.a.div(u||(u=Object(k.a)(["\n  border-bottom: 1px solid rgba(255, 255, 255, 0.5);\n  max-height: 26px;\n  padding: 2px 5px;\n  background: ",";\n  color: ",";\n"])),(function(e){return e.background?e.background:"#d7303cff"}),(function(e){return e.color?e.color:"white"})),Ee=T.a.div(j||(j=Object(k.a)(["\n  margin: 0;\n  margin-bottom: 8px;\n  padding: 5px 0;\n  text-align: center;\n  background: ",";\n  color: ",";\n"])),(function(e){return e.background?e.background:"#d7303cff"}),(function(e){return e.color?e.color:"white"})),Re=T.a.p(p||(p=Object(k.a)(["\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  word-break: keep-all;\n  width: ",";\n  height: 25px;\n  margin: 0;\n"])),(function(e){return""!==e.width?e.width:"190px"})),Be=T.a.div(b||(b=Object(k.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  padding: 8px 3px 8px 8px;\n  margin: 5px 0;\n  background: ",";\n  color: ",";\n  .funnelStepStudent__first--info {\n    display: flex;\n    flex-direction: column;\n    div:first-of-type {\n      font-weight: bold;\n    }\n    p {\n      margin: 0;\n    }\n    div:last-of-type {\n      margin-bottom: 3px;\n    }\n  }\n  .ant-btn.ant-btn-primary.ant-btn-sm {\n    filter: brightness(0.9);\n    background: ",";\n    border-color: ",";\n    color: ",";\n  }\n  p {\n    margin: 0;\n  }\n"])),(function(e){return e.background?e.background:"#d7303cff"}),(function(e){return e.color?e.color:"white"}),(function(e){return e.background?e.background:"#d7303cff"}),(function(e){return e.background?e.background:"#d7303cff"}),(function(e){return e.color?e.color:"white"})),ze=n(44),Me=n.n(ze),Te=function(){var e=Object(y.a)(v.a.mark((function e(t,n,a){var c,o,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.pageSize,o=n.currentPage,e.next=3,Me.a.get("".concat(t,"/CRM/SalesFunnel/").concat(a,"?limit=").concat(c,"&offset=").concat((o-1)*c),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("tokenID")),"Content-Type":"application/json;charset=utf-8"}}).then((function(e){return r={students:e.data[0].pupils,count:e.data[0].pupilsCount}}));case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Ge=function(){var e=Object(y.a)(v.a.mark((function e(t,n,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me.a.patch("".concat(t,"/CRM/Pupils/").concat(n),a,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("tokenID")),"Content-Type":"application/json;charset=utf-8"}});case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(y.a)(v.a.mark((function e(t,n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me.a.get("".concat(t,"/CRM/SalesFunnel?limit=").concat(n),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("tokenID")),"Content-Type":"application/json;charset=utf-8"}}).then((function(e){return a=e.data}));case 2:return e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Le=function(e){var t=e.funnel,n=e.Url,a=e.pupils,c=e.status,o=e.loader,r=e.bigIcon,i=void 0!==r&&r,s=e.update,l=void 0===s?function(){}:s,d=o.setLoaded,u=a.setPupilsList,j=new RegExp(/\w+#[0-9]{4}/),p="DD-MM-YYYY",b=Object(m.useState)(!1),h=Object(O.a)(b,2),f=h[0],x=h[1],g=Object(m.useState)(!1),k=Object(O.a)(g,2),N=k[0],S=k[1],C=Object(m.useState)(pe()("01-01-2021",p)),I=Object(O.a)(C,2),w=I[0],_=I[1],P=Object(m.useState)(""),R=Object(O.a)(P,2),B=R[0],z=R[1],T=Object(m.useState)(""),F=Object(O.a)(T,2),L=F[0],A=F[1],Y=Object(m.useState)(""),U=Object(O.a)(Y,2),V=U[0],H=U[1],q=Object(m.useState)(""),K=Object(O.a)(q,2),W=K[0],$=K[1],X=Object(m.useState)(""),J=Object(O.a)(X,2),Q=J[0],ee=J[1],te=Object(m.useState)(""),ae=Object(O.a)(te,2),ce=ae[0],oe=ae[1],re=Object(m.useState)(""),ie=Object(O.a)(re,2),le=ie[0],de=ie[1],ue=Object(m.useState)(""),je=Object(O.a)(ue,2),be=je[0],he=je[1],me=Object(m.useState)(t[0]._id),fe=Object(O.a)(me,2),ve=fe[0],Ce=fe[1],Ie=function(){z((function(e){return""})),A((function(e){return""})),H((function(e){return""})),_((function(e){return pe()("01-01-2021",p)})),$((function(e){return""})),oe((function(e){return""})),he((function(e){return""}))},we=function(){S(!1),Ie()},De=function(){S(!0)},Pe=function(e){return e.target.value=""},Ee=function(){var e=Object(y.a)(v.a.mark((function e(){var t,a,o,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,x(!0),""!==W){e.next=5;break}throw D("\u041e\u0448\u0438\u0431\u043a\u0430!","\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d \u043f\u043e\u043b"),new Error("\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d \u043f\u043e\u043b");case 5:if(ve){e.next=8;break}throw D("\u041e\u0448\u0438\u0431\u043a\u0430!","\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d \u044d\u0442\u0430\u043f \u0432\u043e\u0440\u043e\u043d\u043a\u0438"),new Error("\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d \u044d\u0442\u0430\u043f \u0432\u043e\u0440\u043e\u043d\u043a\u0438");case 8:if(3===ce.split(" ").filter((function(e){return""!==e})).length){e.next=11;break}throw D("\u041e\u0448\u0438\u0431\u043a\u0430!","\u0424\u0418\u041e \u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0432\u0432\u0435\u0434\u0435\u043d\u044b \u043d\u0435\u0432\u0435\u0440\u043d\u043e"),new Error("\u0424\u0418\u041e \u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0432\u0432\u0435\u0434\u0435\u043d\u044b \u043d\u0435\u0432\u0435\u0440\u043d\u043e");case 11:if(""===be||-1!==be.search(j)){e.next=14;break}throw D("\u041e\u0448\u0438\u0431\u043a\u0430!","\u041d\u0438\u043a \u0432 \u0434\u0438\u0441\u043a\u043e\u0440\u0434\u0435 \u0431\u044b\u043b \u0432\u0432\u0435\u0434\u0451\u043d \u043d\u0435 \u0432\u0435\u0440\u043d\u043e, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043d\u0430\u043b\u0438\u0447\u0438\u0435 '#' \u0438 \u0446\u0438\u0444\u0440 \u043f\u043e\u0441\u043b\u0435 \u043d\u0435\u0451, \u0430 \u0442\u0430\u043a \u0436\u0435 \u0440\u0443\u0441\u0441\u043a\u0438\u0445 \u0431\u0443\u043a\u0432"),new Error("\u041d\u0438\u043a \u0432 \u0434\u0438\u0441\u043a\u043e\u0440\u0434\u0435 \u0431\u044b\u043b \u0432\u0432\u0435\u0434\u0451\u043d \u043d\u0435 \u0432\u0435\u0440\u043d\u043e, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043d\u0430\u043b\u0438\u0447\u0438\u0435 '#' \u0438 \u0446\u0438\u0444\u0440 \u043f\u043e\u0441\u043b\u0435 \u043d\u0435\u0451, \u0430 \u0442\u0430\u043a \u0436\u0435 \u0440\u0443\u0441\u0441\u043a\u0438\u0445 \u0431\u0443\u043a\u0432");case 14:return t={_id:Date.now(),name:B,midname:V,surname:L,gender:W,dateOfBirth:w.toISOString(),phone:le||void 0,discord:""!==be?String(be.match(j).shift()):void 0,parentPhone:Q,parentFullname:ce,salesFunnelStep:ve},e.next=17,i=n,s=t,void Me.a.post("".concat(i,"/CRM/Pupils"),{name:s.name,midname:s.midname,surname:s.surname,gender:s.gender,dateOfBirth:s.dateOfBirth,phone:s.phone,discord:s.discord,parentPhone:s.parentPhone,parentFullname:s.parentFullname,salesFunnelStep:s.salesFunnelStep},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("tokenID")),"Content-Type":"application/json;charset=utf-8"}});case 17:return E("\u0423\u0441\u043f\u0435\u0448\u043d\u043e!","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441\u043e\u0437\u0434\u0430\u043d!"),l(),e.next=21,u((function(e){return[].concat(Object(se.a)(e),[t])}));case 21:d((function(e){return!0})),d((function(e){return!1})),S(!1),x(!1),Ie(),e.next=34;break;case 28:e.prev=28,e.t0=e.catch(0),c||console.log(e.t0),S(!0),x(!1),e.t0.response&&(M(e.t0.response.status),a=e.t0.response,o=a.status,r=a.data,400===o&&D("\u041d\u0435 \u0432\u0435\u0440\u043d\u043e \u0432\u0432\u0435\u0434\u0435\u043d\u044b \u0434\u0430\u043d\u043d\u044b\u0435"),"TOKEN_EXPIRED"===r.message&&Z(r.token),401===o&&(localStorage.removeItem("tokenID"),window.location.replace("/")),500===o&&D("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430"));case 34:case"end":return e.stop()}var i,s}),e,null,[[0,28]])})));return function(){return e.apply(this,arguments)}}();return Object(G.jsxs)(G.Fragment,{children:[i?Object(G.jsx)("div",{style:{position:"absolute",right:0},className:"collapse d-flex flex-row-reverse",id:"navbarScroll",children:Object(G.jsx)("div",{className:"d-flex plus-box",children:Object(G.jsx)("div",{className:"nav-item plus",onClick:De,children:Object(G.jsx)("i",{className:"bi bi-person-plus",style:{fontSize:"38px",color:"#F56767"}})})})}):Object(G.jsx)(ke.a,{style:Se,onClick:De}),Object(G.jsx)(xe.a,{width:900,title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0443\u0447\u0435\u043d\u0438\u043a\u0430",visible:N,onCancel:we,footer:[Object(G.jsx)(Oe.a,{onClick:we,children:"\u041e\u0442\u043c\u0435\u043d\u0430"},"back"),Object(G.jsx)(Oe.a,{onClick:Ee,loading:f,type:"primary",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"},"submit")],children:Object(G.jsxs)("form",{action:"#",method:"POST",children:[Object(G.jsxs)(_e,{children:[Object(G.jsx)("p",{children:"\u0418\u043c\u044f:"}),Object(G.jsx)(ne.a,{onChange:function(e){z((function(t){return e.target.value}))},value:B,required:!0})]}),Object(G.jsxs)(_e,{children:[Object(G.jsx)("p",{children:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f:"}),Object(G.jsx)(ne.a,{onChange:function(e){H((function(t){return e.target.value}))},value:V,required:!0})]}),Object(G.jsxs)(_e,{children:[Object(G.jsx)("p",{children:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e:"}),Object(G.jsx)(ne.a,{onChange:function(e){A((function(t){return e.target.value}))},value:L,required:!0})]}),Object(G.jsxs)(_e,{children:[Object(G.jsx)("p",{children:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442:"}),Object(G.jsx)(ge.a,{className:"form-control",placeholder:"\u0413\u0413\u0413\u0413.\u041c\u041c.\u0414\u0414",defaultValue:pe()("01-01-2021",p),format:p,onChange:function(e){_((function(t){return e}))}})]}),Object(G.jsxs)(_e,{children:[Object(G.jsx)("p",{children:"\u0424\u0418\u041e \u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044f:"}),Object(G.jsx)(ne.a,{onChange:function(e){oe((function(t){return e.target.value}))},value:ce,required:!0,placeholder:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f \u0418\u043c\u044f \u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"})]}),Object(G.jsxs)(_e,{children:[Object(G.jsx)("p",{children:"\u041d\u0438\u043a \u0432 \u0434\u0438\u0441\u043a\u043e\u0440\u0434\u0435:"}),Object(G.jsx)(ne.a,{onChange:function(e){he((function(t){return e.target.value}))},value:be,placeholder:"\u041d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e"})]}),Object(G.jsxs)(_e,{children:[Object(G.jsx)("p",{children:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0440\u0435\u0431\u0451\u043d\u043a\u0430:"}),Object(G.jsx)(ye.a,{autoComplete:"off",onChange:function(e){de((function(t){return e.target.value}))},onFocus:Pe,style:Ne,type:"tel",name:"tel",className:"form-control",mask:"+9 (999) 999-99-99",placeholder:"\u041d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e"})]}),Object(G.jsxs)(_e,{children:[Object(G.jsx)("p",{children:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f:"}),Object(G.jsx)(ye.a,{autoComplete:"off",onChange:function(e){ee((function(t){return e.target.value}))},onFocus:Pe,style:Ne,type:"tel",name:"tel",className:"form-control",mask:"+9 (999) 999-99-99"})]}),Object(G.jsxs)(_e,{children:[Object(G.jsx)("p",{children:"\u041f\u043e\u043b:"}),Object(G.jsxs)("select",{onChange:function(e){$((function(t){return e.target.value}))},name:"gender",value:W,className:"form-control",required:!0,children:[Object(G.jsx)("option",{defaultValue:!0}),Object(G.jsx)("option",{value:"\u041c\u0443\u0436\u0441\u043a\u043e\u0439",children:"\u041c\u0443\u0436\u0441\u043a\u043e\u0439"}),Object(G.jsx)("option",{value:"\u0416\u0435\u043d\u0441\u043a\u0438\u0439",children:"\u0416\u0435\u043d\u0441\u043a\u0438\u0439"})]})]}),Object(G.jsxs)(_e,{children:[Object(G.jsx)("p",{children:"\u0412\u043e\u0440\u043e\u043d\u043a\u0430:"}),Object(G.jsxs)("select",{className:"form-control",name:"salesFunnelId",value:ve,onChange:function(e){Ce((function(t){return e.target.value}))},children:[Object(G.jsx)("option",{value:"",defaultValue:!0}),t.map((function(e){return Object(G.jsx)("option",{value:e._id,children:e.name},e._id)}))]})]})]})})]})},Ae=(n(381),[1020,700].map((function(e){return"@media (max-width: ".concat(e,"px)")}))),Ye=T.a.div((h={padding:"0 30px"},Object(le.a)(h,Ae[1],{padding:"0 0"}),Object(le.a)(h,".log_h2",{}),Object(le.a)(h,"td",{paddingTop:"1px",paddingBottom:"4px"}),Object(le.a)(h,"th, td",{whiteSpace:"nowrap"}),h)),Ue=n(44),Ve=function(){var e=Object(m.useState)(0),t=Object(O.a)(e,2),n=t[0],a=t[1],c=Object(m.useState)(0),o=Object(O.a)(c,2),r=o[0],i=o[1],s=Object(m.useState)([{_id:""}]),l=Object(O.a)(s,2),d=l[0],u=l[1],j=Object(m.useState)([{_id:"45343235456645",surname:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0443\u0441\u0442...",name:"",midname:"",dateOfBirth:"2004-12-07",gender:"",phoneNumber:"",parentPhoneNumber:"",discordNickname:"",groups:[],parentFullname:""}]),p=Object(O.a)(j,2),b=p[0],h=p[1],f=function(){var e=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe(N,8);case 2:t=e.sent,u((function(e){return t}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c={};for(var o in a)c.groups||(c.groups=[]),c.groups.push(o);for(var r in n)n[r][0]&&("surname"==r||"name"==r||"midname"==r||"dateOfBirth"==r?c["".concat(r,"s")]=n[r]:c["".concat(r)]=n[r]);if(c.ages){var s=Object(se.a)(c.ages);c.ages=[],s.forEach((function(e){c.ages.push(+e)}))}if(c.balance){var l=Object(se.a)(c.balance);1==l[0]&!l[1]?c.balance={$gte:0}:2==l[0]&!l[1]?c.balance={$lt:0}:l[1]&&(c.balance={$gte:0,$lte:0})}var d={filters:c};Ue({method:"post",url:"".concat(N,"/CRM/Pupils/find?limit=").concat(me,"&offset=").concat(t),headers:{"Content-Type":"application/jsoncharset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:d}).then((function(e){var t=e.data,n=e.headers;h(t),i(n.count)})).catch((function(t){ee(e,t)}))};Object(m.useEffect)((function(){x(),f()}),[]),Object(m.useEffect)((function(){document.querySelectorAll("input").forEach((function(e){e.value=""})),document.querySelectorAll("select").forEach((function(e){e.value=""}))}));var g=[];b.forEach((function(e){var t=function(){var a=Object(y.a)(v.a.mark((function a(){return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:Ue({method:"DELETE",url:"".concat(N,"/CRM/Pupils/").concat(e._id),headers:{"Content-Type":"application/jsoncharset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){x(n)})).catch((function(e){ee(t,e)}));case 1:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),a=e._id,c=e.parentFullname,o=e.surname,r=e.name,i=e.midname,s=e.dateOfBirth,l=e.gender,d=e.phone,u=e.balance,j=e.parentPhone,p=e.discord,b=e.groups;g.push({key:a,trash:t,surname:function(){return Object(G.jsx)(Y.b,{className:"link-info",to:"/student/".concat(a),children:o})},name:r,midname:i,dateOfBirth:be(s),gender:l,phoneNumber:d,tutor:"",parentPhoneNumber:j,parentFullname:c,balance:"".concat(u),groups:b||[],discordNickname:p})}));var k=function(e,t){return{title:e,dataIndex:t,key:t}},S=[{title:"",dataIndex:"trash",key:"trash",render:function(e){if(e)return Object(G.jsx)("i",{onClick:e,className:"bi bi-trash",style:{fontSize:"30px",color:"#F56767",cursor:"pointer"}})}},Object(ie.a)(Object(ie.a)({},k("\u0424\u0430\u043c\u0438\u043b\u0438\u044f","surname")),{},{render:function(e){if("function"==typeof e)return e()}}),Object(ie.a)({},k("\u0418\u043c\u044f","name")),Object(ie.a)({},k("\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e","midname")),Object(ie.a)({},k("\u0412\u043e\u0437\u0440\u0430\u0441\u0442","dateOfBirth")),Object(ie.a)({},k("\u041f\u043e\u043b","gender")),Object(ie.a)({},k("\u0424\u0418\u041e \u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044f","parentFullname")),Object(ie.a)({},k("\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430","phoneNumber")),Object(ie.a)({},k("\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f","parentPhoneNumber")),Object(ie.a)({},k("\u0411\u0430\u043b\u0430\u043d\u0441","balance")),Object(ie.a)(Object(ie.a)({},k("\u0413\u0440\u0443\u043f\u043f\u044b","groups")),{},{render:function(e){if("function"==typeof e.map)return Object(G.jsx)(G.Fragment,{children:e.map((function(e){return Object(G.jsx)(de.a,{color:"blue",children:e.group_name},"".concat(e._id))}))})}}),Object(ie.a)({},k("\u0414\u0438\u0441\u043a\u043e\u0440\u0434 \u043d\u0438\u043a\u043d\u0435\u0439\u043c","discordNickname"))];return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("nav",{id:"navbar-student",className:"navbar navbar-expand-lg navbar-light",children:Object(G.jsx)("div",{className:"container-fluid d-flex",children:Object(G.jsx)("div",{className:"collapse d-flex flex-row h3-person",children:Object(G.jsx)("div",{className:"d-flex plus-box",children:Object(G.jsx)("div",{children:Object(G.jsx)("h3",{children:"\u0423\u0447\u0435\u043d\u0438\u043a\u0438"})})})})})}),Object(G.jsx)(Ye,{className:"",children:Object(G.jsxs)("div",{children:[Object(G.jsx)("div",{className:"table_user",children:Object(G.jsx)(ue.a,{pagination:!1,dataSource:g,columns:S,scroll:{x:0}})}),Object(G.jsx)(fe,{getItem:x,count:r,offset:n,setOffset:a})]})}),Object(G.jsx)(Le,{loader:{loaded:!0,setLoaded:function(){}},status:1,funnel:d,pageSize:8,Url:N,pupils:{pupilsList:[],setPupilsList:function(){}},bigIcon:!0,update:x})]})},He=n(188),qe=n(581),Ke=n(44),We=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},c=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0,i=c?"/CRM/Pupils/".concat(t,"/Payment?amount=").concat(+e,"&subscription=").concat(c,"&group_id=").concat(o):"/CRM/Pupils/".concat(t,"/Payment?amount=").concat(+e);Ke({method:"post",url:"".concat(N).concat(i),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){a(),n()})).catch((function(e){ee((function(){}),e,r,n,(function(){D("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0431\u0430\u043b\u0430\u043d\u0441","\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430")}))}))},$e=function(e){var t,a=e.itemG,c=e.dataGroup,o=e.getGroup_Id,r=e.setData,i=e.surname,s=e.name,l=e.pageInfo,d=e.type,u=n(44),j=Object(m.useState)("-1"),p=Object(O.a)(j,2),b=p[0],h=p[1],f=Object(m.useState)(["fixedSchedule-H","","bi-plus-circle"]),x=Object(O.a)(f,2),g=x[0],v=x[1],y=a.localSchedule["".concat(c)]?a.localSchedule["".concat(c)]:[],k=Object(m.useState)(y),S=Object(O.a)(k,2),C=S[0],I=S[1],w=Object(m.useState)([]),_=Object(O.a)(w,2),P=_[0],E=_[1],R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};u({method:"put",url:"".concat(N,"/CRM/Groups/").concat(c,"/Pupils/").concat(a._id,"/Schedule"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:e}).then((function(e){t()})).catch((function(e){if(e.response){M(e.response.status);var t=e.response,n=t.status,a=t.data;t.statusText;404==n?D("Error 404","\u0421\u0435\u0440\u0432\u0435\u0440 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"):401==n&&("TOKEN_EXPIRED"==a.message?(Z(e.response.data.token),o()):(localStorage.removeItem("tokenID"),window.location.replace("/")))}}))},B=P.map((function(e,t){console.log(e);return Object(G.jsx)(H.a.Item,{className:"li",children:Object(G.jsx)("span",{onClick:function(){for(var t=Object(se.a)(C),n=0,r=0;n<e.hoursCount;)t[r].paid||(t[r].paid=!0,n++),r++;var i=function(){};R(t,(function(){We("-".concat(e.price),a._id,i,o,e._id,c,(function(){R(t)}))})),I(t)},className:"dropdown-item bg-info text-light",href:"#",children:e.name})},t)})),z=Object(G.jsx)(H.a,{children:B});Object(m.useEffect)((function(){u({method:"get",url:"".concat(N,"/CRM/Subscriptions"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){E(e.data)})).catch((function(e){if(e.response){M(e.response.status);var t=e.response,n=t.status,a=t.data;t.statusText,404==n?D("Error 404","\u0421\u0435\u0440\u0432\u0435\u0440 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"):401==n&&("TOKEN_EXPIRED"==a.message?(Z(e.response.data.token),o()):(localStorage.removeItem("tokenID"),window.location.replace("/")))}}))}),[]);var F,L=[780,1380,2002],A=L.map((function(e){return"@media (max-width: ".concat(e,"px)")})),U=(L.map((function(e){return"@media (min-width: ".concat(e,"px)")})),T.a.div({borderBottom:"1px solid #91A8B0",paddingBottom:"5px",marginBottom:"5px",i:{color:"#17a2b8",fontSize:"26px",cursor:"pointer",paddingTop:"10px"},".global-fon3000":{position:"fixed",top:"0",left:"0",zIndex:"99",height:"100vh",background:"rgba(0, 0, 0, 0.6)",overflowY:"scroll",i:{position:"fixed",top:"3px",left:"7px",color:"#fff"},".bi-trash":{display:"none"}},h4:{display:"inline-block",marginRight:"10px",marginBottom:"19px"},".fixedSchedule-H":{maxHeight:"81px",overflow:"hidden"},".scheblueFixet":{margin:"0 auto",marginTop:"50px",width:"86%"},".fixedSchedule-H, .scheblueFixet":(t={overflow:"hidden",width:"2476px"},Object(le.a)(t,A[2],{width:"1857px"}),Object(le.a)(t,A[1],{width:"1238px"}),Object(le.a)(t,A[0],{width:"619px"}),t),".boxDay":{overflowX:"auto",padding:"0 0 10px 0","&::-webkit-scrollbar":{height:"10px",backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:"10px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#17a2b8",borderRadius:"10px"}}})),V=T.a.div({margin:"0 3px 0 0",position:"initial",button:{fontSize:"15px",fontWeight:"600",padding:"1px 7px",width:"71px"},".btnAbic":{width:"100%"},ul:{border:"none",background:"rgba(0, 0, 0, 0.3)",padding:"6px"},".li":{border:"none",background:"rgba(0, 0, 0, 0)",span:{borderRadius:"6px",fontWeight:"500",cursor:"pointer"},".input-group-text":{margin:"0",borderRadius:"6px 0 0 6px"},textarea:{padding:"2px 7px",fontWeight:"500"}}}),q=1;F=C.map((function(e,t){var n=0;8==q?(n=27,q=1):q++;var c=pe()(e.date,"DD.MM.YYYY").format("DD.MM"),r="#f8f9fa",i="1",s=pe()(e.date,"DD.MM.YYYY").format("YYYY-MM-DD"),l=pe()().diff(s,"day");e.paid&3!=e.status&l<=0?r="#17a2b8":3==e.status&l<=0?r="#6c757d":3==e.status&e.paid?r="#dc3545":l>0&e.paid?r="#28a745":l>0&!e.paid&3!=e.status?(r="#28a745",i="0.5"):l>0&!e.paid&3==e.status&&(r="#dc3545",i="0.5");var d=function(e){var n=Object(se.a)(C);2==e&3==n[t].status||3==e&l<0?(n[t].status=e,R(n),I(n)):3!==e&2!==e?(n[t].title=e,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};u({method:"post",url:"".concat(N,"/CRM/Pupils/").concat(a._id,"/Notes"),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:{text:e}}).then((function(){t()})).catch((function(e){e.response&&(M(e.response.status),o())}))}(e,(function(){R(n)})),I(n)):D("\u041d\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441")},j=T.a.span({marginRight:"".concat(n,"px")}),p="",m="";e.title&&(m="#ffc107");var f=Object(G.jsxs)(H.a,{children:[Object(G.jsx)(H.a.Item,{children:Object(G.jsx)("span",{onClick:function(){d("3")},className:"dropdown-item bg-secondary text-light",href:"#",children:"\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u043b"})},"".concat(c,"1")),Object(G.jsx)(H.a.Item,{children:Object(G.jsx)("span",{onClick:function(){d("2")},className:"dropdown-item bg-success text-light",href:"#",children:"\u0423\u0440\u043e\u043a \u043f\u0440\u043e\u0439\u0434\u0435\u043d"})},"".concat(c,"2")),Object(G.jsx)(H.a.Item,{children:Object(G.jsxs)("div",{className:"input-group",children:[Object(G.jsx)("span",{onClick:function(){d(p),h("")},className:"input-group-text bg-info text-light",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(G.jsx)("textarea",{placeholder:"\u041e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0443...",defaultValue:e.title,onChange:function(e){p=e.target.value},className:"form-control","aria-label":"With textarea"})]})},"".concat(c,"3"))]},c),x=!1;return b===t?x=!0:""===b&&(x=!1),Object(G.jsx)(j,{children:Object(G.jsx)(V,{className:"btn-group",children:Object(G.jsx)(He.a,{onVisibleChange:function(e){},overlay:f,visible:x,trigger:["click"],children:Object(G.jsx)("button",{type:"button",style:{color:"".concat(m),background:"".concat(r),opacity:"".concat(i)},className:"btn dropdown-toggle",onClick:function(){h(b===t?"":t)},children:c})})})},"".concat(c).concat(t))}));var K=a._id,W="student";l&&(W=l,K=c);var $=Object(G.jsx)(Y.b,{to:"/".concat(W,"/").concat(K),children:Object(G.jsx)("h4",{children:"".concat(i," ").concat(s)})}),X="";"teacher"!=n(135).decode(localStorage.getItem("tokenID")).accountType&&(X=Object(G.jsx)("span",{children:Object(G.jsx)(V,{className:"btn-group",children:Object(G.jsx)(He.a,{overlay:z,trigger:["click"],children:Object(G.jsx)("button",{type:"button",className:"btn btn-success dropdown-toggle btnAbic",children:"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c"})})})}));return Object(G.jsx)(U,{className:"table",children:Object(G.jsxs)("div",{className:"pupils-item row",children:[Object(G.jsxs)("div",{className:"col-12",children:[$,X]}),Object(G.jsxs)("div",{className:"col-12".concat(g[1]),children:[Object(G.jsx)("div",{className:"boxDay",children:Object(G.jsx)("div",{className:"".concat(g[0]),children:F})}),Object(G.jsx)("i",{onClick:function(){"fixedSchedule-H"==g[0]?v(["scheblueFixet"," global-fon3000","bi-x-circle"]):v(["fixedSchedule-H","","bi-plus-circle"])},className:"bi ".concat(g[2])}),Object(G.jsx)(qe.a,{title:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435",content:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0443\u0447\u0435\u043d\u0438\u043a\u0430 \u0438\u0437 \u0433\u0440\u0443\u043f\u043f\u044b",placement:"right",trigger:"hover",children:Object(G.jsx)("i",{onClick:function(){console.log(a,c),u({method:"delete",url:"".concat(N,"/CRM/Groups/").concat(c,"/Pupils/").concat(a._id),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){var t=e.data,n=t.group,a=t.pupil;"group"==d?r(n):"pupil"==d&&r(a)})).catch((function(e){e.response&&M(e.response.status)}))},className:"bi bi-trash",style:{color:"rgb(245, 103, 10",marginLeft:"10px"}})})]})]})},a._id)};$e.defaultProps={surname:""};var Xe,Je,Qe=$e,Ze=function(e){var t=e.dataStudent,a=e.updetePage,c={},o=n(44),r=Object(m.useState)(""),i=Object(O.a)(r,2),s=i[0],l=i[1],d=t.groups,u=t.name,j=t.surname,p=t.midname,b=t.gender,h=t.parentFullname,f=t.dateOfBirth,x=t.phone,g=t.parentPhone,v=t.discord,y=t._id,k=function(){B("\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f","\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435"),o({method:"patch",url:"".concat(N,"/CRM/Pupils/").concat(y),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:c}).then((function(e){a(e.data),z(),R.fire({icon:"success",title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b"})})).catch((function(e){e.response&&M(e.response.status)}))},S=[],C=d.map((function(e,t){return S.push(e.group_name),Object(G.jsx)("span",{className:"badge bg-light text-dark",children:e.group_name},e._id)})),I=T.a.ul({".ant-picker":{span:{margin:"0"}},".ant-picker-input":{input:{width:"127px"}}}),w=Object(G.jsxs)(H.a,{children:[Object(G.jsx)(H.a.Item,{children:Object(G.jsx)("input",{placeholder:"\u041f\u043e\u043c\u0435\u043d\u044f\u0442\u044c \u0444\u0430\u043c\u0438\u043b\u0438\u044e",onChange:function(e){c={surname:"".concat(e.target.value)}},type:"name",className:"text-dark form-control col-12"})}),Object(G.jsx)(H.a.Item,{children:Object(G.jsx)("span",{onClick:function(){l(""),k()},className:"badge bg-warning text-dark save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),_=Object(G.jsxs)(H.a,{children:[Object(G.jsx)(H.a.Item,{children:Object(G.jsx)("input",{placeholder:"\u041d\u043e\u0432\u043e\u0435 \u0438\u043c\u044f",onChange:function(e){c={name:"".concat(e.target.value)}},type:"name",className:"text-dark form-control col-12"})}),Object(G.jsx)(H.a.Item,{children:Object(G.jsx)("span",{onClick:function(){l(""),k()},className:"badge bg-warning text-dark save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),D=Object(G.jsxs)(H.a,{children:[Object(G.jsx)(H.a.Item,{children:Object(G.jsx)("input",{placeholder:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u0435...",onChange:function(e){c={midname:"".concat(e.target.value)}},type:"name",className:"text-dark form-control col-12"})}),Object(G.jsx)(H.a.Item,{children:Object(G.jsx)("span",{onClick:function(){k(),l("")},className:"badge bg-warning text-dark save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),P=Object(G.jsxs)(H.a,{children:[Object(G.jsx)(H.a.Item,{children:Object(G.jsx)(ye.a,{mask:"+9 (999) 999-99-99",placeholder:"\u041d\u043e\u0432\u044b\u0439 \u043d\u043e\u043c\u0435\u0440",onChange:function(e){c={parentPhone:"".concat(e.target.value)}},type:"name",className:"text-dark form-control col-12"})}),Object(G.jsx)(H.a.Item,{children:Object(G.jsx)("span",{onClick:function(){k(),l("")},className:"badge bg-warning text-dark save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),E=Object(G.jsxs)(H.a,{children:[Object(G.jsx)(H.a.Item,{children:Object(G.jsx)(ye.a,{mask:"+9 (999) 999-99-99",placeholder:"\u041d\u043e\u0432\u044b\u0439 \u043d\u043e\u043c\u0435\u0440",onChange:function(e){c={phone:"".concat(e.target.value)}},type:"name",className:"text-dark form-control col-12"})}),Object(G.jsx)(H.a.Item,{children:Object(G.jsx)("span",{onClick:function(){k(),l("")},className:"badge bg-warning text-dark save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),F=Object(G.jsxs)(H.a,{children:[Object(G.jsx)(H.a.Item,{children:Object(G.jsx)("input",{placeholder:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c NickName",onChange:function(e){c={discord:"".concat(e.target.value)}},type:"name",className:"text-dark form-control col-12"})}),Object(G.jsx)(H.a.Item,{children:Object(G.jsx)("span",{onClick:function(){k(),l("")},className:"badge bg-warning text-dark save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]});return Object(G.jsxs)(I,{className:"list-group list-group-flush",children:[Object(G.jsxs)("li",{className:"list-group-item",children:["\u0424\u0430\u043c\u0438\u043b\u0438\u044f: ",Object(G.jsx)("span",{className:"badge bg-warning text-dark",children:j}),Object(G.jsx)("div",{className:"btn-group",children:Object(G.jsx)(He.a,{overlay:w,visible:function(){return"Surname"===s},trigger:["click"],children:Object(G.jsx)("i",{className:"bi bi-pencil",onClick:function(){l("Surname"===s?"":"Surname")},style:{fontSize:"20px",color:"#17a2b8",cursor:"pointer"}})})})]}),Object(G.jsxs)("li",{className:"list-group-item",children:["\u0418\u043c\u044f: ",Object(G.jsx)("span",{className:"badge bg-warning text-dark",children:u}),Object(G.jsx)("div",{className:"btn-group",children:Object(G.jsx)(He.a,{overlay:_,visible:function(){return"Name"===s},trigger:["hover"],children:Object(G.jsx)("i",{onClick:function(){l("Name"===s?"":"Name")},className:"bi bi-pencil",style:{fontSize:"20px",color:"#17a2b8",cursor:"pointer"}})})})]}),Object(G.jsxs)("li",{className:"list-group-item",children:["\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e: ",Object(G.jsx)("span",{className:"badge bg-warning text-dark",children:p}),Object(G.jsx)("div",{className:"btn-group",children:Object(G.jsx)(He.a,{overlay:D,visible:function(){return"Midname"===s},trigger:["hover"],children:Object(G.jsx)("i",{className:"bi bi-pencil",onClick:function(){l("Midname"===s?"":"Midname")},style:{fontSize:"20px",color:"#17a2b8",cursor:"pointer"}})})})]}),Object(G.jsxs)("li",{className:"list-group-item",children:["\u0412\u043e\u0437\u0440\u0430\u0441\u0442:",Object(G.jsx)("span",{className:"badge bg-success text-light",children:be(f)}),Object(G.jsx)(ge.a,{onChange:function(e){c={dateOfBirth:e._d.toISOString()},k()},placeholder:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0432\u043e\u0437\u0440\u0430\u0441\u0442"})]}),Object(G.jsxs)("li",{className:"list-group-item",children:["\u041f\u043e\u043b:",Object(G.jsx)("span",{className:"badge bg-success text-light",children:b})]}),Object(G.jsxs)("li",{className:"list-group-item",children:["\u0424\u0418\u041e \u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044f:",Object(G.jsx)("span",{className:"badge bg-success text-light",children:h})]}),Object(G.jsxs)("li",{className:"list-group-item",children:["\u041d\u043e\u043c\u0435\u0440 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f: ",Object(G.jsx)("span",{className:"badge bg-info text-light",children:g}),Object(G.jsx)("div",{className:"btn-group",children:Object(G.jsx)(He.a,{overlay:P,visible:function(){return"ParentPhone"===s},children:Object(G.jsx)("i",{className:"bi bi-pencil",onClick:function(){l("ParentPhone"===s?"":"ParentPhone")},style:{fontSize:"20px",color:"#17a2b8",cursor:"pointer"}})})})]}),Object(G.jsxs)("li",{className:"list-group-item",children:["\u041d\u043e\u043c\u0435\u0440 \u0443\u0447\u0435\u043d\u0438\u043a\u0430: ",Object(G.jsx)("span",{className:"badge bg-warning text-dark",children:x}),Object(G.jsx)("div",{className:"btn-group",children:Object(G.jsx)(He.a,{overlay:E,visible:function(){return"Phone"===s},children:Object(G.jsx)("i",{className:"bi bi-pencil",onClick:function(){l("Phone"===s?"":"Phone")},style:{fontSize:"20px",color:"#17a2b8",cursor:"pointer"}})})})]}),Object(G.jsxs)("li",{className:"list-group-item",children:["Discord: ",Object(G.jsx)("span",{className:"badge bg-light text-dark",children:v}),Object(G.jsx)("div",{className:"btn-group",children:Object(G.jsx)(He.a,{className:"Discord",overlay:F,visible:function(){return"Discord"===s},children:Object(G.jsx)("i",{className:"bi bi-pencil",onClick:function(){l("Discord"===s?"":"Discord")},style:{fontSize:"20px",color:"#17a2b8",cursor:"pointer"}})})})]}),Object(G.jsxs)("li",{className:"list-group-item",children:["\u0413\u0440\u0443\u043f\u043f\u044b: ",C]})]})},et=function(e){var t=e.pay_History,n=t||[],a=[];n.forEach((function(e,t){0==e.type&&a.unshift(Object(G.jsxs)("li",{className:"list-group-item",children:[e.date," ",Object(G.jsxs)("span",{children:[e.amount,"\u20bd"]})," ",Object(G.jsx)("br",{}),e.issuer]},t))}));var c=[];n.forEach((function(e,t){1==e.type&&c.unshift(Object(G.jsxs)("li",{className:"list-group-item",children:[e.date," ",Object(G.jsxs)("span",{children:[e.amount,"\u20bd"]})," ",Object(G.jsx)("br",{}),e.issuer]},t))}));var o=T.a.div({margin:"0",padding:"0",".colona":{padding:"0 3px",marginBottom:"15px",h3:{fontSize:"16px"},ul:{borderRadius:"5px",overflow:"auto",maxHeight:"268px","&::-webkit-scrollbar":{width:"10px",backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:"10px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#17a2b8",borderRadius:"10px"}},li:{span:{fontSize:"17px"}}},".colona-1":{ul:{border:"1px solid #28a745"},li:{span:{color:"#28a745"}}},".colona-2":{ul:{border:"1px solid #f27474"},li:{span:{color:"#28a745"}}}});return Object(G.jsxs)(o,{className:"col-12 row",children:[Object(G.jsxs)("div",{className:"colona colona-1 col-6",children:[Object(G.jsx)("h3",{className:"badge bg-success text-light",children:"\u041f\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435"}),Object(G.jsx)("ul",{className:"list-group",children:a})]}),Object(G.jsxs)("div",{className:"colona colona-2 col-6",children:[Object(G.jsx)("h3",{className:"badge bg-danger text-light",children:"\u041e\u043f\u043b\u0430\u0442\u0430"}),Object(G.jsx)("ul",{className:"list-group",children:c})]})]})},tt=n(579),nt=n(582),at=n(570),ct=n(575),ot=ne.a.TextArea,rt=n(44),it=function(e){var t=e.notesGlobal,a=(e.update,e._id),c=function(e){var t=e.comments;return console.log(t),Object(G.jsx)(nt.b,{dataSource:t,header:"".concat(t.length," ").concat(t.length>1?"replies":"reply"),itemLayout:"horizontal",renderItem:function(e){var t=Object(ie.a)({},e);return t.datetime=pe()(e.datetime).locale("ru").format("dddd, D MMMM YYYY \u0433., HH:MM"),"Invalid date"===t.datetime&&(t.datetime=e.datetime),Object(G.jsx)(at.a,Object(ie.a)({},t))}})};Object(m.useEffect)((function(){document.querySelector(".ant-input").value="";var e=document.querySelector(".ant-drawer-body");e.scrollTop=e.scrollHeight}));var o=n(135).decode(localStorage.getItem("tokenID")),r=o.surname,i=o.name,s=o.midname,l="".concat(r," ").concat(i," ").concat(s),d=Object(m.useState)(t),u=Object(O.a)(d,2),j=u[0],p=u[1],b=Object(m.useState)(!1),h=Object(O.a)(b,2),f=h[0],x=h[1],g="";return Object(G.jsxs)(G.Fragment,{children:[j.length>0&&Object(G.jsx)(c,{comments:j}),Object(G.jsx)(at.a,{content:Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(ct.a.Item,{children:Object(G.jsx)(ot,{id:"TextArea",onClick:function(){document.querySelector("#TextArea").value=""},rows:4,onChange:function(e){g=e.target.value},placeholder:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"})}),Object(G.jsx)(ct.a.Item,{children:Object(G.jsx)(Oe.a,{htmlType:"submit",loading:f,onClick:function e(){g&&(x(!0),rt({method:"post",url:"".concat(N,"/CRM/Pupils/").concat(a,"/Notes"),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:{text:g}}).then((function(){x(!1),p([].concat(Object(se.a)(j),[{author:l,content:Object(G.jsx)("p",{children:g}),datetime:pe()().locale("ru").format("dddd, D MMMM YYYY \u0433., HH:MM")}]))})).catch((function(t){if(t.response){M(t.response.status);var n=t.response,a=n.status,c=n.data;404==a?D("404","\u0421\u0435\u0440\u0432\u0435\u0440 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"):401==a&&("TOKEN_EXPIRED"==c.message?(Z(c.token),g=g,e()):(localStorage.removeItem("tokenID"),window.location.replace("/")))}})))},type:"primary",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"})})]})})]})},st=function(e){var t=e.notes,n=e.update,a=e._id,c=Object(m.useState)(!1),o=Object(O.a)(c,2),r=o[0],i=o[1],s=T.a.div({".ant-comment-content-detail":{borderBottom:"1px solid #f0f0f0"}}),l=[];return(t||[]).forEach((function(e){var t=e.author,n=e.date,a=e.text;l.push({author:t,content:Object(G.jsx)("p",{children:a}),datetime:n})})),Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(Oe.a,{className:"Button-Drawer",type:"primary",onClick:function(){i(!0)},children:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u043a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438"}),Object(G.jsx)(tt.a,{width:"400px",placement:"right",closable:!1,onClose:function(){r&&n(),i(!1)},visible:r,children:Object(G.jsx)(s,{children:Object(G.jsx)(it,{notesGlobal:l,update:n,_id:a})})})]})},lt=function(e){var t=e.balance_item,n=e.pageStudent_id,a=e.updeteStudent,c=Object(m.useState)(!1),o=Object(O.a)(c,2),r=o[0],i=o[1],s=Object(m.useState)(+t?+t:0),l=Object(O.a)(s,2),d=l[0],u=l[1],j=0,p=function(){u(d)},b=T.a.span({borderRadius:"6px",fontWeight:"500",cursor:"pointer",fontSize:"14px"}),h=Object(G.jsxs)(H.a,{children:[Object(G.jsx)(H.a.Item,{children:Object(G.jsx)("input",{placeholder:"\u041f\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u044c",onChange:function(e){j=e.target.value},type:"number",className:"text-info form-control col-12"})}),Object(G.jsx)(H.a.Item,{children:Object(G.jsx)(b,{onClick:function(){i(!r),u(+d+ +j),We(j,n,a,void 0,void 0,void 0,p)},className:"badge bg-warning text-dark",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]});return Object(G.jsxs)("div",{className:"balance col-md-12 row",children:[Object(G.jsxs)("h6",{className:"calendar badge bg-success text-light",children:[d,Object(G.jsx)("span",{children:"\u20bd"})]}),Object(G.jsx)(He.a,{overlay:h,visible:r,trigger:["click"],children:Object(G.jsx)("i",{id:"dropdownMenuReference",className:"bi bi-plus",onClick:function(){i(!r)},style:{fontSize:"30px",color:"#17a2b8",cursor:"pointer"}})})]})},dt=function(){var e,t=Object(U.f)().id,a=(n(135),Object(m.useState)({_id:"60ba505dc12d3b9783c51d0f",name:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",surname:"",midname:"",gender:"",dateOfBirth:"2004-12-07",phone:"",parentPhone:"",discord:"",balance:0,localSchedule:{},groups:[],paymentHistory:[{type:1,date:"",amount:0,issuer:"",subscription:null},{type:0,date:"",amount:0,issuer:"",subscription:null}],notes:[]})),c=Object(O.a)(a,2),o=c[0],r=c[1],i=o.notes,s=o.groups,l=o.name,d=o.balance,u=o.localSchedule,j=o.paymentHistory,p=n(44),b=function e(){p({method:"get",url:"".concat(N,"/CRM/Pupils/").concat(t),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){r(e.data)})).catch((function(t){if(t.response){M(t.response.status);var n=t.response,a=n.status,c=n.data;404==a?D("404","\u0421\u0435\u0440\u0432\u0435\u0440 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"):401==a&&("TOKEN_EXPIRED"==c.message?(Z(c.token),e()):(localStorage.removeItem("tokenID"),window.location.replace("/")))}}))};Object(m.useEffect)((function(){b()}),[]);var h=[];for(var f in u)h.push(f);var x=[];s.forEach((function(e){x.push(e.group_name)}));var g=h.map((function(e,t){if(console.log(o),t<x.length)return console.log(x[t]),Object(G.jsx)(Qe,{pageInfo:"group",itemG:o,dataGroup:e,getGroup_Id:b,setData:r,name:x[t],type:"pupil"},e)})),v=[767].map((function(e){return"@media (max-width: ".concat(e,"px)")})),y=T.a.div({marginTop:"0px",margin:"0 auto",".pad":Object(le.a)({padding:"0px",paddingRight:"10px"},v[0],{paddingRight:"0px"}),".infoLog":(e={marginBottom:"10px",padding:"0"},Object(le.a)(e,v[0],{paddingBottom:"10px"}),Object(le.a)(e,".calendar",{margin:"auto 0",marginRight:"10px",fontSize:"20px",span:{paddingLeft:"6px"}}),e),".group-name":Object(le.a)({borderBottom:"1px solid #0dcaf0",padding:"0px"},v[0],{borderRight:"none"}),".balance":{h5:{fontSize:"1.25rem"}},".Button-Drawer":{position:"absolute",right:"0",top:"8px"},".ulBox":{borderRadius:"15px",padding:"0px"},".editing":{background:"#fff",borderRadius:"10px 10px 0 0",i:{marginLeft:"95%",cursor:"pointer"}},li:{backgroundColor:"none",span:{fontSize:"16px",margin:"0 5px 5px 0"}}}),k=T.a.div({background:"#fff",margin:"10px 0",padding:"10px",borderRadius:"15px","& > h3":{fontSize:"22px"}});return Object(G.jsxs)(y,{className:"container row col-12",children:[Object(G.jsxs)("div",{className:"col-12 col-md-6 pad",children:[Object(G.jsxs)("div",{className:"infoLog align-self-start col-md-12 col-12",children:[Object(G.jsxs)("div",{className:"group-name col-12 col-lg-12",children:[Object(G.jsx)("h3",{children:l}),Object(G.jsx)(st,{notes:i,update:b,_id:t})]}),Object(G.jsx)(lt,{balance_item:d,pageStudent_id:t,updeteStudent:b})]}),Object(G.jsx)(et,{pay_History:j})]}),Object(G.jsx)("div",{className:"col-md-6 ulBox",children:Object(G.jsx)(Ze,{dataStudent:o,updetePage:r})}),Object(G.jsxs)(k,{className:"container col-12",children:[Object(G.jsx)("h3",{className:"badge bg-warning",children:"\u0413\u0440\u0443\u043f\u043f\u044b:"}),g]})]})},ut=(n(563),n(44)),jt=function(){var e,t=Object(m.useState)(!1),n=Object(O.a)(t,2),a=n[0],c=n[1],o=Object(m.useState)(!1),r=Object(O.a)(o,2),i=r[0],s=r[1],l=function(){c(!1)},d=Object(m.useState)(0),u=Object(O.a)(d,2),j=u[0],p=u[1],b=Object(m.useState)(1),h=Object(O.a)(b,2),f=h[0],x=h[1],g=Object(m.useState)(["\u041f\u0443\u0441\u0442\u043e..."]),v=Object(O.a)(g,2),y=v[0],k=v[1],S=Object(m.useState)([]),C=Object(O.a)(S,2),I=C[0],w=C[1],_=Object(m.useState)([]),P=Object(O.a)(_,2),R=P[0],B=P[1],z=Object(m.useState)([]),F=Object(O.a)(z,2),L=F[0],A=F[1],U=function(){ut({method:"post",url:"".concat(N,"/CRM/Pupils/find?limit=150&offset=0"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){var t=[];e.data.forEach((function(e){t.push(["".concat(e.surname," ").concat(e.name),e._id])})),k(t),w(t)})).catch((function(e){ee(q,e)}))},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;ut({method:"post",url:"".concat(N,"/CRM/Groups/find?limit=10&offset=").concat(e),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){var t=e.data,n=e.headers;A(t),x(n.count)})).catch((function(e){ee(q,e)}))},H=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;ut({method:"get",url:"".concat(N,"/AdminPanel/CRMAccounts?limit=10&offset=").concat(t,"&accountType=teacher"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){var t=e.data;B(t)})).catch((function(t){ee(e,t)}))},q=function(){H(),U(),V(j)};Object(m.useEffect)((function(){q()}),[]),Object(m.useEffect)((function(){a&&document.getElementById("fort").focus()}));var K=R.map((function(e,t){var n=e.name,a=e.surname,c=e.midname,o=e._id;return Object(G.jsxs)("option",{value:o,children:[a," ",n," ",c]},n+t)})),W=Object(m.useState)([]),$=Object(O.a)(W,2),X=$[0],J=$[1],Q=Object(m.useState)(""),Z=Object(O.a)(Q,2),te=Z[0],ne=Z[1],ae=Object(m.useState)(""),ce=Object(O.a)(ae,2),oe=ce[0],re=ce[1],ie=Object(m.useState)(""),de=Object(O.a)(ie,2),ue=de[0],je=de[1],pe=Object(m.useState)(""),be=Object(O.a)(pe,2),he=be[0],me=be[1],ge={group_name:te,places:oe,tutor:ue,level:he},ve=function(){var e=ge.group_name,t=ge.places,n=ge.tutor,a=ge.level;ne(e),re(t),je(n),me(a)},ye=Object(m.useState)(""),ke=Object(O.a)(ye,2),Ne=ke[0],Se=ke[1],Ce=I.map((function(e){return Object(G.jsx)("li",{onClick:function(){var t=[].concat(Object(se.a)(X),[e]);X.forEach((function(n){n[1]==e[1]&&(t=Object(se.a)(X))})),J(t),ve()},className:"list-group-item",children:Object(G.jsx)("span",{className:"badge bg-warning text-dark",children:e[0]})},e[1])})),Ie=X.map((function(e,t){return Object(G.jsxs)("button",{onClick:function(){var e=Object(se.a)(X);e.splice(t,1),J(e),ve()},type:"button",className:"btn btn-info",children:[e[0]," ",Object(G.jsx)("i",{className:"bi bi-x",style:{fontSize:"15px"}})]},e[1])})),we=L.map((function(e){var t=e.group_name,n=e.tutor,a=e.level,c=e.places,o=e.pupils,r=e.global_schedule,i=e._id,s=o||[],l="\u0423\u0447\u0438\u0442\u0435\u043b\u044c \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d...",d="-";if(r&&r[0]){var u=r[0].duration;d="\u0441 ".concat(u[0]," \u0434\u043e ").concat(u[1])}if(n){var p=n.surname,b=n.name,h=n.midname;l="".concat(p," ").concat(b," ").concat(h)}return Object(G.jsxs)("tr",{children:[Object(G.jsx)("td",{className:"td-trash",scope:"row",children:Object(G.jsx)("i",{id:i,onClick:function t(){var n=document.getElementById(e._id);n.style.opacity="0.3",ut({method:"DELETE",url:"".concat(N,"/CRM/Groups/").concat(e._id),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){V(j),n.style.opacity="1"})).catch((function(e){ee(t,e)}))},className:"bi bi-trash",style:{fontSize:"30px",color:"#F56767"}})}),Object(G.jsx)("td",{className:"align-middle td-use",children:Object(G.jsx)(Y.b,{className:"link-info",to:"/group/".concat(i),children:t})}),Object(G.jsx)("td",{className:"align-middle td-use",children:l}),Object(G.jsxs)("td",{className:"align-middle td-use",children:[a," \u043a\u043b\u0430\u0441\u0441"]}),Object(G.jsx)("td",{className:"align-middle td-use",children:c}),Object(G.jsx)("td",{className:"align-middle td-use",children:c-s.length}),Object(G.jsx)("td",{className:"align-middle td-use",children:d})]},"".concat(i))})),_e=[1020,700].map((function(e){return"@media (max-width: ".concat(e,"px)")})),De=T.a.div((e={padding:"0 30px"},Object(le.a)(e,_e[1],{padding:"0 0"}),Object(le.a)(e,".table_user",{overflowX:"auto","&::-webkit-scrollbar":{height:"10px",backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:"10px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#17a2b8",borderRadius:"10px"}}),Object(le.a)(e,".log_h2",{}),Object(le.a)(e,"td",{paddingTop:"1px",paddingBottom:"4px"}),Object(le.a)(e,"th, td",{whiteSpace:"nowrap"}),e)),Pe=T.a.form({".addPUPILS":{".input-group":{ul:{overflowY:"scroll",height:"100px"},li:{cursor:"pointer",padding:"5px",span:{fontSize:"11px"}}}}});return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("nav",{id:"navbar-student",className:"navbar navbar-expand-lg navbar-light",children:Object(G.jsxs)("div",{className:"container-fluid d-flex",children:[Object(G.jsx)("div",{className:"collapse d-flex flex-row h3-person",children:Object(G.jsx)("div",{className:"d-flex plus-box",children:Object(G.jsx)("div",{children:Object(G.jsx)("h3",{children:"\u0413\u0440\u0443\u043f\u043f\u044b"})})})}),Object(G.jsx)("div",{className:"collapse d-flex flex-row-reverse",id:"navbarScroll",children:Object(G.jsx)("div",{className:"d-flex plus-box",children:Object(G.jsxs)("div",{className:"nav-item plus",onClick:function(){c(!0)},children:[Object(G.jsx)("i",{className:"bi bi-people",style:{fontSize:"38px",color:"#F56767"}}),Object(G.jsx)("i",{className:"bi bi-plus",style:{fontSize:"30px",color:"#F56767"}})]})})})]})}),Object(G.jsx)(De,{className:"",children:Object(G.jsxs)("div",{children:[Object(G.jsx)("div",{className:"table_user",children:Object(G.jsxs)("table",{className:"table table-striped",children:[Object(G.jsx)("thead",{children:Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{className:"th-h",scope:"col"}),Object(G.jsx)("th",{className:"th-h align-middle",scope:"col",children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(G.jsx)("th",{className:"th-h align-middle",scope:"col",children:"\u0423\u0447\u0438\u0442\u0435\u043b\u044c"}),Object(G.jsx)("th",{className:"th-h align-middle",scope:"col",children:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c"}),Object(G.jsx)("th",{className:"th-h align-middle",scope:"col",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0435\u0441\u0442"}),Object(G.jsx)("th",{className:"th-h align-middle",scope:"col",children:"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043c\u0435\u0441\u0442"}),Object(G.jsx)("th",{className:"th-h align-middle",scope:"col",children:"\u0412\u0440\u0435\u043c\u044f \u0437\u0430\u043d\u044f\u0442\u0438\u0439"})]})}),Object(G.jsx)("tbody",{children:we})]})}),Object(G.jsx)(fe,{getItem:V,count:f,offset:j,setOffset:p})]})}),Object(G.jsx)(xe.a,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443",visible:a,onCancel:l,width:1e3,footer:[Object(G.jsx)(Oe.a,{onClick:l,children:"\u041e\u0442\u043c\u0435\u043d\u0430"},"onCancel1"),Object(G.jsx)(Oe.a,{onClick:function(){var e=ge.group_name,t=ge.places,n=ge.tutor,a=ge.level,o=[];X.forEach((function(e){o.push(e[1])})),s(!0),ut({method:"POST",url:"".concat(N,"/CRM/Groups"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:{group_name:e,tutor:n||void 0,level:+a,places:+t,pupils:o}}).then((function(e){s(!1),E("\u0413\u0440\u0443\u043f\u043f\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0430","\u0422\u0435\u043f\u0435\u0440\u044c \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),c(!1),V(),ne(""),J([]),re(""),je(""),me("")})).catch((function(e){if(s(!1),e.response){M(e.response.status);var n=e.response.status;400==n?+t<o.length?D("\u041e\u0439...","\u041c\u0435\u0441\u0442 \u0434\u043b\u044f \u0443\u0447\u0435\u043d\u0438\u043a\u043e\u0432 \u043d\u0435 \u0445\u0432\u0430\u0442\u0430\u0435\u0442"):D("\u041e\u0439...","\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u044f \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e"):401==n?D("\u041e\u0439...","\u0413\u0434\u0435 \u0442\u043e\u043a\u0435\u043d ?"):500==n&&D("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043f\u043e\u043b\u043e\u043c\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430","\u0421\u043e\u043e\u0431\u0449\u0438\u0442\u0435 \u043e\u0431 \u043e\u0448\u0438\u0431\u043a\u0435 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0443 \u0441\u0435\u0440\u0432\u0438\u0441\u0430")}}))},loading:i,type:"primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},"onOk1")],children:Object(G.jsx)(Pe,{children:Object(G.jsxs)("div",{className:"modal-body",children:[Object(G.jsxs)("div",{className:"row mb-3",children:[Object(G.jsx)("label",{htmlFor:"inputName",className:"fs-5 col-sm-4 col-form-label",children:"\u0418\u043c\u044f \u0433\u0440\u0443\u043f\u043f\u044b"}),Object(G.jsx)("div",{className:"col-sm-8",children:Object(G.jsx)("input",{defaultValue:ge.group_name,autoComplete:"off",onChange:function(e){ge.group_name=e.target.value},required:!0,type:"name",name:"group_name",className:"form-control",id:"group_name"})})]}),Object(G.jsxs)("div",{className:"row mb-3",children:[Object(G.jsx)("label",{htmlFor:"inputMidname",className:"fs-5 col-sm-4 col-form-label",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0435\u0441\u0442"}),Object(G.jsx)("div",{className:"col-sm-8",children:Object(G.jsx)("input",{defaultValue:ge.places,autoComplete:"off",onChange:function(e){ge.places=e.target.value},required:!0,type:"number",name:"places",className:"form-control",id:"places"})})]}),Object(G.jsxs)("div",{className:"row mb-3",children:[Object(G.jsx)("label",{htmlFor:"inputSirname",className:"fs-5 col-sm-4 col-form-label",children:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0438"}),Object(G.jsx)("div",{className:"col-sm-8 input-group",children:Object(G.jsxs)("select",{defaultValue:ge.level,onChange:function(e){ge.level=e.target.value},required:!0,className:"form-control",id:"inputGroupSelect01",children:[Object(G.jsx)("option",{defaultValue:!0}),Object(G.jsx)("option",{value:"1",children:"1 \u043a\u043b\u0430\u0441\u0441"}),Object(G.jsx)("option",{value:"2",children:"2 \u043a\u043b\u0430\u0441\u0441"}),Object(G.jsx)("option",{value:"3",children:"3 \u043a\u043b\u0430\u0441\u0441"}),Object(G.jsx)("option",{value:"4",children:"4 \u043a\u043b\u0430\u0441\u0441"})]})})]}),Object(G.jsxs)("div",{className:"row mb-3",children:[Object(G.jsx)("label",{className:"fs-5 col-sm-4 col-form-label",children:"\u0423\u0447\u0438\u0442\u0435\u043b\u044c"}),Object(G.jsx)("div",{className:"col-sm-8 input-group",children:Object(G.jsxs)("select",{defaultValue:ge.tutor,onChange:function(e){ge.tutor=e.target.value},className:"form-control",children:[Object(G.jsx)("option",{defaultValue:!0}),K]})})]}),Object(G.jsxs)("div",{className:"mb-3",children:[Object(G.jsx)("label",{htmlFor:"inputSirname",className:"fs-5 col-sm-4 col-form-label",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0435\u043d\u0438\u043a\u043e\u0432"}),Object(G.jsxs)("div",{className:"row addPUPILS",children:[Object(G.jsxs)("div",{className:"col-sm-6 input-group",children:[Object(G.jsx)("input",{id:"fort",onChange:function(e){var t=RegExp(e.target.value,"gi"),n=y.filter((function(e){return t.test(e[0])}));Se(e.target.value),w(n),ve()},defaultValue:Ne,autoComplete:"off",type:"search",className:"form-control",name:"q",placeholder:"\u041d\u0430\u0439\u0442\u0438..."}),Object(G.jsx)("ul",{className:"col-12 list-group list-group-flush",children:Ce})]}),Object(G.jsx)("div",{className:"col-sm-6 boxPUPILS",children:Ie})]})]})]})})})]})},pt=T.a.div({padding:"0",marginBottom:"15px",".boxS":{overflow:"auto",maxHeight:"200px"},".dataNumber":{margin:"0 3px 0 0",fontSize:"15px",fontWeight:"600",width:"48px"}}),bt=function(e){var t=e.global_schedule;if(!t[0])return Object(G.jsx)(pt,{className:"col-12",children:Object(G.jsx)("h5",{children:"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u043d\u0435\u0442..."})});var n=t.map((function(e){var t=pe()(e.date,"DD.MM.YYYY").format("DD.MM");return Object(G.jsx)("span",{className:"badge bg-light text-dark dataNumber",children:t},e.date)}));return Object(G.jsxs)(pt,{className:"col-12",children:[Object(G.jsxs)("h5",{children:[t[0].duration[0]," \u0434\u043e ",t[0].duration[1]]}),Object(G.jsx)("div",{className:"boxS",children:n})]})},ht=n(44),mt=function(e){var t=e.updateGroup,n=e.groupID,a=Object(m.useState)(!1),c=Object(O.a)(a,2),o=c[0],r=c[1],i=Object(m.useState)(!1),s=Object(O.a)(i,2),l=s[0],d=s[1],u=function(){r(!1)},j={startDate:"",endDate:"",duration_Start:"",duration_End:"",weekDay:[]},p={one:[],two:[],three:[],four:[],five:[],six:[],zero:[]},b=[],h=function e(){var a=pe()(j.startDate).day(),c=j.endDate,o=pe()(c).format("DD.MM.YYYY"),i=pe()(j.startDate).format("DD.MM.YYYY"),s=pe()(i,"DD.MM.YYYY").day(),l=1,u=function(){j.weekDay.forEach((function(e){if(e==s){var t={date:i,duration:[j.duration_Start,j.duration_End],status:"",tutor:"",paid:!1,title:""};b.push(t)}}))};u();do{i=pe()(j.startDate).day(a+l).format("DD.MM.YYYY"),s=pe()(i,"DD.MM.YYYY").day(),u(),l++}while(i!=o);ht({method:"post",url:"".concat(N,"/CRM/Groups/").concat(n,"/Schedule"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:b}).then((function(e){for(var n in document.querySelectorAll("input").forEach((function(e){e.value=""})),d(!1),r(!1),E("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u043e",""),p)p[n]=[];t()})).catch((function(t){ee(e,t)})),console.log(b)},f=T.a.div({".form-check":{marginRight:"12px",paddingLeft:"100px"}});return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("i",{onClick:function(){r(!0)},className:"bi bi-calendar2-plus",style:{fontSize:"26px",color:"#17a2b8",cursor:"pointer"}}),Object(G.jsx)(xe.a,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435",visible:o,onCancel:u,width:1e3,footer:[Object(G.jsx)(Oe.a,{onClick:u,children:"\u041e\u0442\u043c\u0435\u043d\u0430"},"onCancel1"),Object(G.jsx)(Oe.a,{onClick:function(){for(var e in d(!0),p)p[e][0]&&j.weekDay.push(p[e][1]);h()},loading:l,type:"primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},"onOk1")],children:Object(G.jsx)(f,{children:Object(G.jsxs)("form",{className:"row g-3",children:[Object(G.jsxs)("div",{className:"col-md-6",children:[Object(G.jsx)("label",{className:"form-label",children:"\u041f\u0435\u0440\u0438\u043e\u0434:"}),Object(G.jsxs)("div",{className:"row periud",children:[Object(G.jsx)("input",{onChange:function(e){j.startDate=e.target.value},type:"date",className:"form-control col-5"}),Object(G.jsx)("div",{className:"input-group-text",children:"\u0434\u043e"}),Object(G.jsx)("input",{onChange:function(e){j.endDate=e.target.value},type:"date",className:"form-control col-5"})]})]}),Object(G.jsxs)("div",{className:"col-md-6",children:[Object(G.jsx)("label",{className:"form-label",children:"\u0412\u0440\u0435\u043c\u044f \u0437\u0430\u043d\u044f\u0442\u0438\u044f:"}),Object(G.jsxs)("div",{className:"row periud",children:[Object(G.jsx)("input",{onChange:function(e){j.duration_Start=e.target.value},type:"time",className:"form-control col-5"}),Object(G.jsx)("div",{className:"input-group-text",children:"\u0434\u043e"}),Object(G.jsx)("input",{onChange:function(e){j.duration_End=e.target.value},type:"time",className:"form-control col-5"})]})]}),Object(G.jsxs)("div",{className:"col-12",children:[Object(G.jsx)("label",{className:"form-label",children:"\u0414\u043d\u0438 \u043d\u0435\u0434\u0435\u043b\u0438:"}),Object(G.jsxs)("div",{className:"row col-12",children:[Object(G.jsxs)("div",{className:"form-check",children:[Object(G.jsx)("input",{onChange:function(e){p.one=[e.target.checked,e.target.value]},className:"form-check-input",value:"1",type:"checkbox"}),Object(G.jsx)("label",{className:"form-check-label",children:"\u041f\u043d"})]}),Object(G.jsxs)("div",{className:"form-check",children:[Object(G.jsx)("input",{onChange:function(e){p.two=[e.target.checked,e.target.value]},className:"form-check-input",value:"2",type:"checkbox"}),Object(G.jsx)("label",{className:"form-check-label",children:"\u0412\u0442"})]}),Object(G.jsxs)("div",{className:"form-check",children:[Object(G.jsx)("input",{onChange:function(e){p.three=[e.target.checked,e.target.value]},className:"form-check-input",value:"3",type:"checkbox"}),Object(G.jsx)("label",{className:"form-check-label",children:"\u0421\u0440"})]}),Object(G.jsxs)("div",{className:"form-check",children:[Object(G.jsx)("input",{onChange:function(e){p.four=[e.target.checked,e.target.value]},className:"form-check-input",value:"4",type:"checkbox"}),Object(G.jsx)("label",{className:"form-check-label",children:"\u0427\u0442"})]}),Object(G.jsxs)("div",{className:"form-check",children:[Object(G.jsx)("input",{onChange:function(e){p.five=[e.target.checked,e.target.value]},className:"form-check-input",value:"5",type:"checkbox"}),Object(G.jsx)("label",{className:"form-check-label",children:"\u041f\u0442"})]}),Object(G.jsxs)("div",{className:"form-check",children:[Object(G.jsx)("input",{onChange:function(e){p.six=[e.target.checked,e.target.value]},className:"form-check-input",value:"6",type:"checkbox"}),Object(G.jsx)("label",{className:"form-check-label",children:"\u0421\u0431"})]}),Object(G.jsxs)("div",{className:"form-check",children:[Object(G.jsx)("input",{onChange:function(e){p.zero=[e.target.checked,e.target.value]},className:"form-check-input",value:"0",type:"checkbox"}),Object(G.jsx)("label",{className:"form-check-label",children:"\u0412\u0441"})]})]})]})]})})})]})},ft=n(44),xt=function(e){var t=e.PupilsGroup,n=e.http,a=e.title,c=e.pageId,o=e.update,r=e.schedule,i=Object(m.useState)(!1),s=Object(O.a)(i,2),l=s[0],d=s[1],u=function(){d(!1)},j=Object(m.useState)([]),p=Object(O.a)(j,2),b=p[0],h=p[1],f=function e(){ft({method:"post",url:"".concat(N).concat(n,"/find?limit=150&offset=0"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){var n=e.data;h(Object(se.a)(n));var a=[],c=0;n.forEach((function(e,n){e._id!==t[c]._id&&a.push(e),t.length-1>c&&c++}))})).catch((function(t){ee(e,t)}))},x=function e(t){var n=[];r.forEach((function(e){var t=pe()(e.date,"DD.MM.YYYY").format("YYYY-MM-DD");pe()().diff(t,"day")<=0&&n.push(e)})),ft({method:"put",url:"".concat(N,"/CRM/Groups/").concat(c,"/Pupils/").concat(t,"/Schedule"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:n}).then((function(e){o(),z()})).catch((function(t){ee(e,t)}))},g=function e(t,n){ft({method:"post",url:"".concat(N,"/CRM/Groups/").concat(c,"/Pupils"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:{ids:t}}).then((function(){x(n)})).catch((function(t){ee(e,t)}))};Object(m.useEffect)((function(){f()}),[]);var v=b.map((function(e,t){var n=T.a.li({span:{cursor:"pointer"}});return Object(G.jsx)(n,{onClick:function(){B("\u0423\u0447\u0435\u043d\u0438\u043a \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f","\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435"),g([e._id],e._id)},className:"list-group-item",children:Object(G.jsxs)("span",{className:"badge bg-warning text-dark",children:[e.surname," ",e.name]})},e._id)})),y=T.a.span({cursor:"pointer"});return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(y,{className:"btn ",onClick:function(){d(!0)},children:Object(G.jsx)("i",{className:"bi bi-person-plus-fill",style:{color:"#ffc107",fontSize:"24px"}})}),Object(G.jsx)(xe.a,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c ".concat(a),visible:l,onCancel:u,width:600,footer:[Object(G.jsx)(Oe.a,{onClick:u,children:"\u041e\u0442\u043c\u0435\u043d\u0430"},"onCancel1")],children:Object(G.jsx)("div",{className:"row addPUPILS",children:Object(G.jsxs)("div",{className:"col-12 input-group",children:[Object(G.jsx)("input",{id:"fort",onChange:function(){},autoComplete:"off",type:"search",className:"form-control",name:"q",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435..."}),Object(G.jsx)("ul",{className:"col-12 list-group list-group-flush",children:v})]})})})]})},Ot=function(e){var t=e.Data_ALL,a=e.updetePage,c={},o=n(44),r=Object(m.useState)(""),i=Object(O.a)(r,2),s=i[0],l=i[1],d=t.group_name,u=t.tutor,j=t.level,p=t.places,b=t.pupils,h=t._id,f=b||"",x="\u0423\u0447\u0438\u0442\u0435\u043b\u044c \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d...";if(u){var g=u.surname,v=u.name,y=u.midname;x="".concat(g," ").concat(v," ").concat(y)}var k=Object(m.useState)([{name:"\u0423\u0447\u0438\u0442\u0435\u043b\u0435\u0439 \u043d\u0435 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d\u043d\u043e...",surname:"",midname:"",_id:"546456"}]),S=Object(O.a)(k,2),C=S[0],I=S[1],w=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;o({method:"get",url:"".concat(N,"/AdminPanel/CRMAccounts?limit=20&offset=").concat(t,"&accountType=teacher"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){var t=e.data;console.log(t),I(t)})).catch((function(t){t.response&&(M(t.response.status),401==t.response.status&&("TOKEN_EXPIRED"==t.response.data.message?(Z(t.response.data.token),e()):(localStorage.removeItem("tokenID"),window.location.replace("/"))))}))},_=function(){o({method:"get",url:"".concat(N,"/CRM/Groups/").concat(h),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){a(e.data),console.log(c),z(),R.fire({icon:"success",title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b"})})).catch((function(e){e.response&&M(e.response.status)}))},D=C.map((function(e,t){var n=e.name,a=e.surname,c=e.midname;return Object(G.jsxs)("option",{value:e._id,children:[a," ",n," ",c]},e._id)}));Object(m.useEffect)((function(){w()}),[]);var P=function(){B("\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f","\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435"),o({method:"patch",url:"".concat(N,"/CRM/Groups/").concat(h),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:c}).then((function(){_()})).catch((function(e){e.response&&M(e.response.status)}))},E=(T.a.ul({width:"318px",padding:"10px",background:"rgba(0, 0, 0, 0.5)",".save":{marginTop:"16px",cursor:"pointer"},li:{border:"none"}}),T.a.span({fontSize:"13px"})),F=Object(G.jsxs)(H.a,{children:[Object(G.jsx)(H.a.Item,{children:Object(G.jsx)("input",{placeholder:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",onChange:function(e){c={group_name:"".concat(e.target.value)}},type:"name",className:"text-dark form-control col-12"})}),Object(G.jsx)(H.a.Item,{children:Object(G.jsx)(E,{onClick:function(){P(),l("")},className:"badge bg-warning text-dark save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),L=Object(G.jsx)(H.a,{children:Object(G.jsx)(H.a.Item,{children:Object(G.jsx)("div",{className:"input-group",children:Object(G.jsxs)("select",{onChange:function(e){var t;t=e.target.value,B("\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f","\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435"),o({method:"post",url:"".concat(N,"/CRM/Groups/").concat(h,"/Teacher?tutor_id=").concat(t),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(){_()})).catch((function(e){e.response&&M(e.response.status)}))},className:"form-control",children:[Object(G.jsx)("option",{}),D]})})})}),A=Object(G.jsxs)(H.a,{children:[Object(G.jsx)(H.a.Item,{children:Object(G.jsx)("div",{className:"input-group",children:Object(G.jsxs)("select",{onChange:function(e){c={level:+e.target.value}},className:"form-control",children:[Object(G.jsx)("option",{}),Object(G.jsx)("option",{value:"1",children:"1 \u043a\u043b\u0430\u0441\u0441"}),Object(G.jsx)("option",{value:"2",children:"2 \u043a\u043b\u0430\u0441\u0441"}),Object(G.jsx)("option",{value:"3",children:"3 \u043a\u043b\u0430\u0441\u0441"}),Object(G.jsx)("option",{value:"4",children:"4 \u043a\u043b\u0430\u0441\u0441"})]})})}),Object(G.jsx)(H.a.Item,{children:Object(G.jsx)(E,{onClick:function(){P(),l("")},className:"badge bg-warning text-dark save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),Y=Object(G.jsxs)(H.a,{children:[Object(G.jsx)(H.a.Item,{children:Object(G.jsx)("input",{placeholder:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043a\u043e\u043b\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0435\u0441\u0442",onChange:function(e){c={places:+e.target.value}},type:"number",className:"text-dark form-control col-12"})}),Object(G.jsx)(H.a.Item,{children:Object(G.jsx)(E,{onClick:function(){P(),l("")},className:"badge bg-warning text-dark save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),U=function(e,t){return Object(G.jsx)(He.a,{overlay:e,visible:function(){return s===t},trigger:["click"],children:Object(G.jsx)("i",{className:"bi bi-pencil",onClick:function(){l(s===t?"":t)},style:{fontSize:"20px",color:"#17a2b8",cursor:"pointer"}})})};return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsxs)("li",{className:"list-group-item",children:["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435: ",Object(G.jsx)("span",{className:"badge bg-info text-light",children:d}),Object(G.jsx)("div",{className:"btn-group",children:U(F,"group_name")})]}),Object(G.jsxs)("li",{className:"list-group-item",children:["\u0423\u0447\u0438\u0442\u0435\u043b\u044c: ",Object(G.jsx)("span",{className:"badge bg-warning text-dark",children:x}),Object(G.jsx)("div",{className:"btn-group",children:U(L,"tutor")})]}),Object(G.jsxs)("li",{className:"list-group-item",children:["\u041a\u043b\u0430\u0441\u0441: ",Object(G.jsx)("span",{className:"badge bg-success",children:j}),Object(G.jsx)("div",{className:"btn-group",children:U(A,"level")})]}),Object(G.jsxs)("li",{className:"list-group-item",children:["M\u0435\u0441\u0442 \u0432 \u0433\u0440\u0443\u043f\u043f\u0435: ",Object(G.jsx)("span",{className:"badge bg-info text-dark",children:p}),Object(G.jsx)("div",{className:"btn-group",children:U(Y,"places")})]}),Object(G.jsxs)("li",{className:"list-group-item",children:["\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043c\u0435\u0441\u0442: ",Object(G.jsx)("span",{className:"badge bg-light text-dark",children:p-f.length})]})]})},gt=(n(564),function(){var e,t=Object(U.f)().id,a=Object(m.useState)({pupils:[{_id:"564564",localSchedule:{}}],group_name:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",tutor:"",level:"",places:"",global_schedule:[{duration:["--:--","--:--"]}],_id:"6456"}),c=Object(O.a)(a,2),o=c[0],r=c[1],i=o.group_name,s=o.pupils,l=o.global_schedule,d=o._id,u=[];s&&s.forEach((function(e){e.paymentHistory&&e.paymentHistory.forEach((function(e){e.group_id==d&&u.push(e)}))}));var j=n(44),p=function e(){j({method:"get",url:"".concat(N,"/CRM/Groups/").concat(t),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){r(e.data)})).catch((function(t){ee(e,t)}))};Object(m.useEffect)((function(){p()}),[]);var b=[767].map((function(e){return"@media (max-width: ".concat(e,"px)")})),h=T.a.div({marginTop:"0px",margin:"0 auto",".pad":Object(le.a)({padding:"0px",paddingRight:"10px"},b[0],{paddingRight:"0px"}),".infoLog":(e={marginBottom:"10px",padding:"0"},Object(le.a)(e,b[0],{paddingBottom:"10px"}),Object(le.a)(e,".calendar",{margin:"9px 0",marginRight:"10px",fontSize:"15px"}),e),".group-name":Object(le.a)({padding:"0",borderBottom:"1px solid #0dcaf0"},b[0],{borderRight:"none"}),".time":{margin:"0",padding:"0",h5:{fontSize:"1.25rem"}},".ulBox":{borderRadius:"15px",padding:"0px"},".editing":{background:"#fff",borderRadius:"10px 10px 0 0",i:{marginLeft:"95%",cursor:"pointer"}},li:{backgroundColor:"none",span:{fontSize:"16px",margin:"0 5px 5px 0"}}}),f=T.a.div({background:"#fff",margin:"10px 0",padding:"10px",borderRadius:"15px","& > h3":{fontSize:"22px"}}),x="";s&&(x=s.map((function(e){return Object(G.jsx)("span",{className:"badge bg-info text-dark",children:"".concat(e.name," ").concat(e.surname)},e._id)})));var g="";s&&(g=s.map((function(e){return Object(G.jsx)(Qe,{itemG:e,dataGroup:t,getGroup_Id:p,setData:r,surname:e.surname,name:e.name,type:"group"},e._id)})));var v=Object(G.jsx)(xt,{PupilsGroup:s,schedule:l,update:p,pageId:t,http:"/CRM/Pupils",title:"\u0443\u0447\u0435\u043d\u0438\u043a\u0430"});return Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)(h,{className:"container row col-12",children:[Object(G.jsx)("div",{className:"col-12 col-md-6 pad",children:Object(G.jsxs)("div",{className:"infoLog align-self-start col-md-12 col-12",children:[Object(G.jsx)("div",{className:"group-name col-12 col-lg-12",children:Object(G.jsx)("h3",{children:i})}),Object(G.jsxs)("div",{className:"time col-md-12 row",children:[Object(G.jsx)("h6",{className:"calendar badge bg-info text-dark",children:"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435: "}),Object(G.jsx)(mt,{updateGroup:p,groupID:t}),Object(G.jsx)(bt,{global_schedule:l||[]})]})]})}),Object(G.jsx)("div",{className:"col-md-6 ulBox",children:Object(G.jsxs)("ul",{className:"list-group list-group-flush",children:[Object(G.jsx)(Ot,{Data_ALL:o,updetePage:r}),Object(G.jsxs)("li",{className:"list-group-item",children:["\u0423\u0447\u0435\u043d\u0438\u043a\u0438: ",x," ",v]})]})}),Object(G.jsxs)(f,{className:"container col-12",children:[Object(G.jsx)("h3",{className:"badge bg-warning",children:"\u0423\u0447\u0435\u043d\u0438\u043a\u0438:"}),g]})]})})}),vt=n(148),yt=T.a.div(Xe||(Xe=Object(k.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: ",";\n  .lds-ring {\n    display: inline-block;\n    position: relative;\n    width: 80px;\n    height: 80px;\n  }\n  .lds-ring div {\n    box-sizing: border-box;\n    display: block;\n    position: absolute;\n    width: 64px;\n    height: 64px;\n    margin: 8px;\n    border: 8px solid #001529;\n    border-radius: 50%;\n    animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n    border-color: #001529 transparent transparent transparent;\n  }\n  .lds-ring div:nth-of-type(1) {\n    animation-delay: -0.45s;\n  }\n  .lds-ring div:nth-of-type(2) {\n    animation-delay: -0.3s;\n  }\n  .lds-ring div:nth-of-type(3) {\n    animation-delay: -0.15s;\n  }\n  @keyframes lds-ring {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n\n"])),(function(e){return e.precentage?"100%":"100vh"})),kt=function(e){var t=e.precentage;return Object(G.jsx)(yt,{precentage:t,children:Object(G.jsxs)("div",{className:"lds-ring",children:[Object(G.jsx)("div",{}),Object(G.jsx)("div",{}),Object(G.jsx)("div",{}),Object(G.jsx)("div",{})]})})},Nt=n(65),St=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:24,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return e+n.length>a?Object(G.jsx)(Nt.a,{placement:"leftTop",title:"".concat(o).concat(""!==o?" ":"").concat(t),children:Object(G.jsxs)(Re,{width:c,children:[n," ",t]})}):Object(G.jsxs)(Re,{children:[n," ",t]})},Ct=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:24,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return e+n.length>a?Object(G.jsx)(Nt.a,{placement:"leftTop",title:"".concat(o).concat(""!==o?" ":"").concat(t.midname," ").concat(t.name," ").concat(t.surname),children:Object(G.jsxs)(Re,{width:c,children:[t.midname," ",t.name," ",t.surname]})}):Object(G.jsxs)(Re,{children:[t.midname," ",t.name," ",t.surname]})},It=function(e){var t=e.student,n=new RegExp(/[\u041c\u0443\u0436|\u0416\u0435\u043d]/g),a=t.name,c=t.midname,o=t.surname,r=t.gender,i=t.dateOfBirth,s=t.phone,l=t.parentPhone,d=t.discord,u=t.parentFullname,j=t.minPaidSubscruption,p="\u0423\u0447\u0435\u043d\u0438\u043a: ".concat(c," ").concat(a," ").concat(o),b=Object(m.useState)(!1),h=Object(O.a)(b,2),f=h[0],x=h[1];return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(Oe.a,{type:"primary",size:"small",onClick:function(){x(!0)},children:"\u041f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e"}),Object(G.jsxs)(xe.a,{width:650,title:p,visible:f,onCancel:function(){x(!1)},onOk:function(){x(!1)},children:[Object(G.jsxs)("p",{children:[Object(G.jsx)(Ce,{children:"\u0424\u0418\u041e:"})," ",a," ",c," ",o]}),Object(G.jsxs)("p",{children:[Object(G.jsx)(Ce,{children:"\u0424\u0418\u041e \u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044f:"})," ",u]}),Object(G.jsxs)("p",{children:[Object(G.jsx)(Ce,{children:"\u041f\u043e\u043b:"})," ",r.match(n).join("")]}),Object(G.jsxs)("p",{children:[Object(G.jsx)(Ce,{children:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442:"})," ",be(i)]}),Object(G.jsxs)("p",{children:[Object(G.jsx)(Ce,{children:"\u041d\u043e\u043c\u0435\u0440 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f:"})," ",l]}),Object(G.jsxs)("p",{children:[Object(G.jsx)(Ce,{children:"\u041d\u043e\u043c\u0435\u0440 \u0440\u0435\u0431\u0451\u043d\u043a\u0430:"})," ",s||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e"]}),Object(G.jsxs)("p",{children:[Object(G.jsx)(Ce,{children:"\u041d\u0438\u043a \u0432 \u0434\u0438\u0441\u043a\u043e\u0440\u0434\u0435:"})," ",d||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e"]}),Object(G.jsxs)("p",{children:[Object(G.jsx)(Ce,{children:"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u043e\u043f\u043b\u0430\u0447\u0435\u043d\u043d\u044b\u0439 \u0430\u0431\u043e\u043d\u0435\u043c\u0435\u043d\u0442:"})," ",j||0,"\u20bd"]})]})]})},wt=function(e){var t=e.Url,n=e.card,a=e.pupils,c=e.pageSize,o=a.pupilsList,r=a.setPupilsList,i=Object(m.useState)(!1),s=Object(O.a)(i,2),l=s[0],d=s[1],u=Object(m.useState)(1),j=Object(O.a)(u,2),p=j[0],b=j[1],h=Object(m.useState)(n.pupilsCount),f=Object(O.a)(h,2),x=f[0],g=f[1],k=Object(m.useCallback)(Object(y.a)(v.a.mark((function e(){var a,o,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d((function(e){return!0})),e.next=3,Te(t,{pageSize:c,currentPage:p},n._id);case 3:a=e.sent,o=a.students,i=a.count,r((function(e){return N(e,o,n._id)})),g((function(e){return i})),d((function(e){return!1}));case 9:case"end":return e.stop()}}),e)}))),[t,p,n._id,c,r]);Object(m.useEffect)((function(){k()}),[t,p,n._id,c,r,k]);var N=function(e,t,n){var a=e.filter((function(e){return e.salesFunnelStep!==n})),c=e.filter((function(e){return e.salesFunnelStep===n}));return c=t,[].concat(Object(se.a)(a),Object(se.a)(c))};return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(he.a,{simple:!0,current:p,total:10*Math.ceil(x/c)||10,onChange:function(e){b((function(t){return e}))}}),l?Object(G.jsx)(kt,{precentage:!0}):o.filter((function(e){return e.salesFunnelStep===n._id})).map((function(e,t){if(n._id===e.salesFunnelStep)return Object(G.jsx)(vt.b,{draggableId:"".concat(e._id),index:t,children:function(t){return Object(G.jsxs)(Be,Object(ie.a)(Object(ie.a)(Object(ie.a)({background:n.background,color:n.color},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,children:[Object(G.jsxs)("div",{className:"funnelStepStudent__first--info",children:[Object(G.jsx)("div",{children:Ct("".concat(e.midname," ").concat(e.name," ").concat(e.surname).length,e,"",25,"230px","\u0424\u0418\u041e:")}),Object(G.jsxs)("div",{children:["\u0422\u0435\u043b.\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044f: ",e.parentPhone]}),Object(G.jsxs)("div",{children:["\u041c\u0438\u043d.\u0410\u0431\u043e\u043d\u0435\u043c\u0435\u043d\u0442: ",e.minPaidSubscruption||0,"\u20bd"]})]}),Object(G.jsx)(It,{student:e})]}))}},e._id)}))]})},_t=function(){var e=N,t=Object(m.useState)(!0),n=Object(O.a)(t,2),a=n[0],c=n[1],o=Object(m.useState)([]),r=Object(O.a)(o,2),i=r[0],s=r[1],l=Object(m.useState)([]),d=Object(O.a)(l,2),u=d[0],j=d[1],p=Object(m.useCallback)(Object(y.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Fe(e,8);case 2:n=t.sent,s((function(e){return n})),j((function(e){return n.map((function(e){return e.pupils})).flat(2)})),c((function(e){return!1}));case 6:case"end":return t.stop()}}),t)}))),[e]);Object(m.useEffect)((function(){p()}),[e,p]);var b=function(){var t=Object(y.a)(v.a.mark((function t(n){var a,o,r,i,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.destination){t.next=2;break}return t.abrupt("return",j((function(e){return e})));case 2:if(a=u.filter((function(e){return e.salesFunnelStep===n.source.droppableId})),o=u.filter((function(e){return e.salesFunnelStep===n.destination.droppableId})),r=a.splice(n.source.index,1),i=Object(O.a)(r,1),s=i[0],n.source.droppableId!==n.destination.droppableId){t.next=8;break}return a.splice(n.destination.index,0,s),t.abrupt("return",j((function(e){return Array.from(new Set([].concat(Object(se.a)(e),Object(se.a)(a),Object(se.a)(o))))})));case 8:return s.salesFunnelStep=n.destination.droppableId,t.next=11,Ge(e,s._id,s);case 11:return o.splice(n.destination.index,0,s),(o.length>8||0===a.length)&&(c((function(e){return!0})),c((function(e){return!1}))),t.abrupt("return",j((function(e){return Array.from(new Set([].concat(Object(se.a)(e),Object(se.a)(a),Object(se.a)(o))))})));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(G.jsx)(Ie,{children:a?Object(G.jsx)(kt,{}):Object(G.jsx)(we,{jstctn:i.length<6,children:Object(G.jsx)(vt.a,{onDragEnd:b,children:i.map((function(t){return Object(G.jsxs)(De,{className:"card",children:[Object(G.jsxs)(Pe,{background:t.background,color:t.color,children:[St(t.name.length,t.name,"",30,"220px"),1===t.order?Object(G.jsx)(Le,{loader:{loaded:a,setLoaded:c},status:1,funnel:i,pageSize:8,Url:e,pupils:{pupilsList:u,setPupilsList:j}}):""]}),Object(G.jsxs)(Ee,{background:t.background,color:t.color,children:[t.minPaidSubscriptionsAmount||0,"\u0440\u0443\u0431."]}),Object(G.jsx)(vt.c,{droppableId:"".concat(t._id),children:function(n){return Object(G.jsxs)("div",Object(ie.a)(Object(ie.a)({className:"droppable-container"},n.droppableProps),{},{ref:n.innerRef,children:[Object(G.jsx)(wt,{card:t,pupils:{pupilsList:u,setPupilsList:j},pageSize:8,Url:e}),n.placeholder]}))}})]},t._id)}))})})})},Dt=n(574),Pt=T.a.div({".ButtonUpload":{padding:0,background:"rgba(0, 0, 0, 0)",border:"none",color:"#a6adb4","&:hover":{color:"#fff"}},".ant-upload-list":{display:"none"}}),Et=function(){var e={name:"file",action:"".concat(N,"/CRM/Pupils/uploadFile"),accept:".csv,.xlsx",headers:{Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},onChange:function(e){"done"===e.file.status?R.fire({icon:"success",title:"\u0424\u0430\u0438\u043b ".concat(e.file.name,", \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d")}):"error"===e.file.status&&(403===e.file.response.statusCode?M(403):R.fire({icon:"error",title:"\u0412 ".concat(e.file.name,", \u043e\u0448\u0438\u0431\u043a\u0438 \u043d\u0430 \u0441\u0442\u0440\u043e\u043a\u0430\u0445: ").concat(e.file.response.message.join(", "))}))}};return Object(G.jsx)(Pt,{children:Object(G.jsx)(Dt.a,Object(ie.a)(Object(ie.a)({},e),{},{children:Object(G.jsx)(Oe.a,{className:"ButtonUpload",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0444\u0430\u0439\u043b\u044b c \u0443\u0447\u0435\u043d\u0438\u043a\u0430\u043c\u0438"})}))})},Rt=n(583),Bt=n(149),zt=n(200),Mt=T.a.div({".log_h2":{},td:{paddingTop:"1px",paddingBottom:"4px"},"th, td":{padding:"16px 11px",whiteSpace:"nowrap"}}),Tt=function(e){var t=e.dataSource,n=void 0===t?[]:t,a=e.columns,c=void 0===a?[]:a,o=e.setParamFilrers,r=e.paramFilrers,i=e.update,s=void 0===i?function(){}:i;return Object(G.jsx)(Mt,{children:Object(G.jsx)(ue.a,{pagination:!1,dataSource:n,columns:c,scroll:{x:0},onChange:function(e,t){var n=Object(ie.a)({},r);for(var a in t)t[a]?n[a]=t[a]:"GROUP_NAME"!=a&&(n[a]=[]);s(0,n),o(n)}})})},Gt=n(585),Ft=function(e,t,n,a){return{title:function(){return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(Gt.a,{onClick:function(){e[1]?t(["",""]):t([Object(G.jsx)("span",{style:{paddingLeft:"7px"},children:n}),a])}}),e[0]]})},dataIndex:"".concat(e[1]),key:"".concat(e[1])}},Lt=function(){var e=Object(m.useState)(0),t=Object(O.a)(e,2),a=t[0],c=t[1],o=Object(m.useState)(1),r=Object(O.a)(o,2),i=r[0],s=r[1],l=Object(m.useState)([]),d=Object(O.a)(l,2),u=d[0],j=d[1],p=Object(m.useState)(!1),b=Object(O.a)(p,2),h=b[0],f=b[1],x=Object(m.useState)({group_name:!1}),g=Object(O.a)(x,2),v=g[0],y=g[1],k=Object(m.useState)([Object(G.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0413\u0440\u0443\u043f\u043f\u0430"}),"group_name"]),S=Object(O.a)(k,2),C=S[0],I=S[1],w=Object(m.useState)([Object(G.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0433\u0440\u0443\u043f\u043f\u044b"}),"level"]),_=Object(O.a)(w,2),D=_[0],P=_[1],E=Object(m.useState)([Object(G.jsx)("span",{style:{paddingLeft:"7px"},children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0435\u0441\u0442"}),"places"]),R=Object(O.a)(E,2),B=R[0],z=R[1],M=Object(m.useState)([Object(G.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043c\u0435\u0441\u0442"}),"occupied"]),F=Object(O.a)(M,2),L=F[0],A=F[1],U=Object(m.useState)([Object(G.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0427\u0438\u0441\u043b\u043e \u0443\u0447\u0435\u043d\u0438\u043a\u043e\u0432"}),"NUMBER_PUPILS"]),V=Object(O.a)(U,2),K=V[0],W=V[1],$=Object(m.useState)([Object(G.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0423\u0447\u0438\u0442\u0435\u043b\u044c"}),"tutor"]),X=Object(O.a)($,2),J=X[0],Q=X[1],Z=n(44),te=Object(m.useState)([]),ae=Object(O.a)(te,2),ce=ae[0],oe=ae[1],re=function e(){Z({method:"get",url:"".concat(N,"/AdminPanel/CRMAccounts?limit=100&offset=0&accountType=teacher"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){var t=e.data;oe(t)})).catch((function(t){ee(e,t)}))},le=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(!0);var a={};for(var c in n)"occupied"!=c&void 0!=n[c][0]?(console.log(n[c],1),a["".concat(c,"s")]=n[c]):n[c].length&&(console.log(n[c],2),a[c]=n[c][0]);Z({method:"post",url:"".concat(N,"/CRM/Groups/find?limit=").concat(me,"&offset=").concat(t),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:{filters:a}}).then((function(e){var t=e.data,n=e.headers;j(t),y({group_name:!1}),f(!1),s(n.count)})).catch((function(t){ee(e,t,(function(){f(!1)}))}))};Object(m.useEffect)((function(){re(),le()}),[]);var de=Object(m.useState)({group_name:[],level:[],tutor:[],occupied:[]}),ue=Object(O.a)(de,2),je=ue[0],pe=ue[1],be={group_name:{}},he=function(e){je[e].forEach((function(t){be[e][t]=!0}))};for(var xe in be)he(xe);var ge,ve=Object(m.useState)({group_name:[]}),ye=Object(O.a)(ve,2),ke=ye[0],Ne=ye[1],Se=function(e,t,n){if(e[0]){var a=Object(ie.a)({},ke);a[n].push({text:e[0],value:e[0]}),Ne(a),e[0]=""}},Ce=u.map((function(e){var t=e.group_name,n=e.level,a=e.places,c=e.pupils,o=e.tutor,r=e._id;return{key:r,group_name:[t,r],level:n,places:a,NUMBER_PUPILS:c?c.length:"",tutor:o?"".concat(o.surname," ").concat(o.name," ").concat(o.midname):"-",occupied:c?a-c.length:""}})),Ie=T.a.div({marginTop:"10px",svg:{marginBottom:"3px"}}),we=ce.map((function(e){return{text:"".concat(e.surname," ").concat(e.name),value:e._id}})),_e=[Object(ie.a)(Object(ie.a)({},Ft(C,I,"\u0413\u0440\u0443\u043f\u043f\u0430","group_name")),{},{render:function(e){if(e)return Object(G.jsx)(Y.b,{to:"/group/".concat(e[1]),children:e[0]})}},(ge="group_name",{filterDropdown:function(e){var t=e.setSelectedKeys,n=e.selectedKeys;return e.confirm,e.clearFilters,Object(G.jsxs)("div",{style:{padding:8},children:[Object(G.jsx)(ne.a,{placeholder:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440 ".concat(ge),value:n[0],onChange:function(e){return t(e.target.value?[e.target.value]:[])},onPressEnter:function(){return Se(n,0,ge)},style:{marginBottom:8,display:"block"}}),Object(G.jsxs)(Rt.b,{children:[Object(G.jsx)(Oe.a,{type:"primary",onClick:function(){Se(n,0,ge)},size:"small",style:{width:140},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0444\u0438\u043b\u044c\u0442\u0440"}),Object(G.jsx)(Oe.a,{type:"link",size:"small",onClick:function(){var e=Object(ie.a)({},ke);e[ge]=[],Ne(e);var t=Object(ie.a)({},je);t[ge]=[],pe(t),le(0,t)},children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440"})]}),Object(G.jsx)(H.a,{children:ke[ge].map((function(e,t){var n=!1;return je[ge].forEach((function(t){t==e.text&&(n=!0)})),Object(G.jsx)(H.a.Item,{children:Object(G.jsx)(Bt.a,{defaultChecked:n,onChange:function(t){t.target.checked?be[ge][e.text]=!0:be[ge][e.text]=!1},children:e.text})},"".concat(e.text).concat(t))}))}),Object(G.jsx)(Ie,{children:Object(G.jsx)(Oe.a,{loading:h,type:"primary",size:"small",icon:Object(G.jsx)(q.a,{}),onClick:function(){var e=[];for(var t in be[ge])be[ge][t]&&e.push(t);var n=Object(ie.a)({},je);n[ge]=e,pe(n),Ne(ke),le(0,n)},children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440"})})]})},filterIcon:function(){var e=void 0;return je[ge][0]&&(e="#1890ff"),v[ge]?Object(G.jsx)(zt.a,{}):Object(G.jsx)(G.Fragment,{children:Object(G.jsx)(q.a,{style:{color:e}})})},onFilterDropdownVisibleChange:function(e){var t=Object(ie.a)({},v);t[ge]=e,y(t),e||(pe(je),Ne(ke))},filterDropdownVisible:v[ge]})),Object(ie.a)(Object(ie.a)({},Ft(D,P,"\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0433\u0440\u0443\u043f\u043f\u044b","level")),{},{filters:[{text:"1",value:1},{text:"2",value:2},{text:"3",value:3},{text:"4",value:4}],defaultFilteredValue:je.level.map((function(e){return e+""}))}),Object(ie.a)({},Ft(B,z,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0435\u0441\u0442","places")),Object(ie.a)(Object(ie.a)({},Ft(L,A,"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043c\u0435\u0441\u0442","occupied")),{},{filters:[{text:"\u0417\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u043e",value:!0},{text:"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u043e",value:!1}],defaultFilteredValue:je.occupied.map((function(e){return"".concat(e)}))}),Object(ie.a)({},Ft(K,W,"\u0427\u0438\u0441\u043b\u043e \u0443\u0447\u0435\u043d\u0438\u043a\u043e\u0432","NUMBER_PUPILS")),Object(ie.a)(Object(ie.a)({},Ft(J,Q,"\u0423\u0447\u0438\u0442\u0435\u043b\u044c","tutor")),{},{filters:we,defaultFilteredValue:Object(se.a)(je.tutor)})],De=T.a.div({padding:"0 30px"});return Object(G.jsxs)(De,{children:[Object(G.jsx)(Tt,{dataSource:Ce,columns:_e,setParamFilrers:pe,paramFilrers:je,update:le}),Object(G.jsx)(fe,{getItem:le,count:i,offset:a,setOffset:c})]})},At=T.a.div({"th, td":{padding:"16px 11px"}}),Yt=function(e){var t=e.paramFilrers,n=e.setParamFilrers,a=e.dataGroupsChecked,c=e.dataSource,o=e.update,r=e.columns,i=e.scrollLeft;Object(m.useEffect)((function(){document.querySelector(".ant-table-content").scrollLeft=i})),console.log(c);var s=c.map((function(e){var t=e._id,n=e.surname,a=e.name,c=e.midname,o=e.dateOfBirth,r=e.gender,i=e.phone,s=e.balance,l=e.parentPhone,d=e.parentFullname,u=e.discord,j=e.groups,p=e.tutor;return{key:t,surname:function(){return Object(G.jsx)(Y.b,{className:"link-info",to:"/student/".concat(t),children:n})},name:a,midname:c,dateOfBirth:be(o),gender:r,phoneNumber:i,tutor:p,parentFullname:d,parentPhoneNumber:l,balance:"".concat(s),discordNickname:u,groups:j}}));return Object(G.jsx)(At,{children:Object(G.jsx)(ue.a,{pagination:!1,dataSource:s,columns:r,scroll:{x:0},onChange:function(e,c){var r=Object(ie.a)({},t);c.gender?r.gender=c.gender:r.gender=[],c.balance?r.balance=c.balance:r.balance=[],n(r),o(r,a)}})})},Ut=n(337),Vt=n(44),Ht=[1020,700].map((function(e){return"@media (max-width: ".concat(e,"px)")})),qt=T.a.div((Je={padding:"0 30px"},Object(le.a)(Je,Ht[1],{padding:"0 0"}),Object(le.a)(Je,".log_h2",{}),Object(le.a)(Je,"td",{paddingTop:"1px",paddingBottom:"4px"}),Object(le.a)(Je,"th, td",{whiteSpace:"nowrap"}),Je)),Kt=function(){var e=Object(m.useState)(""),t=Object(O.a)(e,2),n=t[0],a=t[1],c=Object(m.useState)(0),o=Object(O.a)(c,2),r=o[0],i=o[1],s=Object(m.useState)(0),l=Object(O.a)(s,2),d=l[0],u=l[1],j=Object(m.useState)([]),p=Object(O.a)(j,2),b=p[0],h=p[1],f=Object(m.useState)(0),x=Object(O.a)(f,2),g=x[0],v=x[1],y=Object(m.useState)({surname:[],name:[],midname:[],age:[],gender:[],groups:[],balance:[]}),k=Object(O.a)(y,2),S=k[0],C=k[1],I=Object(m.useState)(!1),w=Object(O.a)(I,2),_=w[0],D=w[1],P=!1,E=Object(m.useState)({surname:[],name:[],midname:[],age:[],balance:[]}),R=Object(O.a)(E,2),B=R[0],z=R[1],M=Object(m.useState)(!1),F=Object(O.a)(M,2),L=F[0],A=F[1],Y=Object(m.useState)({surname:!1,name:!1,midname:!1,age:!1,groups:!1}),U=Object(O.a)(Y,2),V=U[0],K=U[1],W=Object(m.useState)([Object(G.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"}),"surname"]),$=Object(O.a)(W,2),X=$[0],J=$[1],Q=Object(m.useState)([Object(G.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0418\u043c\u044f"}),"name"]),Z=Object(O.a)(Q,2),te=Z[0],ae=Z[1],ce=Object(m.useState)([Object(G.jsx)("span",{style:{paddingLeft:"7px"},children:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"}),"midname"]),oe=Object(O.a)(ce,2),re=oe[0],le=oe[1],ue=Object(m.useState)([Object(G.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442"}),"dateOfBirth"]),je=Object(O.a)(ue,2),pe=je[0],be=je[1],he=Object(m.useState)([Object(G.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0424\u0418\u041e \u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044f"}),"parentFullname"]),xe=Object(O.a)(he,2),ge=xe[0],ve=xe[1],ye=Object(m.useState)([Object(G.jsx)("span",{style:{paddingLeft:"7px"},children:"\u041f\u043e\u043b"}),"gender"]),ke=Object(O.a)(ye,2),Ne=ke[0],Se=ke[1],Ce=Object(m.useState)([Object(G.jsx)("span",{style:{paddingLeft:"7px"},children:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"}),"phoneNumber"]),Ie=Object(O.a)(Ce,2),we=Ie[0],_e=Ie[1],De=Object(m.useState)([Object(G.jsx)("span",{style:{paddingLeft:"7px"},children:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f"}),"parentPhoneNumber"]),Pe=Object(O.a)(De,2),Ee=Pe[0],Re=Pe[1],Be=Object(m.useState)([Object(G.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0411\u0430\u043b\u0430\u043d\u0441"}),"balance"]),ze=Object(O.a)(Be,2),Me=ze[0],Te=ze[1],Ge=Object(m.useState)([Object(G.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0414\u0438\u0441\u043a\u043e\u0440\u0434 \u043d\u0438\u043a\u043d\u0435\u0439\u043c"}),"discordNickname"]),Fe=Object(O.a)(Ge,2),Le=Fe[0],Ae=Fe[1],Ye=Object(m.useState)([Object(G.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),"groups"]),Ue=Object(O.a)(Ye,2),Ve=Ue[0],He=Ue[1],qe={surname:{},name:{},midname:{},age:{}},Ke=function(e){S[e].forEach((function(t){qe[e][t]=!0}))};for(var We in qe)Ke(We);var $e=Object(m.useState)({}),Xe=Object(O.a)($e,2),Je=Xe[0],Qe=Xe[1],Ze=Object(m.useState)({}),et=Object(O.a)(Ze,2),tt=et[0],nt=et[1],at=Object(ie.a)(Object(ie.a)({},Je),tt),ct=[];for(var ot in at)ct.push({id:ot,text:at[ot][0],checked:at[ot][1]});var rt,it=Object(m.useState)(B),st=Object(O.a)(it,2),lt=st[0],dt=st[1],ut=function(e,t,n){if(e[0]){var a=Object(ie.a)({},lt);a[n].push({text:e[0],value:e[0]}),dt(a),e[0]=""}},jt=T.a.div({marginTop:"10px",svg:{marginBottom:"3px"}}),pt=function(e){return"age"==e?"block":" none"},bt=function(e){return{filterDropdown:function(t){var n,a=t.setSelectedKeys,c=t.selectedKeys;t.confirm,t.clearFilters;return Object(G.jsxs)("div",{style:{padding:8},children:[Object(G.jsx)(ne.a,{type:(n=e,"age"==n?"number":"text"),placeholder:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440 ".concat(e),value:c[0],onChange:function(e){return a(e.target.value?[e.target.value]:[])},onPressEnter:function(){return ut(c,0,e)},style:{marginBottom:8,display:"block"}}),Object(G.jsx)(Rt.b,{children:Object(G.jsx)(Oe.a,{type:"primary",onClick:function(){ut(c,0,e)},size:"small",style:{width:140},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0444\u0438\u043b\u044c\u0442\u0440"})}),Object(G.jsxs)(H.a,{children:[lt[e].map((function(t,n){var a=!1;return S[e].forEach((function(e){e==t.text&&(a=!0)})),Object(G.jsx)(H.a.Item,{children:Object(G.jsx)(Bt.a,{defaultChecked:a,onChange:function(n){n.target.checked?qe[e][t.text]=!0:qe[e][t.text]=!1},children:t.text})},"".concat(t.text).concat(n))})),Object(G.jsx)(H.a.Item,{style:{display:pt(e)},children:Object(G.jsx)(Bt.a,{defaultChecked:_,onChange:function(e){P=e.target.checked},children:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"})},"emptyAge")]}),Object(G.jsx)(jt,{children:Object(G.jsx)(Oe.a,{loading:L,type:"primary",size:"small",icon:Object(G.jsx)(q.a,{}),onClick:function(){var t=[];for(var n in qe[e])qe[e][n]&&t.push(n);var a=Object(ie.a)({},S);a[e]=t,C(a),z(lt),kt(a,Je)},children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440"})})]})},filterIcon:function(){var t=void 0;return S[e][0]&&(t="#1890ff"),V[e]?Object(G.jsx)(zt.a,{}):Object(G.jsx)(G.Fragment,{children:Object(G.jsx)(q.a,{style:{color:t}})})},onFilterDropdownVisibleChange:function(t){var n=Object(ie.a)({},V);n[e]=t,K(n),t||(C(S),z(lt))},filterDropdownVisible:V[e]}},ht=function e(t){var n=encodeURI(t);Vt({method:"get",url:"".concat(N,"/CRM/Search/autocompletion?query=").concat(n),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){var n={};e.data.body.hits.hits.map((function(e){var t=e._source,a=t.id,c=t.group_name;"group"==t.type&&(n[a]=["".concat(c),!1])})),a(t),nt(n)})).catch((function(t){ee(e,t)}))},mt=function(e){clearTimeout(rt),e?rt=setTimeout((function(){ht(e)}),500):(a(""),nt({}))},ft=[Object(ie.a)(Object(ie.a)({},Ft(X,J,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f","surname")),{},{render:function(e){if("function"==typeof e)return e()}},bt("surname")),Object(ie.a)(Object(ie.a)({},Ft(te,ae,"\u0418\u043c\u044f","name")),bt("name")),Object(ie.a)(Object(ie.a)({},Ft(re,le,"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e","midname")),bt("midname")),Object(ie.a)(Object(ie.a)({},Ft(pe,be,"\u0412\u043e\u0437\u0440\u0430\u0441\u0442","age")),bt("age")),Object(ie.a)(Object(ie.a)({},Ft(Ne,Se,"\u041f\u043e\u043b","gender")),{},{filters:[{text:"\u041c\u0443\u0436\u0441\u043a\u043e\u0439",value:"\u041c\u0443\u0436\u0441\u043a\u043e\u0439"},{text:"\u0416\u0435\u043d\u0441\u043a\u0438\u0439",value:"\u0416\u0435\u043d\u0441\u043a\u0438\u0439"}],defaultFilteredValue:Object(se.a)(S.gender)}),Object(ie.a)({},Ft(we,_e,"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430","phoneNumber")),Object(ie.a)({},Ft(Ee,Re,"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f","parentPhoneNumber")),Object(ie.a)({},Ft(ge,ve,"\u0424\u0418\u041e \u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044f","parentFullname")),Object(ie.a)(Object(ie.a)({},Ft(Me,Te,"\u0411\u0430\u043b\u0430\u043d\u0441","balance")),{},{filters:[{text:"\u041f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439",value:"1"},{text:"\u041e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439",value:"2"}],defaultFilteredValue:Object(se.a)(S.balance)}),Object(ie.a)(Object(ie.a)({},Ft(Ve,He,"\u0413\u0440\u0443\u043f\u043f\u044b","groups")),{},{render:function(e){if(e)return e.map((function(e){return Object(G.jsx)(de.a,{color:"blue",children:e.group_name},"".concat(e._id))}))}},{filterDropdown:function(e){return e.setSelectedKeys,e.selectedKeys,e.confirm,e.clearFilters,Object(G.jsxs)("div",{style:{padding:8},children:[Object(G.jsx)(ne.a,{id:"inputGroup",placeholder:"\u041d\u0430\u0439\u0442\u0438 \u0433\u0440\u0443\u043f\u043f\u044b",defaultValue:n,onChange:function(e){mt(e.target.value)},onPressEnter:function(){},style:{marginBottom:8,display:"block"}}),Object(G.jsx)(H.a,{children:ct.map((function(e){var t=e.id,n=e.text,a=e.checked;return Object(G.jsx)(H.a.Item,{children:Object(G.jsx)(Bt.a,{defaultChecked:a,onChange:function(e){var a=Object(ie.a)({},Je);e.target.checked?a[t]=[n,!0]:delete a[t],Qe(a),nt({})},children:n})},t)}))}),Object(G.jsx)(jt,{children:Object(G.jsx)(Oe.a,{loading:L,type:"primary",size:"small",icon:Object(G.jsx)(q.a,{}),onClick:function(){kt(S,Je)},children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440"})})]})},onFilterDropdownVisibleChange:function(e){v(e?document.querySelector(".ant-table-content").scrollLeft:0);var t=Object(ie.a)({},V);t.groups=e,K(t),e||kt(S,Je)},filterDropdownVisible:V.groups,filterIcon:function(){return Object.keys(Je).length?Object(G.jsx)(Ut.a,{style:{color:"#1890ff"}}):Object(G.jsx)(Ut.a,{})}}),Object(ie.a)({},Ft(Le,Ae,"\u0414\u0438\u0441\u043a\u043e\u0440\u0434 \u043d\u0438\u043a\u043d\u0435\u0439\u043c","discordNickname"))],xt=Object(m.useState)({filters:{}}),Ot=Object(O.a)(xt,2),gt=Ot[0],vt=Ot[1],yt=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;A(!0),Vt({method:"post",url:"".concat(N,"/CRM/Pupils/find?limit=").concat(me,"&offset=").concat(t),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:n||gt}).then((function(e){var t=e.data,n=e.headers;console.log(t),h(t),u(n.count),K({surname:!1,name:!1,midname:!1}),A(!1)})).catch((function(t){ee(e,t,(function(){A(!1)}))}))},kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};for(var a in t)n.groups||(n.groups=[]),n.groups.push(a);for(var c in e)e[c][0]&&("surname"==c||"name"==c||"midname"==c||"age"==c?n["".concat(c,"s")]=e[c]:n["".concat(c)]=e[c]);if(n.ages){var o=Object(se.a)(n.ages);n.ages=[],o.forEach((function(e){n.ages.push(+e)}))}if(n.balance){var r=Object(se.a)(n.balance);1==r[0]&!r[1]?n.balance={$gte:0}:2==r[0]&!r[1]?n.balance={$lt:0}:r[1]&&(n.balance={$gte:0,$lte:0})}n.emptyAge=P;var i={filters:n};D(P),vt(i),yt(0,i)};return Object(m.useEffect)((function(){yt()}),[]),Object(m.useEffect)((function(){var e=document.getElementById("inputGroup");e&&e.focus()})),Object(G.jsxs)(qt,{children:[Object(G.jsx)(Yt,{paramFilrers:S,setParamFilrers:C,globalFiltersG:lt,setGlobalFiltersG:dt,dataGroupsChecked:Je,setDataGroupsChecked:Qe,dataSource:b,update:kt,loadingButtomFilrer:L,setLoadingButtomFilrer:A,filterDropdownVisible:V,setFilterDropdownVisible:K,columns:ft,scrollLeft:g}),Object(G.jsx)(fe,{getItem:yt,count:d,offset:r,setOffset:i})]})},Wt=V.a.Sider,$t=H.a.SubMenu,Xt=function(e){var t=e.logOut,n=Object(m.useState)(!1),a=Object(O.a)(n,2),c=a[0],o=a[1];Object(m.useEffect)((function(){document.querySelector(".ant-layout-sider-trigger").style.width=c?"80px":"257px"}));var r=T.a.div({".ant-menu":{height:"100vh",position:"relative",width:c?"80px":"257px"},".vag123":{position:"absolute",bottom:"48px",width:c?"80px":""},".site-layout":{padding:"15px"},"& > section":{"& > aside":{position:"fixed",zIndex:99},"& > section":{marginLeft:c?"80px":"257px"}}}),i=T.a.div({overflow:"auto"});return Object(G.jsx)(G.Fragment,{children:Object(G.jsx)(Y.a,{children:Object(G.jsx)(r,{children:Object(G.jsxs)(V.a,{style:{minHeight:"100vh"},children:[Object(G.jsx)(Wt,{collapsible:!0,collapsed:c,onCollapse:function(e){o(e)},children:Object(G.jsxs)(H.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline",children:[Object(G.jsx)(H.a.Item,{icon:Object(G.jsx)(q.a,{}),children:Object(G.jsx)(re,{})},"Search"),Object(G.jsx)(H.a.Item,{icon:Object(G.jsx)(K.a,{onClick:function(){return document.querySelector(".ButtonUpload").click()}}),children:Object(G.jsx)(Et,{})}),Object(G.jsx)(H.a.Item,{icon:Object(G.jsx)(W.a,{}),children:Object(G.jsx)(Y.b,{to:"/student",children:"\u0423\u0447\u0435\u043d\u0438\u043a\u0438"})},"2"),Object(G.jsx)(H.a.Item,{icon:Object(G.jsx)($.a,{}),children:Object(G.jsx)(Y.b,{to:"/group",children:"\u0413\u0440\u0443\u043f\u043f\u044b"})},"3"),Object(G.jsx)(H.a.Item,{icon:Object(G.jsx)(X.a,{}),children:Object(G.jsx)(Y.b,{to:"/sales-funnel",children:"\u0412\u043e\u0440\u043e\u043d\u043a\u0430 \u043f\u0440\u043e\u0434\u0430\u0436"})},"4"),Object(G.jsxs)($t,{icon:Object(G.jsx)(J.a,{}),title:"\u0421\u0432\u043e\u0434\u043d\u044b\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b",children:[Object(G.jsx)(H.a.Item,{children:Object(G.jsx)(Y.b,{to:"/table-pupils",children:"\u0423\u0447\u0435\u043d\u0438\u043a\u0438"})},"sub-student"),Object(G.jsx)(H.a.Item,{children:Object(G.jsx)(Y.b,{to:"/table-groups",children:"\u0413\u0440\u0443\u043f\u043f\u044b"})},"sub-groups")]},"sub1"),Object(G.jsx)(H.a.Item,{onClick:function(){localStorage.removeItem("tokenID"),t()},id:"LogoutOut",className:"vag123",icon:Object(G.jsx)(Q.a,{}),children:Object(G.jsx)(Y.b,{to:"/",children:"\u0412\u044b\u0445\u043e\u0434"})},"Logout")]})}),Object(G.jsx)(V.a,{className:"site-layout",children:Object(G.jsxs)(U.c,{children:[Object(G.jsx)(U.a,{exact:!0,path:"/student",component:function(){return Object(G.jsx)(Ve,{})}}),Object(G.jsx)(U.a,{path:"/student/:id",children:function(){return Object(G.jsx)(dt,{})}}),Object(G.jsx)(U.a,{exact:!0,path:"/group",component:function(){return Object(G.jsx)(jt,{})}}),Object(G.jsx)(U.a,{path:"/group/:id",children:function(){return Object(G.jsx)(gt,{})}}),Object(G.jsx)(U.a,{path:"/sales-funnel",component:_t}),Object(G.jsx)(U.a,{exact:!0,path:"/table-groups",component:function(){return Object(G.jsx)(Lt,{})}}),Object(G.jsx)(U.a,{exact:!0,path:"/table-pupils",component:function(){return Object(G.jsx)(i,{children:Object(G.jsx)(Kt,{})})}}),Object(G.jsx)(U.a,{path:"/student/*",children:Object(G.jsx)("h2",{children:"\u0421\u0442\u0440\u0430\u043d\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})})]})})]})})})})},Jt=n(580),Qt=n(44),Zt=function e(t,n){Qt({method:"post",url:"".concat(N,"/CRM/Pupils/").concat(t,"/Notes"),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:{text:n}}).catch((function(t){ee(e,t)}))},en=n(44),tn=function e(t,n,a,c){en({method:"put",url:"".concat(N,"/CRM/Groups/").concat(a,"/Pupils/").concat(n,"/Schedule"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:t}).then((function(e){c("\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435")})).catch((function(t){ee(e,t)}))},nn=ue.a.Column,an=ue.a.ColumnGroup,cn=ne.a.TextArea,on=function(e){var t=e.ID_Group,n=e.Group,a=e.getUser,c=Object(m.useState)({}),o=Object(O.a)(c,2),r=o[0],i=o[1],s=Object(m.useState)([]),l=Object(O.a)(s,2),d=l[0],u=l[1],j=Object(ie.a)({},r),p=Object(se.a)(d),b=function(){for(var e in p=[],j)2==j[e].arr[t].status&&p.push(e)},h={},f=n.pupils.map((function(e,a){var c=e._id,o=e.name,r=e.surname,i=e.midname;j[c]={arr:e.localSchedule?e.localSchedule[n._id]:[],pupil_id:c},b();var s=j[c].arr[t].start?j[c].arr[t].start:"",l=j[c].arr[t].start?j[c].arr[t].finish:"",d=function(e){j[c]?j[c].arr=e:j[c]||(j[c]={arr:e,pupil_id:c})},u="";return n.pupils[a]&&(u=n.pupils[a].localSchedule[n._id][t].title),{key:c,name:"".concat(r," ").concat(o," ").concat(i),title:{text:u,action:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,c=Object(se.a)(e.localSchedule[n._id]);2==a&3==c[t].status||3==a?(c[t].status=a,d(c)):3!=a&2!=a&&(c[t].title=a,d(c))},addNotes:function(e){h[c]={text:e,id:c}}},progres:{start:s,finish:l,action:function(e,n){j[c].arr[t][e]=n}}}})),x={selectedRowKeys:p,onChange:function(){i(j),u(p)},onSelect:function(e){var n;n=2==j[e.key].arr[t].status?3:2,j[e.key].arr[t].status=n,b()},onSelectAll:function(e){if(e)for(var n in j)j[n].arr[t].status=2;else if(!e)for(var a in j)j[a].arr[t].status=3;b()}};return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsxs)(ue.a,{pagination:!1,loading:!1,rowSelection:x,scroll:{x:0},dataSource:f,children:[Object(G.jsx)(nn,{title:"\u0423\u0447\u0435\u043d\u0438\u043a",dataIndex:"name",render:function(e){return Object(G.jsx)(de.a,{color:"blue",children:e})}},"name"),Object(G.jsxs)(an,{title:"\u041f\u0440\u043e\u0433\u0440\u0435\u0441\u0441",children:[Object(G.jsx)(nn,{title:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",dataIndex:"title",render:function(e){return Object(G.jsx)(cn,{defaultValue:e.text,placeholder:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0443\u0447\u0435\u043d\u0438\u043a\u0443",onBlur:function(t){e.action(t.target.value),e.addNotes(t.target.value)},autoSize:{minRows:2,maxRows:6}})}},"title"),Object(G.jsx)(nn,{title:"\u041d\u0430\u0447\u0430\u043b\u043e",dataIndex:"progres",render:function(e){return Object(G.jsx)(cn,{defaultValue:e.start,placeholder:"\u0421\u0442\u0430\u0440\u0442...",onBlur:function(t){e.action("start",t.target.value)},autoSize:{minRows:2,maxRows:6}})}},"progres"),Object(G.jsx)(nn,{title:"\u041a\u043e\u043d\u0435\u0446",dataIndex:"progres",render:function(e){return Object(G.jsx)(cn,{defaultValue:e.finish,placeholder:"\u0424\u0438\u043d\u0438\u0448...",onBlur:function(t){e.action("finish",t.target.value)},autoSize:{minRows:2,maxRows:6}})}},"progres")]})]}),Object(G.jsx)("div",{className:"Button",children:Object(G.jsx)(Oe.a,{onClick:function(){for(var e in j)tn(j[e].arr,e,n._id,a);for(var t in h)Zt(t,h[t].text)},type:"primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})},rn=n(576),sn=T.a.div({".time":{"h5, h6":{margin:0}},".TablePupils":{marginTop:"15px",".ant-tag":{fontSize:"13px"},td:{padding:"16px 3px"}},".Button":{marginTop:"15px",display:"flex",justifyContent:"flex-end"}}),ln=rn.a.Text,dn=function(e){var t=e.rowKey,n=e.setRowKey,a=e.GROUP,c=e.Group,o=e.getUser,r={group:{global_schedule:[{date:"",duration:""}]},indexD:0};return a.group.group_name||(r=c),Object(G.jsxs)(sn,{className:"LessonNow",children:[Object(G.jsxs)("div",{className:"row",children:[Object(G.jsx)("div",{className:"col-md-8",children:Object(G.jsxs)("h4",{children:[Object(G.jsx)(ln,{type:"secondary",children:" \u0423\u0440\u043e\u043a \u0441\u0435\u0439\u0447\u0430\u0441: "})," ",r.group.group_name," "]})}),Object(G.jsxs)("div",{className:"col-md-3 time",children:[Object(G.jsxs)("h6",{children:[" ",Object(G.jsx)(ln,{type:"secondary",children:"\u041d\u0430\u0447\u0430\u043b\u043e"})," "]}),Object(G.jsxs)("h5",{children:[" ",Object(G.jsxs)(ln,{type:"warning",children:[r.group.global_schedule[r.indexD].date," \u0432 ",r.group.global_schedule[0].duration[0]]})," "]})]})]}),Object(G.jsx)("div",{className:"TablePupils",children:Object(G.jsx)(on,{rowKey:t,getUser:o,ID_Group:r.indexD,setRowKey:n,Group:r.group})})]})},un=function(e){var t=e.Groups,n=e.newGroup,a=e.setGROUP,c=e.GROUP,o=ue.a.Column,r=(ue.a.ColumnGroup,t.map((function(e,t){var a=e.group,o=a._id,r=a.group_name,i=a.global_schedule,s="cyan";return c.group&&(n.group._id==o&!c.group.group_name||o==c.group._id)&&(s="volcano"),{key:t,groupName:{group_name:r,G:e},date:{date:"".concat(i["".concat(e.indexD)].date," \u0432 ").concat(i[0].duration[0]),color:s,G:e}}}))),i={pageSize:15,onChange:function(e){console.log("\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430: ".concat(e))}};return Object(G.jsxs)(ue.a,{pagination:i,loading:!1,scroll:{x:0},dataSource:r,children:[Object(G.jsx)(o,{title:"\u0412\u0440\u0435\u043c\u044f",dataIndex:"date",render:function(e){return Object(G.jsx)(de.a,{onClick:function(){a(e.G)},style:{cursor:"pointer"},color:e.color,children:e.date})}},"date"),Object(G.jsx)(o,{title:"\u0413\u0440\u0443\u043f\u043f\u0430",dataIndex:"groupName",render:function(e){return Object(G.jsx)(de.a,{onClick:function(){a(e.G)},style:{cursor:"pointer"},color:"volcano",children:e.group_name})}},"groupName")]})};un.defaultProps={Groups:[{group_name:"",global_schedule:[{date:"",duration:["",""]}],pupils:[]}]};var jn,pn=un,bn=T.a.div(jn||(jn=Object(k.a)(["\n\tpadding: 15px;\n\tborder-radius: 2px;\n\tbackground-color: #fff;\n"]))),hn=function(e){var t=e.Groups,n=e.newGroup,a=e.setGROUP,c=e.GROUP;return Object(G.jsxs)(bn,{className:"AllLesson",children:[Object(G.jsx)("div",{className:"row",children:Object(G.jsx)("div",{className:"col-md-8",children:Object(G.jsx)("h5",{children:"\u0411\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0435 \u0443\u0440\u043e\u043a\u0438"})})}),Object(G.jsx)("div",{className:"TableGroups",children:Object(G.jsx)(pn,{Groups:t,newGroup:n,setGROUP:a,GROUP:c})})]})},mn=function(e){var t=e.rowKey,n=e.setRowKey,a=e.Groups,c=e.GROUP,o=e.setGROUP,r=e.getUser,i={timeN:"",group:{group_name:"",global_schedule:[{date:"",duration:["",""]}],pupils:[]},indexD:0},s=[{timeN:"",group:{group_name:"",global_schedule:[{date:"",duration:["",""]}],pupils:[]},indexD:0}];a.forEach((function(e,t){var n=[],a="f";if((e.global_schedule?e.global_schedule:[]).forEach((function(e,t){var c=pe()(e.date,"DD.MM.YYYY").format("YYYY-MM-DD");pe()().diff(c,"day")<=0&&("f"==a&&(a=t),n.push("".concat(c," ").concat(e.duration[0])))})),n[0]){if(i.timeN){var c=pe()().diff(n[0],"hours");c>pe()().diff(i.timeN,"hours")&c<=0&&(i={timeN:n[0],group:e,indexD:a})}else i.timeN||(i={timeN:n[0],group:e,indexD:a});n[0]&&s.push({timeN:n[0],group:e,indexD:a})}}));var l=[{timeN:"",group:{group_name:"",global_schedule:[{date:"",duration:["",""]}],pupils:[]},indexD:0}],d=[];s.forEach((function(e){d.push(pe()().diff(e.timeN,"minutes"))})),d.sort((function(e,t){return t-e})),d.forEach((function(e){s.forEach((function(t,n){pe()().diff(t.timeN,"minutes")==e&&l.push(t)}))})),void 0!=l[1]&&l.splice(0,1);var u=T.a.div({".site-layout-background":{".allCol":{padding:"0 7.5px"},".LessonNow, .AllLesson":{padding:"15px",borderRadius:"2px",backgroundColor:"#fff"}}});c||o(l[0]);var j=V.a.Content;return Object(G.jsx)(u,{children:Object(G.jsxs)(j,{style:{margin:"0 16px"},children:[Object(G.jsxs)(Jt.a,{style:{margin:"16px 0"},children:[Object(G.jsx)(Jt.a.Item,{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(G.jsx)(Jt.a.Item,{children:"\u0411\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0435 \u0443\u0440\u043e\u043a\u0438"})]}),Object(G.jsxs)("div",{className:"row site-layout-background",style:{padding:"7.5px",minHeight:360},children:[Object(G.jsx)("div",{className:"allCol col-8",children:Object(G.jsx)(dn,{rowKey:t,getUser:r,setRowKey:n,GROUP:c,Group:i})}),Object(G.jsx)("div",{className:"allCol col-4",children:Object(G.jsx)(hn,{Groups:l,setGROUP:o,newGroup:i,GROUP:c})})]})]})})},fn=[{title:"",key:"time",dataIndex:"time",fixed:"left",width:100,render:function(e){return Object(G.jsx)(de.a,{color:"cyan",children:e})}},{title:"\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a",dataIndex:"1",key:"1"},{title:"\u0412\u0442\u043e\u0440\u043d\u0438\u043a",dataIndex:"2",key:"2"},{title:"\u0421\u0440\u0435\u0434\u0430",dataIndex:"3",key:"3"},{title:"\u0427\u0435\u0442\u0432\u0435\u0440\u0433",dataIndex:"4",key:"4"},{title:"\u041f\u044f\u0442\u043d\u0438\u0446\u0430",dataIndex:"5",key:"5"},{title:"\u0421\u0443\u0431\u0431\u043e\u0442\u0430",dataIndex:"6",key:"6"},{title:"\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435",dataIndex:"0",key:"7"}],xn=T.a.div({padding:"15px",borderRadius:"2px",backgroundColor:"#fff"}),On=T.a.div({padding:"15px",borderRadius:"2px",backgroundColor:"#fff",marginBottom:"15px"}),gn=V.a.Content,vn=function(e){var t=e.Groups;console.log(t);var n=t.map((function(e){return{title:function(){return Object(G.jsx)(de.a,{color:"magenta",children:e.GROUP_NAME},e._id)},key:e._id,dataIndex:"pupil",fixed:"top",width:100,render:function(){return Object(G.jsx)(G.Fragment,{children:e.PUPILS.map((function(t,n){return Object(G.jsx)("div",{children:Object(G.jsxs)(de.a,{style:{marginBottom:"5px"},color:"green",children:[t.surname," ",t.name," ",t.midname]})},"".concat(e._id).concat(n))}))})}}})),a=[{key:"777",pupil:""}];console.log(a);for(var c=t.map((function(e){if((e.GLOBAL_SCHEDULE?e.GLOBAL_SCHEDULE:[])[0]){var t={};return e.GLOBAL_SCHEDULE.forEach((function(n){var a=pe()(n.date,"DD.MM.YYYY").day();t[a]=e.GROUP_NAME})),Object(ie.a)(Object(ie.a)({key:e._id},t),{},{time:e.GLOBAL_SCHEDULE[0].duration[0]})}return{key:e._id,1:'\u0414\u043b\u044f \u0433\u0440\u0443\u043f\u043f\u044b: "'.concat(e.GROUP_NAME,'" \u043d\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u043e \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435.'),time:""}})),o=[],r=function(e){c.forEach((function(t){pe()(t.time,"hh:mm").hours()==e&&o.push(t)}))},i=0;i<=24;i++)r(i);return Object(G.jsxs)(gn,{style:{margin:"0 16px"},children:[Object(G.jsxs)(Jt.a,{style:{margin:"16px 0"},children:[Object(G.jsx)(Jt.a.Item,{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(G.jsx)(Jt.a.Item,{children:"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0443\u0440\u043e\u043a\u043e\u0432"})]}),Object(G.jsx)(On,{children:Object(G.jsxs)("div",{className:"row site-layout-background",style:{padding:"15px"},children:[Object(G.jsx)("h4",{children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(G.jsx)(ue.a,{bordered:!0,columns:n,dataSource:a,scroll:{x:1e3}})]})}),Object(G.jsx)(xn,{children:Object(G.jsxs)("div",{className:"row site-layout-background",style:{padding:"15px"},children:[Object(G.jsx)("h4",{children:"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(G.jsx)(ue.a,{bordered:!0,columns:fn,dataSource:o,scroll:{x:1300}})]})})]})},yn=T.a.div({padding:"15px",borderRadius:"2px",backgroundColor:"#fff"}),kn=function(e){var t=e.AllPupils,n=V.a.Content,a=ue.a.Column,c=[];return t.forEach((function(e){var t=e.surname,n=e.name,a=e.midname,o=e.dateOfBirth,r=e.gender,i=e.phone,s=e.discord,l=e._id,d=!0;c.forEach((function(e){e.key==l&&(d=!1)})),d&&c.push({key:l,surname:[t,l],name:n,midname:a,dateOfBirth:be(o),gender:r,phone:i,discord:s})})),Object(G.jsxs)(n,{style:{margin:"0 16px"},children:[Object(G.jsxs)(Jt.a,{style:{margin:"16px 0"},children:[Object(G.jsx)(Jt.a.Item,{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(G.jsx)(Jt.a.Item,{children:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0423\u0447\u0435\u043d\u0438\u043a\u043e\u0432"})]}),Object(G.jsx)("div",{className:"site-layout-background",style:{padding:"10px",minHeight:360},children:Object(G.jsx)(yn,{children:Object(G.jsxs)(ue.a,{dataSource:c,children:[Object(G.jsx)(a,{title:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",dataIndex:"surname",render:function(e){return Object(G.jsx)(Y.b,{className:"link-info",to:"/student/".concat(e[1]),children:e[0]})}},"surname"),Object(G.jsx)(a,{title:"\u0418\u043c\u044f",dataIndex:"name"},"name"),Object(G.jsx)(a,{title:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",dataIndex:"midname"},"midname"),Object(G.jsx)(a,{title:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442",dataIndex:"dateOfBirth"},"dateOfBirth"),Object(G.jsx)(a,{title:"\u041f\u043e\u043b",dataIndex:"gender"},"gender"),Object(G.jsx)(a,{title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",dataIndex:"phone"},"phone"),Object(G.jsx)(a,{title:"\u0414\u0438\u0441\u043a\u043e\u0440\u0434 \u043d\u0438\u043a\u043d\u0435\u0439\u043c",dataIndex:"discord"},"discord")]})})})]})},Nn=T.a.div({padding:"15px",borderRadius:"2px",backgroundColor:"#fff"}),Sn=function(e){var t=e.AllGroups,n=V.a.Content,a=ue.a.Column,c=t.map((function(e){var t=e.group_name,n=e.level,a=e.places,c=e.pupils,o=e._id,r=e.global_schedule,i="";return r&&r[0]&&(i="\u0441 ".concat(r[0].duration[0]," \u0434\u043e ").concat(r[0].duration[1])),{key:o,group_name:[t,o],level:n,places:a,free_places:a-c.length,time:i}}));return Object(G.jsxs)(n,{style:{margin:"0 16px"},children:[Object(G.jsxs)(Jt.a,{style:{margin:"16px 0"},children:[Object(G.jsx)(Jt.a.Item,{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(G.jsx)(Jt.a.Item,{children:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0413\u0440\u0443\u043f\u043f"})]}),Object(G.jsx)("div",{className:"site-layout-background",style:{padding:"10px",minHeight:360},children:Object(G.jsx)(Nn,{children:Object(G.jsxs)(ue.a,{dataSource:c,children:[Object(G.jsx)(a,{title:"\u0418\u043c\u044f \u0413\u0440\u0443\u043f\u043f\u044b",dataIndex:"group_name",render:function(e){return Object(G.jsx)(Y.b,{className:"link-info",to:"/group/".concat(e[1]),children:e[0]})}},"group_name"),Object(G.jsx)(a,{title:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c",dataIndex:"level"},"level"),Object(G.jsx)(a,{title:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0435\u0441\u0442",dataIndex:"places"},"places"),Object(G.jsx)(a,{title:"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043c\u0435\u0441\u0442",dataIndex:"free_places"},"free_places"),Object(G.jsx)(a,{title:"\u0412\u0440\u0435\u043c\u044f \u0437\u0430\u043d\u044f\u0442\u0438\u0439",dataIndex:"time"},"time")]})})})]})},Cn=n(201),In=n(202),wn=n(44),_n=n(135),Dn=V.a.Sider,Pn=function(e){var t=e.logOut,n=Object(m.useState)(!1),a=Object(O.a)(n,2),c=a[0],o=a[1],r=Object(m.useState)([]),i=Object(O.a)(r,2),s=i[0],l=i[1],d=Object(m.useState)({group:{group_name:"",global_schedule:[{date:"00",duration:["",""]}],pupils:[],_id:"3443"},indexD:0}),u=Object(O.a)(d,2),j=u[0],p=u[1],b=Object(m.useState)({groups:[],login:"",midname:"",name:"",role:"",surname:"",_id:"456456"}),h=Object(O.a)(b,2),f=h[0],x=h[1],g=Object(m.useState)([]),v=Object(O.a)(g,2),y=v[0],k=v[1],S=[];y.forEach((function(e){S.push.apply(S,Object(se.a)(e.pupils))}));var C=function e(t){var n=t.groups.map((function(e){return e._id}));n[0]?wn({method:"post",url:"".concat(N,"/CRM/Groups/getByIds"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:n}).then((function(e){k(e.data),z()})).catch((function(t){ee(e,t)})):z()},I=function(e){B(e,""),wn({method:"get",url:"".concat(N,"/AdminPanel/CRMAccounts/").concat(_n.decode(localStorage.getItem("tokenID")).id),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){var t=e.data;t||(localStorage.removeItem("tokenID"),window.location.replace("/")),x(t),C(t)})).catch((function(e){ee(C,e)}))};Object(m.useEffect)((function(){I("\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445...")}),[]),Object(m.useEffect)((function(){document.querySelector(".ant-layout-sider-trigger").style.width=c?"80px":"250px"}));var w=T.a.div({".ant-menu":{height:"100vh",position:"relative",width:c?"80px":"250px"},".vag123":{position:"absolute",bottom:"48px",width:c?"80px":""},".site-layout":{padding:"15px"},"& > section":{"& > aside":{position:"fixed",zIndex:99},"& > section":{marginLeft:c?"80px":"250px"}}});return Object(G.jsx)(Y.a,{children:Object(G.jsx)(w,{children:Object(G.jsxs)(V.a,{style:{minHeight:"100vh"},children:[Object(G.jsxs)(Dn,{collapsible:!0,collapsed:c,onCollapse:function(){return o(c)},children:[Object(G.jsx)("div",{className:"logo"}),Object(G.jsxs)(H.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline",children:[Object(G.jsx)(H.a.Item,{icon:Object(G.jsx)(q.a,{}),children:Object(G.jsx)(re,{tutorid:"&tutorid=".concat(_n.decode(localStorage.getItem("tokenID")).id)})},"Search"),Object(G.jsx)(H.a.Item,{icon:Object(G.jsx)(Cn.a,{}),children:Object(G.jsx)(Y.b,{to:"/",children:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f"})},"1"),Object(G.jsx)(H.a.Item,{icon:Object(G.jsx)(In.a,{}),children:Object(G.jsx)(Y.b,{to:"/calendar",children:"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"})},"2"),Object(G.jsx)(H.a.Item,{icon:Object(G.jsx)(W.a,{}),children:Object(G.jsx)(Y.b,{to:"/pupils",children:"\u0423\u0447\u0435\u043d\u0438\u043a\u0438"})},"3"),Object(G.jsx)(H.a.Item,{icon:Object(G.jsx)($.a,{}),children:Object(G.jsx)(Y.b,{to:"/groups",children:"\u0413\u0440\u0443\u043f\u043f\u044b"})},"4"),Object(G.jsx)(H.a.Item,{onClick:function(){localStorage.removeItem("tokenID"),t()},className:"vag123",icon:Object(G.jsx)(Q.a,{}),children:Object(G.jsxs)(Y.b,{to:"/",children:["\u0412\u044b\u0445\u043e\u0434: ",f.login]})},"Logout")]})]}),Object(G.jsx)(V.a,{className:"site-layout",children:Object(G.jsx)("div",{children:Object(G.jsxs)(U.c,{children:[Object(G.jsx)(U.a,{exact:!0,path:"/",children:Object(G.jsx)(mn,{rowKey:s,getUser:I,setRowKey:l,GROUP:j,setGROUP:p,Groups:y})}),Object(G.jsx)(U.a,{exact:!0,path:"/calendar",children:Object(G.jsx)(vn,{Groups:y})}),Object(G.jsx)(U.a,{exact:!0,path:"/pupils",children:Object(G.jsx)(kn,{AllPupils:S})}),Object(G.jsx)(U.a,{exact:!0,path:"/groups",children:Object(G.jsx)(Sn,{AllGroups:y})}),Object(G.jsx)(U.a,{exact:!0,path:"/student/:id",children:function(){return Object(G.jsx)(dt,{})}}),Object(G.jsx)(U.a,{exact:!0,path:"/group/:id",children:function(){return Object(G.jsx)(gt,{})}})]})})})]})})})},En=function(){var e=n(44),t=n(135),a=Object(m.useState)(""),c=Object(O.a)(a,2),o=(c[0],c[1]),r=Object(G.jsx)(A,{setUser:o}),i=localStorage.getItem("tokenID")?Object(G.jsx)(Xt,{logOut:o}):r;return Object(m.useEffect)((function(){i!==r&&e({method:"get",url:"".concat(N,"/auth-check"),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).catch((function(e){e.response&&(401===e.response.status&&(localStorage.removeItem("tokenID"),window.location.replace("/")))}))}),[]),localStorage.getItem("tokenID")&&"teacher"===t.decode(localStorage.getItem("tokenID")).accountType&&(i=Object(G.jsx)(Pn,{logOut:o})),Object(G.jsx)(G.Fragment,{children:i})};x.a.render(Object(G.jsx)(En,{}),document.getElementById("root"))}},[[567,1,2]]]);
//# sourceMappingURL=main.18213bc8.chunk.js.map