(this["webpackJsonpcrm-shool-app"]=this["webpackJsonpcrm-shool-app"]||[]).push([[0],{129:function(e,t,n){"use strict";t.a=function(e,t){return function(n){if("event"===t&&(t=n),"string"===typeof t&&t.startsWith("event")){var a=t.slice(6).split("."),c=n;a.forEach((function(e,t){c=c[a[t]]})),t=c}e((function(e){return t}))}}},13:function(e,t,n){"use strict";t.a="http://crm.3place.ru"},173:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return u}));var a=n(18),c=n.n(a),r=n(35),o=n(25),i=n.n(o),s=function(){var e=Object(r.a)(c.a.mark((function e(t,n){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("".concat(t,"/CRM/Pupils"),{name:n.name,midname:n.midname,surname:n.surname,gender:n.gender,dateOfBirth:n.dateOfBirth,phones:n.phones,discord:n.discord,parentPhones:n.parentPhones,parentFullname:n.parentFullname,salesFunnelStep:n.salesFunnelStep},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("tokenID")),"Content-Type":"application/json;charset=utf-8"}}).then((function(e){return a=e.data}));case 2:return e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){var e=Object(r.a)(c.a.mark((function e(t,n,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.patch("".concat(t,"/CRM/Pupils/").concat(n),a,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("tokenID")),"Content-Type":"application/json;charset=utf-8"}});case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),u=function(){var e=Object(r.a)(c.a.mark((function e(t){var n,a,r=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:1e3,e.next=3,i.a.get("".concat(t,"/CRM/SalesFunnel?limit=").concat(n),{headers:{"Content-Type":"application/jsoncharset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){return a=e.data}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},199:function(e,t,n){"use strict";t.a=function(e){localStorage.removeItem("tokenID"),localStorage.setItem("tokenID",e)}},200:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(18),c=n.n(a),r=n(35),o=n(25),i=n.n(o),s=function(){var e=Object(r.a)(c.a.mark((function e(t,n,a){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("".concat(t,"/CRM/Pupils/").concat(n,"/Notes"),a,{headers:{authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},22:function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return j})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return p}));n(0);var a=n(103),c=n.n(a),r=n(275),o=n.n(r),i=o()(c.a),s=function(e,t){i.fire({icon:"error",title:e,text:t})},l=o()(c.a),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";l.fire({icon:"success",title:e,text:t})},d=c.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",c.a.stopTimer),e.addEventListener("mouseleave",c.a.resumeTimer)}}),j=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";c.a.fire({title:t,html:n,timerProgressBar:!0,didOpen:function(){c.a.showLoading(),e=setInterval((function(){var e=c.a.getHtmlContainer();if(e){var t=e.querySelector("b");t&&(t.textContent=c.a.getTimerLeft())}}),100)},willClose:function(){clearInterval(e)}})},b=function(e){403==e&&d.fire({icon:"error",title:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043f\u0440\u0430\u0432 \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})},p=function(){c.a.close()}},272:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(18),c=n.n(a),r=n(35),o=n(25),i=n.n(o),s=function(){var e=Object(r.a)(c.a.mark((function e(t,n,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.patch("".concat(t,"/CRM/Tasks/").concat(n),a,{headers:{authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}});case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},282:function(e,t,n){"use strict";n.d(t,"k",(function(){return x})),n.d(t,"l",(function(){return O})),n.d(t,"m",(function(){return g})),n.d(t,"n",(function(){return v})),n.d(t,"c",(function(){return _})),n.d(t,"b",(function(){return y})),n.d(t,"d",(function(){return S})),n.d(t,"f",(function(){return k})),n.d(t,"e",(function(){return N})),n.d(t,"h",(function(){return I})),n.d(t,"g",(function(){return w})),n.d(t,"j",(function(){return C})),n.d(t,"i",(function(){return T})),n.d(t,"a",(function(){return D}));var a,c,r,o,i,s,l,u,d,j,b,p,f,h=n(24),m=n(10),x={borderRadius:"2px"},O={fontSize:"18px",color:"#001529",position:"absolute",top:"4px",right:"2px"},g=(m.a.span(a||(a=Object(h.a)(["\n  font-weight: bold;\n"]))),m.a.span(c||(c=Object(h.a)(["\n  opacity: 0.8;\n"])))),v=m.a.div(r||(r=Object(h.a)(["\n  position: relative;\n"]))),_=m.a.div(o||(o=Object(h.a)(["\n  ::-webkit-scrollbar {\n    height: 5px;\n  }\n  ::-webkit-scrollbar-thumb {\n    background-color: darkgrey;\n  }\n  overflow: auto hidden;\n  height: auto;\n  min-width: 100%;\n  display: flex;\n  justify-content: ",";\n  .droppable-container {\n    min-height: 150px;\n    height: 100%;\n  }\n"])),(function(e){return e.jstctn?"space-evenly":"flex-start"})),y=m.a.div(i||(i=Object(h.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin: 10px 0;\n  > p {\n    flex: 1 0 50%;\n    margin: 0;\n    padding: 0;\n  }\n  > Input {\n    flex: 1 0 50%;\n  }\n"]))),S=m.a.div(s||(s=Object(h.a)(["\n  overflow: hidden;\n  max-width: 260px;\n  min-width: 260px;\n  margin: 0px 10px;\n  background: white;\n  border-radius: 4px;\n  .ant-pagination.ant-pagination-simple {\n    display: flex;\n    justify-content: center;\n    margin-bottom: 3px;\n  }\n"]))),k=m.a.div(l||(l=Object(h.a)(["\n  border-bottom: 1px solid ",";\n  max-height: 26px;\n  padding: 2px 5px;\n  background: white;\n  color: black;\n  font-weight: 500;\n"])),(function(e){return e.background?e.background:"#001529"})),N=m.a.div(u||(u=Object(h.a)(["\n  position: relative;\n  margin: 0;\n  margin-bottom: 8px;\n  padding: 5px 0;\n  text-align: center;\n  background: white;\n  color: black;\n  font-weight: 500;\n  border-bottom: 4px solid ",';\n  &::before {\n    position: absolute;\n    content: "";\n    display: inline-block;\n    bottom: -20px;\n    right: calc((260px - (8px + 8px)) / 2);\n    border-top: 8px solid ',";\n    border-right: 8px solid transparent;\n    border-left: 8px solid transparent;\n    border-bottom: 8px solid transparent;\n  }\n"])),(function(e){return e.background?e.background:"#001529"}),(function(e){return e.background?e.background:"#001529"})),I=m.a.p(d||(d=Object(h.a)(["\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  word-break: keep-all;\n  width: ",";\n  height: 25px;\n  margin: 0;\n"])),(function(e){return""!==e.width?e.width:"190px"})),w=m.a.div(j||(j=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  padding: 8px 3px 8px 8px;\n  margin: 5px 0;\n  border: 1px solid lightgray;\n  border-radius: 1px;\n  background: white;\n  color: black;\n  .funnelStepStudent__first--info {\n    display: flex;\n    flex-direction: column;\n    div:first-of-type {\n      font-weight: bold;\n    }\n    p {\n      margin: 0;\n    }\n    div:last-of-type {\n      margin-bottom: 3px;\n    }\n  }\n  p {\n    margin: 0;\n  }\n"]))),C=m.a.div(b||(b=Object(h.a)(["\n  margin: ",";\n  display: flex;\n  max-width: ","px;\n  overflow: auto hidden;\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n  padding: ",";\n  &::-webkit-scrollbar {\n    height: 2px;\n    background: white;\n  }\n  &::-webkit-scrollbar-thumb {\n    border: 3px solid lightgray;\n  }\n"])),(function(e){return e.portable?"2.5px 0":"2.5px 0 0 5px"}),(function(e){return e.portable?250:"100%"}),(function(e){return e.contains?"0 0 5px 0":"0"})),T=m.a.p(p||(p=Object(h.a)(["\n  width: fit-content;\n  cursor: pointer;\n  margin: 0 0 2.5px 0;\n  color: #18AEFF;\n  font-weight: 600;\n"]))),D=m.a.div(f||(f=Object(h.a)(["\n  border: 1px solid lightgray;\n  background: white;\n  padding: 5px;\n  > p {\n    margin: 0;\n    opacity: 0.8;\n  }\n  > .name {\n    font-weight: bold;\n  }\n"])))},368:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(18),c=n.n(a),r=n(35),o=n(25),i=n.n(o),s=function(){var e=Object(r.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("".concat(t,"/CRM/TaskTags"),{headers:{authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},369:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var a=n(9),c=n(18),r=n.n(c),o=n(2),i=n(35),s=n(4),l=n(0),u=n(386),d=n(20),j=n.n(d),b=n(131),p=n.n(b),f=n(82),h=n(25),m=n.n(h),x=function(){var e=Object(i.a)(r.a.mark((function e(t){var n,a,c=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:"",e.next=3,m.a.get("".concat(t,"/CRM/Search/CRMUsers?query=").concat(n),{headers:{authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}});case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=n(13),g=n(22),v=function(){var e=Object(i.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("".concat(t,"/CRM/Tasks"),n,{headers:{authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=function(e){return e._source&&e._source.doc?e._source.doc:e._source?e._source:e},y=n(368),S=n(200),k=n(116),N=n(281),I=function(){var e=Object(i.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("".concat(t,"/CRM/TaskTags"),n,{headers:{authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=n(129),C=n(1),T=k.a.Option,D=function(e){var t=e.portable,n=e.responsiblesObj,c=e.tagsObj,o=e.deadlineObj,s=e.tagName,l=["magenta","red","volcano","orange","gold","lime","green","cyan","blue","geekblue","purple"],u=n.setSelectedResponsible,d=n.selectedResponsible,j=n.responsibles,b=c.setTagName,p=c.setTags,h=c.setSelectedTags,m=c.tags,x=c.selectedTags,v=o.setDeadline,y=o.deadline,S=o.dateFormat,D=function(){var e=Object(i.a)(r.a.mark((function e(t){var n,c,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"===t.key){e.next=2;break}return e.abrupt("return");case 2:if(n=Math.floor(Math.random()*l.length),c={name:s,color:l[n]},s.replaceAll(" ","").length){e.next=6;break}return e.abrupt("return",Object(g.e)("\u041e\u0448\u0438\u0431\u043a\u0430!","\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u044d\u0433\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"));case 6:return e.next=8,I(O.a,c);case 8:o=e.sent,b((function(e){return""})),p((function(e){return[].concat(Object(a.a)(e),[o])})),h((function(e){return[].concat(Object(a.a)(e),[o.name])}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsxs)(f.f,{portable:t,children:[Object(C.jsx)("div",{children:Object(C.jsx)(k.a,{showSearch:!0,value:"".concat(_(d).surname," ").concat(_(d).name," ").concat(_(d).midname," ").concat(_(d).accountType," ").concat(_(d).id),onChange:function(e){var t=e.split(" ")[4];u((function(e){return j.find((function(e){return e._id===t}))}))},children:j.map((function(e){return Object(C.jsxs)(T,{value:"".concat(_(e).surname," ").concat(_(e).name," ").concat(_(e).midname," ").concat(_(e).accountType," ").concat(_(e).id),children:[_(e).surname," ",_(e).name," ",_(e).midname," ",_(e).accountType]},e._id)}))})}),Object(C.jsx)(f.h,{className:"adaptive-height",children:Object(C.jsx)(k.a,{mode:"multiple",value:x,onInputKeyDown:D,onChange:Object(w.a)(h,"event"),onSearch:Object(w.a)(b,"event"),children:m.map((function(e){return Object(C.jsx)(T,{value:e.name,children:e.name},e._id)}))})}),Object(C.jsx)("div",{className:"background-gray",children:Object(C.jsx)(N.a,{showTime:!0,value:y,placeholder:"\u041a\u043e\u043d\u0435\u0447\u043d\u044b\u0439 \u0441\u0440\u043e\u043a",format:S,onChange:Object(w.a)(v,"event")})})]})},E=function(e){var t=e.setOpenedModal,n=e.setRelTasks,c=e.portable,d=e.setComments,b=e.fio,h=void 0===b?{name:"",surname:""}:b,m=e._id,k=void 0===m?"":m,N=e.filterTasks,I=void 0===N?function(){}:N,T=h.name,E=h.surname,R=Object(l.useState)([]),M=Object(s.a)(R,2),L=M[0],F=M[1],A=Object(l.useState)([]),P=Object(s.a)(A,2),B=P[0],Y=P[1],z=Object(l.useState)([]),G=Object(s.a)(z,2),U=G[0],H=G[1],W=Object(l.useState)(p.a.decode(localStorage.getItem("tokenID"))),q=Object(s.a)(W,2),K=q[0],V=q[1],J=Object(l.useState)(""),$=Object(s.a)(J,2),X=$[0],Q=$[1],Z=Object(l.useState)(!1),ee=Object(s.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(l.useState)(""),ce=Object(s.a)(ae,2),re=ce[0],oe=ce[1],ie=Object(l.useState)(""),se=Object(s.a)(ie,2),le=se[0],ue=se[1],de=Object(l.useState)(j()().get()),je=Object(s.a)(de,2),be=je[0],pe=je[1],fe=Object(l.useState)(0),he=Object(s.a)(fe,2),me=he[0],xe=he[1];Object(l.useEffect)((function(){(function(){var e=Object(i.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(O.a,"");case 2:t=e.sent,n=t.body.hits.hits.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{chosen:_(e).id===_(K).id})})),F((function(e){return n}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[K]),Object(l.useEffect)((function(){return function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.a)(O.a);case 2:t=e.sent,Y((function(e){return t}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),Oe}),[]),Object(l.useEffect)((function(){xe((function(e){return Number(e)}))}),[me]);var Oe=function(){oe((function(e){return""})),ue((function(e){return""})),xe((function(e){return 0})),pe((function(e){return j()().get()})),V((function(e){return p.a.decode(localStorage.getItem("tokenID"))})),H((function(e){return[]})),ne((function(e){return!1})),Q((function(e){return""}))},ge=function(){var e=Object(i.a)(r.a.mark((function e(){var o,i,s,l,u,b;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=c&&2!==me?"".concat((r=me,0===r?"\u0421\u0432\u044f\u0437\u0430\u0442\u044c\u0441\u044f":1===r?"\u0421\u043e\u0437\u0432\u043e\u043d\u0438\u0442\u044c\u0441\u044f":void 0)," \u0441 ").concat(T," ").concat(E):re,i=_(K).id,s=be.toISOString(),l=B.filter((function(e){return U.includes(e.name)})).map((function(e){return e._id})),u={name:o,text:le,deadline:s,responsible:i,tags:l,type:me,for:c?k:void 0},0!==o.replaceAll(" ","").length){e.next=9;break}return e.abrupt("return",Object(g.e)("\u041e\u0448\u0438\u0431\u043a\u0430!","\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0443\u0441\u0442\u043e\u0435"));case 9:if(!be||!be.isBefore(j()().get())){e.next=11;break}return e.abrupt("return",Object(g.e)("\u041e\u0448\u0438\u0431\u043a\u0430!","\u041e\u043a\u043e\u043d\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0441\u0440\u043e\u043a \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0440\u0430\u043d\u044c\u0448\u0435 \u0441\u0435\u0433\u043e\u0434\u043d\u044f\u0448\u043d\u0435\u0439 \u0434\u0430\u0442\u044b"));case 11:return e.next=13,v(O.a,u);case 13:if(b=e.sent,!c){e.next=18;break}return e.next=17,Object(S.a)(O.a,k,{text:"".concat(b.name,"\n ").concat(b.text)});case 17:d((function(e){return[].concat(Object(a.a)(e),[{author:"".concat(b.responsible.surname," ").concat(b.responsible.name," ").concat(b.responsible.midname),content:Object(C.jsxs)("p",{children:[b.name,Object(C.jsx)("br",{}),b.text]}),deadline:b.createdAt}])}));case 18:n((function(e){return c?[].concat(Object(a.a)(e),[b]):I([].concat(Object(a.a)(e),[b]))})),Oe(),ne((function(e){return!1})),c||t((function(e){return!1})),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),Object(g.e)("\u041e\u0448\u0438\u0431\u043a\u0430!","\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a...");case 27:case"end":return e.stop()}var r}),e,null,[[0,24]])})));return function(){return e.apply(this,arguments)}}();return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(f.j,{opened:c?te:c,portable:c,type:me,children:[c?Object(C.jsx)("div",{className:"buttonUp",children:Object(C.jsxs)("button",{onClick:function(){ne((function(e){return!e})),H((function(e){return[]}))},children:[Object(C.jsx)(u.a,{}),"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"]})}):"",Object(C.jsxs)(f.b,{portable:c,children:[Object(C.jsx)("div",{className:"type__select data",children:Object(C.jsxs)("select",{value:me,onChange:Object(w.a)(xe,"event.target.value"),children:[Object(C.jsx)("option",{value:"0",defaultChecked:!0,children:"\u0421\u0432\u044f\u0437\u0430\u0442\u044c\u0441\u044f"}),Object(C.jsx)("option",{value:"1",children:"\u0421\u043e\u0437\u0432\u043e\u043d\u0438\u0442\u044c\u0441\u044f"}),Object(C.jsx)("option",{value:"2",children:"\u0414\u0440\u0443\u0433\u043e\u0435"})]})}),2!==me&&c?Object(C.jsx)("p",{}):Object(C.jsx)("div",{className:"input__title data",children:Object(C.jsx)("input",{placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",type:"text",name:"title",value:re,onChange:Object(w.a)(oe,"event.target.value")})}),Object(C.jsx)("div",{className:"textarea__text data",children:Object(C.jsx)("textarea",{placeholder:"\u0417\u0430\u0434\u0430\u0447\u0430",name:"text",rows:5,value:le,onChange:Object(w.a)(ue,"event.target.value")})}),Object(C.jsx)(D,{portable:c,responsiblesObj:{setSelectedResponsible:V,responsibles:L,selectedResponsible:K},tagName:X,tagsObj:{setSelectedTags:H,setTagName:Q,setTags:Y,tags:B,selectedTags:U},deadlineObj:{setDeadline:pe,deadline:be,dateFormat:["DD/MM/YYYY | HH:mm"]}}),Object(C.jsx)(f.g,{portable:c,children:Object(C.jsx)("button",{onClick:ge,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})})]})]})})}},405:function(e,t,n){},406:function(e,t,n){},407:function(e,t,n){},436:function(e,t,n){},513:function(e,t){},515:function(e,t){},528:function(e,t){},530:function(e,t){},558:function(e,t){},560:function(e,t){},561:function(e,t){},566:function(e,t){},568:function(e,t){},587:function(e,t){},599:function(e,t){},602:function(e,t){},619:function(e,t,n){},623:function(e,t,n){"use strict";n.r(t);var a,c,r,o,i,s=n(0),l=n.n(s),u=n(46),d=n.n(u),j=n(44),b=n(284),p=n(6),f=n(9),h=n(2),m={all_disciplines:["\u041f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","\u0414\u0438\u0437\u0430\u0439\u043d"],selected_subject:void 0,trial_lessons:[],possible_teachers:[],loading:!1,students_for_trial_lesson:[],subject_teachers:[],local_week:{},chosen_teacher:{tutor:{_id:"",surname:"",name:"",midname:""},time:"",index:""},trial_lesson_day:"",all_groups:[],param_filters_groups:{group_name:[],level:[],tutor:[],occupied:[]},all_pupils:[],funnel:[],drop_down_menu_index:{}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"WHEN_CHOOSING_SUBJECT":return Object(h.a)(Object(h.a)({},e),{},{selected_subject:a});case"INSTALL_TRIAL_LESSONS":return Object(h.a)(Object(h.a)({},e),{},{trial_lessons:a});case"ADD_TRIAL_LESSONS":return Object(h.a)(Object(h.a)({},e),{},{trial_lessons:[].concat(Object(f.a)(e.trial_lessons),[a])});case"DELETE_TRIAL_LESSONS":return Object(h.a)(Object(h.a)({},e),{},{trial_lessons:e.trial_lessons.filter((function(e){return e._id!==a}))});case"CHANGE_TRIAL_LESSONS":return Object(h.a)(Object(h.a)({},e),{},{trial_lessons:e.trial_lessons.map((function(e){return e._id===a._id?a:e}))});case"IDENTIFY_POSSIBLE_TEACHERS":return Object(h.a)(Object(h.a)({},e),{},{possible_teachers:a});case"SPECIFY_LOADING":return Object(h.a)(Object(h.a)({},e),{},{loading:a});case"ADD_PUPIL_TO_TRIAL_LESSON":return Object(h.a)(Object(h.a)({},e),{},{students_for_trial_lesson:[].concat(Object(f.a)(e.students_for_trial_lesson),[a])});case"DELETE_PUPIL_TO_TRIAL_LESSON":return Object(h.a)(Object(h.a)({},e),{},{students_for_trial_lesson:e.students_for_trial_lesson.filter((function(e){return e.id!==a}))});case"CLEAR_PUPIL_TO_TRIAL_LESSON":return Object(h.a)(Object(h.a)({},e),{},{students_for_trial_lesson:[]});case"SET_SUBJECT_TEACHERS":return Object(h.a)(Object(h.a)({},e),{},{subject_teachers:a});case"SET_LOCAL_WEEK":return Object(h.a)(Object(h.a)({},e),{},{local_week:a});case"FREE_DAY_FOR_TEACHER":var c=a.time,r=a.day,o=a.tutor,i=JSON.parse(JSON.stringify(e.local_week));return i[c][r].tutors.push(o),Object(h.a)(Object(h.a)({},e),{},{local_week:i});case"SET_CHOSEN_TEACHER":return Object(h.a)(Object(h.a)({},e),{},{chosen_teacher:a});case"SET_TRIAL_LESSON_DAY":return Object(h.a)(Object(h.a)({},e),{},{trial_lesson_day:a});case"INSTALL_ALL_GROUPS":return Object(h.a)(Object(h.a)({},e),{},{all_groups:a});case"ADD_ALL_GROUPS":return Object(h.a)(Object(h.a)({},e),{},{all_groups:[].concat(Object(f.a)(e.all_groups),[a])});case"DELETE_ALL_GROUPS":return Object(h.a)(Object(h.a)({},e),{},{all_groups:e.all_groups.filter((function(e){return e._id!==a}))});case"INSTALL_PARAM_FILTERS_GROUPS":return Object(h.a)(Object(h.a)({},e),{},{param_filters_groups:a});case"INSTALL_ALL_PUPILS":return Object(h.a)(Object(h.a)({},e),{},{all_pupils:a});case"ADD_ALL_PUPILS":return Object(h.a)(Object(h.a)({},e),{},{all_pupils:[].concat(Object(f.a)(e.all_pupils),[a])});case"DELETE_ALL_PUPILS":return Object(h.a)(Object(h.a)({},e),{},{all_pupils:e.all_pupils.filter((function(e){return e._id!==a}))});case"INSTALL_FUNNEL":return Object(h.a)(Object(h.a)({},e),{},{funnel:a});case"DROP_DOWN_MENU_INDEX":return Object(h.a)(Object(h.a)({},e),{},{drop_down_menu_index:Object(p.a)({},a.group_id,a.index)});case"DEFAULT_DROP_DOWN_MENU_INDEX":return Object(h.a)(Object(h.a)({},e),{},{drop_down_menu_index:{}});default:return e}},O=Object(b.d)(x),g=(n(405),n(4)),v=(n(406),n(18)),_=n.n(v),y=n(35),S=n(24),k=(n(407),n(13)),N=n(22),I=n(74),w=n(10),C=n(1),T=n(25),D=w.a.div({height:"500px",button:{fontWeight:"bold",fontSize:"21px",width:"150px",borderRadius:"19px",transition:"0.3s",borderColor:"#007bff",color:"#000","&:hover":{transition:"0.3s",backgroundColor:"#f7d99f"}},label:{fontSize:"24px",fontWeight:"400"},input:{color:"#000",fontSize:"20px"},"input[type=text]":{background:"none"},"input[type=password]":{background:"none"},i:{cursor:"pointer"}}),E=function(e){var t=e.setUser,n=Object(s.useState)({icons:"bi-eye-fill",type:"password"}),o=Object(g.a)(n,2),i=o[0],l=o[1],u=Object(s.useState)(""),d=Object(g.a)(u,2),j=d[0],b=d[1],p=Object(s.useState)(""),f=Object(g.a)(p,2),h=f[0],m=f[1],x=Object(s.useState)("submit"),O=Object(g.a)(x,2),v=O[0],E=O[1],R=Object(s.useState)(""),M=Object(g.a)(R,2),L=M[0],F=M[1],A=Object(s.useState)(""),P=Object(g.a)(A,2),B=P[0],Y=P[1],z=h,G=j,U="1";"button"===v&&(U="0.3");var H=w.a.input(a||(a=Object(S.a)(["\n    border: ",";\n  "])),L),W=w.a.input(c||(c=Object(S.a)(["\n    border: ",";\n  "])),B),q=w.a.button(r||(r=Object(S.a)(["\n    opacity: ",";\n  "])),U),K=new RegExp(/^[\w\d\W]{1,40}$/),V=new RegExp(/^.{1,40}$/),J=function(){var e=Object(y.a)(_.a.mark((function e(n){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(G),m(z),n.preventDefault(),K.test(z)?F(""):F("2px solid red"),V.test(G)?Y(""):Y("2px solid red"),K.test(z)&&V.test(G)&&(E("button"),T({method:"post",url:"".concat(k.a,"/auth"),headers:{"Content-Type":"application/json;charset=utf-8"},data:{login:z,password:G}}).then((function(e){localStorage.setItem("tokenID",e.data.token),b(""),m(""),E("submit"),N.c.fire({icon:"success",title:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u043e\u0448\u043b\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443"}),t(z)})).catch((function(e){e.response&&(Object(I.a)(e.response.status),400===e.response.status?(Object(N.e)("\u041e\u0439..","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"),F("2px solid red"),Y("2px solid red"),E("submit")):E("submit"))})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsx)(D,{className:"LogIn container d-flex align-items-center justify-content-center",children:Object(C.jsx)("form",{onSubmit:J,className:"col-md-8 col-12",children:Object(C.jsxs)("fieldset",{children:[Object(C.jsxs)("div",{className:"mb-3",children:[Object(C.jsx)("label",{htmlFor:"exampleInputEmail1",className:"form-label",children:"\u041b\u043e\u0433\u0438\u043d"}),Object(C.jsx)(H,{required:!0,onChange:function(e){z=e.target.value},defaultValue:h,autoComplete:"current-password",type:"name",className:"form-control",name:"login",id:"exampleInputEmail1"})]}),Object(C.jsxs)("div",{className:"mb-3",children:[Object(C.jsx)("label",{htmlFor:"exampleInputPassword1",className:"form-label",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(C.jsx)(W,{required:!0,onChange:function(e){G=e.target.value},defaultValue:j,autoComplete:"current-password",type:"".concat(i.type),className:"form-control",name:"password",id:"exampleInputPassword1"}),Object(C.jsx)("div",{className:"password-control",children:Object(C.jsx)("div",{className:"d-flex justify-content-end",children:Object(C.jsx)("i",{onClick:function(){b(G),m(z),"bi-eye-fill"===i.icons?l({icons:"bi-eye-slash-fill",type:"text"}):l({icons:"bi-eye-fill",type:"password"})},className:"bi ".concat(i.icons),style:{fontSize:"28px",color:"#F5896C"}})})})]}),Object(C.jsx)(q,{type:v,className:"btn",children:"\u0412\u043e\u0439\u0442\u0438"})]})},"form1")})},R=n(33),M=n(57),L=n(643),F=n(110),A=n(232),P=n(663),B=n(664),Y=n(665),z=n(666),G=n(667),U=n(668),H=n(669),W=n(670),q=n(199),K=function(e,t){if(t.response){for(var n=!0,a=arguments.length,c=new Array(a>2?a-2:0),r=2;r<a;r++)c[r-2]=arguments[r];c.forEach((function(e){"boolean"!==typeof e?e():n=e})),Object(N.a)(t.response.status);var o=t.response,i=o.status,s=o.data;"Bad Request"===s.message&&n?Object(N.e)("\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u043e\u0440\u043e\u043d\u043a\u0443 \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0435\u0441\u0442\u044c \u0443\u0447\u0435\u043d\u0438\u043a"):404==i&&n?Object(N.e)("\u0421\u0435\u0440\u0432\u0435\u0440 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"):401==i?"TOKEN_EXPIRED"==s.message?(Object(q.a)(s.token),e()):(localStorage.removeItem("tokenID"),window.location.replace("/")):500==i&&n?Object(N.e)("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430"):400==i&&n&&Object(N.e)("\u041d\u0435 \u0432\u0435\u0440\u043d\u043e \u0432\u0432\u0435\u0434\u0435\u043d\u044b \u0434\u0430\u043d\u043d\u044b\u0435")}},V=n(25),J=function e(t,n){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=arguments.length,r=new Array(c>3?c-3:0),o=3;o<c;o++)r[o-3]=arguments[o];V({method:"get",url:"".concat(k.a,"/CRM/Search/autocompletion?query=").concat(n).concat(a),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){t(e.data.body.hits.hits),r.forEach((function(e){e()}))})).catch((function(t){K(e,t)}))},$=n(639),X=n(652),Q=w.a.div({height:"30px",input:{height:"30px"},".ant-input-search-button":{paddingBottom:"none"}}),Z=function(e,t,n){var a;return a="pupil"===t.type?"/student/".concat(t.id):"/group/".concat(t.id),{value:e,key:t.id,label:Object(C.jsx)(R.b,{className:"link-info",to:a,onClick:n,style:{display:"flex",justifyContent:"space-between"},children:e})}},ee=function(e){var t,n=e.tutorid,a=void 0===n?"":n,c=Object(s.useState)([]),r=Object(g.a)(c,2),o=r[0],i=r[1],l=Object(s.useState)(""),u=Object(g.a)(l,2),d=u[0],j=u[1],b=function(){i([]),j("")},p=function(e){return Object(C.jsx)("span",{children:e})},f=[{label:p("\u0423\u0447\u0435\u043d\u0438\u043a\u0438"),options:[]},{label:p("\u0413\u0440\u0443\u043f\u043f\u044b"),options:[]}];o.forEach((function(e){if("pupils"===e._index){var t=e._source,n=t.surname,a=t.name,c=t.midname;f[0].options.push(Z("".concat(n," ").concat(a," ").concat(c),e._source,b))}else if("groups"===e._index){var r=e._source.group_name;f[1].options.push(Z(r,e._source,b))}}));var h=function(e){clearTimeout(t),j(e),e?t=setTimeout((function(){!function(e){var t=encodeURI(e);J(i,t,a,[function(){j(e)}])}(e)}),500):(j(""),i([]))};return Object(C.jsx)(Q,{children:Object(C.jsx)($.a,{dropdownClassName:"certain-category-search-dropdown",dropdownMatchSelectWidth:500,options:f,defaultOpen:function(){return!!d},value:d,onSearch:function(e){h(e)},id:"Search",children:Object(C.jsx)(X.a,{size:"large",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e CRM"})})})},te=n(385),ne=n(644),ae=n(20),ce=n.n(ae),re=function(e){var t=ce()(e).format("YYYY-MM-DD"),n=ce()().diff(t,"years");return n||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"},oe=n(230),ie=(n(301),Math.round(document.documentElement.clientHeight/55)-2),se=function(e){var t=e.offset,n=e.setOffset,a=e.getItem,c=e.count,r=w.a.div({margin:"3px 3px 20px 3px",".ant-pagination-item-link":{height:"34px"}});return Object(C.jsx)(r,{children:Object(C.jsx)(oe.a,{defaultPageSize:ie,defaultCurrent:t/ie+1,total:c,showSizeChanger:!1,onChange:function(e){n((e-1)*ie),a((e-1)*ie)}})})},le=n(173),ue=n(25),de=n.n(ue),je=function(){var e=Object(y.a)(_.a.mark((function e(t){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(le.b)(k.a,8);case 2:n=e.sent,t(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},o={};for(var i in a)o.groups||(o.groups=[]),o.groups.push(i);for(var s in n)n[s][0]&&("surname"===s||"name"===s||"midname"===s||"dateOfBirth"===s?o["".concat(s,"s")]=n[s]:o["".concat(s)]=n[s]);if(o.ages){var l=Object(f.a)(o.ages);o.ages=[],l.forEach((function(e){o.ages.push(+e)}))}if(o.balance){var u=Object(f.a)(o.balance);1==u[0]&!u[1]?o.balance={$gte:0}:2==u[0]&!u[1]?o.balance={$lt:0}:u[1]&&(o.balance={$gte:0,$lte:0})}var d={filters:o};de()({method:"post",url:"".concat(k.a,"/CRM/Pupils/find?limit=").concat(ie,"&offset=").concat(t),headers:{"Content-Type":"application/jsoncharset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:d}).then((function(e){var t=e.data,n=e.headers;c(t),r(n.count)})).catch((function(t){K(e,t)}))},pe=function(){var e=Object(y.a)(_.a.mark((function e(t,n,a,c,r){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(t._id),de()({method:"DELETE",url:"".concat(k.a,"/CRM/Pupils/").concat(t._id),headers:{"Content-Type":"application/jsoncharset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).catch((function(e){K((function(){pe(t,n,a,c,r)}),e,(function(){r(t)}))}));case 2:case"end":return e.stop()}}),e)})));return function(t,n,a,c,r){return e.apply(this,arguments)}}(),fe=function(){var e=Object(y.a)(_.a.mark((function e(t){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de()({method:"get",url:"".concat(k.a,"/CRM/Pupils/").concat(t),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){return n=e.data}));case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=(n(436),function(e){return{type:"SET_TRIAL_LESSON_DAY",payload:e}}),me=function(e){return{type:"INSTALL_ALL_GROUPS",payload:e}},xe=function(e){return{type:"ADD_ALL_PUPILS",payload:e}},Oe=n(116),ge=n(647),ve=n(62),_e=n(650),ye=n(281),Se=n(176),ke=n.n(Se),Ne="\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u044d\u0442\u043e \u043f\u043e\u043b\u0435!",Ie=function(e){var t=e.label,n=e.name,a=e.required,c=void 0===a||a;return Object(C.jsx)(ge.a.Item,{label:t,name:n,rules:[{required:c,message:Ne}],children:"dateOfBirth"===n?Object(C.jsx)(ye.a,{placeholder:"\u0433\u0433\u0433\u0433-\u043c\u043c-\u0434\u0434",allowClear:!1}):Object(C.jsx)(X.a,{})})},we=function(e){var t=e.label,n=e.name,a=e.required,c=void 0===a||a;return Object(C.jsx)(ge.a.Item,{label:t,name:n,rules:[{required:c,message:Ne}],children:Object(C.jsx)(ke.a,{autoComplete:"off",type:"tel",name:"tel",className:"form-control",mask:"+9 (999) 999-99-99"})})},Ce={add_all_pupils:xe},Te=function e(t,n,a,c,r){n(!0),de()({method:"post",url:"".concat(k.a,"/CRM/Pupils"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:Object(h.a)(Object(h.a)({},t),{},{dateOfBirth:t.dateOfBirth.toISOString(),parentPhones:[t.parentPhone]})}).then((function(e){a(!1),n(!1),c(e.data),r.resetFields(),Object(N.f)("\u0423\u0447\u0435\u043d\u0438\u043a \u0441\u043e\u0437\u0434\u0430\u043d")})).catch((function(a){K((function(){return e(t)}),a,(function(){return n(!1)}))}))},De=Oe.a.Option,Ee=Object(j.b)((function(e){return{funnel:e.funnel}}),Ce)((function(e){var t=e.funnel,n=e.add_all_pupils,a=ge.a.useForm(),c=Object(g.a)(a,1)[0],r=Object(s.useState)(!1),o=Object(g.a)(r,2),i=o[0],l=o[1],u=Object(s.useState)(!1),d=Object(g.a)(u,2),j=d[0],b=d[1],p=function(e,t){return t(!e)};return Object(C.jsxs)("div",{children:[Object(C.jsx)(ve.a,{type:"primary",onClick:function(){p(i,l)},children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0443\u0447\u0435\u043d\u0438\u043a\u0430"}),Object(C.jsx)(_e.a,{width:800,title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0435\u043d\u0438\u043a\u0430",visible:i,onCancel:function(){p(i,l),c.resetFields()},footer:!1,children:Object(C.jsxs)(ge.a,{form:c,name:"basic",labelCol:{span:8},wrapperCol:{span:16},onFinish:function(e){Te(e,b,l,n,c)},autoComplete:"off",initialValues:{surname:"",name:"",midname:"",gender:"",phone:"",parentPhone:"",parentFullname:"",discord:"",salesFunnelStep:"",dateOfBirth:""},children:[Object(C.jsx)(Ie,{label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",name:"surname"}),Object(C.jsx)(Ie,{label:"\u0418\u043c\u044f",name:"name"}),Object(C.jsx)(Ie,{label:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",name:"midname"}),Object(C.jsx)(Ie,{label:"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f",name:"dateOfBirth"}),Object(C.jsx)(ge.a.Item,{name:"gender",label:"\u041f\u043e\u043b",rules:[{required:!0,message:Ne}],children:Object(C.jsxs)(Oe.a,{placeholder:"\u041c\u0430\u043b\u044c\u0447\u0438\u043a \u0438\u043b\u0438 \u0434\u0435\u0432\u043e\u0447\u043a\u0430?",allowClear:!0,children:[Object(C.jsx)(De,{value:"\u041c\u0443\u0436\u0441\u043a\u043e\u0439",children:"\u041c\u0430\u043b\u044c\u0447\u0438\u043a"}),Object(C.jsx)(De,{value:"\u0416\u0435\u043d\u0441\u043a\u0438\u0439",children:"\u0414\u0435\u0432\u043e\u0447\u043a\u0430"})]})}),Object(C.jsx)(we,{label:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0440\u0435\u0431\u0451\u043d\u043a\u0430",name:"phone",required:!1}),Object(C.jsx)(we,{label:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f",name:"parentPhone"}),Object(C.jsx)(Ie,{label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f, \u0438\u043c\u044f, \u043e\u0442\u0447\u0435\u0441\u0442\u0432\u043e \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f",name:"parentFullname"}),Object(C.jsx)(Ie,{label:"\u0414\u0438\u0441\u043a\u043e\u0440\u0434 nik-name",name:"discord",required:!1}),Object(C.jsx)(ge.a.Item,{name:"salesFunnelStep",label:"\u042d\u0442\u0430\u043f \u0432 \u0432\u043e\u0440\u043e\u043d\u043a\u0435 \u043f\u0440\u043e\u0434\u0430\u0436",rules:[{required:!0,message:Ne}],children:Object(C.jsx)(Oe.a,{allowClear:!0,children:t.map((function(e){return Object(C.jsx)(De,{value:e._id,children:e.name},e._id)}))})}),Object(C.jsxs)(ge.a.Item,{className:"submit",wrapperCol:{offset:8,span:16},children:[Object(C.jsx)(ve.a,{style:{marginRight:"10px"},onClick:function(){p(i,l),c.resetFields()},children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"}),Object(C.jsx)(ve.a,{type:"primary",htmlType:"submit",loading:j,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})})]})})),Re=[1020,700].map((function(e){return"@media (max-width: ".concat(e,"px)")})),Me=w.a.div((o={padding:"0 30px"},Object(p.a)(o,Re[1],{padding:"0 0"}),Object(p.a)(o,".log_h2",{}),Object(p.a)(o,"td",{paddingTop:"1px",paddingBottom:"4px"}),Object(p.a)(o,"th, td",{whiteSpace:"nowrap"}),o)),Le={setUsers:function(e){return{type:"INSTALL_ALL_PUPILS",payload:e}},setFunnel:function(e){return{type:"INSTALL_FUNNEL",payload:e}},delete_all_pupils:function(e){return{type:"DELETE_ALL_PUPILS",payload:e}},add_all_pupils:xe},Fe=Object(j.b)((function(e){return{users:e.all_pupils,funnel:e.funnel}}),Le)((function(e){var t=e.users,n=e.setUsers,a=e.setFunnel,c=e.delete_all_pupils,r=e.add_all_pupils,o=Object(s.useState)(0),i=Object(g.a)(o,2),l=i[0],u=i[1],d=Object(s.useState)(0),j=Object(g.a)(d,2),b=j[0],p=j[1];Object(s.useEffect)((function(){be(0,{},{},n,p),je(a)}),[]),Object(s.useEffect)((function(){document.querySelectorAll("input").forEach((function(e){e.value=""})),document.querySelectorAll("select").forEach((function(e){e.value=""}))}));var f=[];t.forEach((function(e){var t=e._id,n=e.parentFullname,a=e.statuses,o=e.surname,i=e.name,s=e.midname,u=e.dateOfBirth,d=e.gender,j=e.phone,b=e.balance,p=e.parentPhone,h=e.discord,m=e.groups;f.push({key:t,trash:function(){pe(e,be,l,c,r)},surname:function(){return Object(C.jsx)(R.b,{className:"link-info",to:"/student/".concat(t),children:o})},name:i,midname:s,dateOfBirth:re(u),gender:d,phoneNumber:j,tutor:"",parentPhoneNumber:p.join(", "),parentFullname:n,balance:"".concat(b),groups:m||[],discordNickname:h,statuses:a})}));var m=function(e,t){return{title:e,dataIndex:t,key:t}},x=[{title:"",dataIndex:"trash",key:"trash",render:function(e){if(e)return Object(C.jsx)("i",{onClick:e,className:"bi bi-trash",style:{fontSize:"30px",color:"#F56767",cursor:"pointer"}})}},Object(h.a)(Object(h.a)({},m("\u0424\u0430\u043c\u0438\u043b\u0438\u044f","surname")),{},{render:function(e){if("function"==typeof e)return e()}}),Object(h.a)({},m("\u0418\u043c\u044f","name")),Object(h.a)({},m("\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e","midname")),Object(h.a)({},m("\u0412\u043e\u0437\u0440\u0430\u0441\u0442","dateOfBirth")),Object(h.a)({},m("\u041f\u043e\u043b","gender")),Object(h.a)(Object(h.a)({},m("\u0421\u0442\u0430\u0442\u0443\u0441\u044b","statuses")),{},{render:function(e){if(e)return e.map((function(e){var t=e.color,n=e._id,a=e.name;return Object(C.jsx)(te.a,{color:t,children:a},n)}))}}),Object(h.a)({},m("\u0424\u0418\u041e \u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044f","parentFullname")),Object(h.a)({},m("\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430","phoneNumber")),Object(h.a)({},m("\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f","parentPhoneNumber")),Object(h.a)({},m("\u0411\u0430\u043b\u0430\u043d\u0441","balance")),Object(h.a)(Object(h.a)({},m("\u0413\u0440\u0443\u043f\u043f\u044b","groups")),{},{render:function(e){if("function"==typeof e.map)return Object(C.jsx)(C.Fragment,{children:e.map((function(e){return Object(C.jsx)(te.a,{color:"blue",children:e.group_name},"".concat(e._id))}))})}}),Object(h.a)({},m("\u0414\u0438\u0441\u043a\u043e\u0440\u0434 \u043d\u0438\u043a\u043d\u0435\u0439\u043c","discordNickname"))];return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("nav",{id:"navbar-student",className:"navbar navbar-expand-lg navbar-light",children:Object(C.jsx)("div",{className:"container-fluid d-flex",children:Object(C.jsxs)("div",{className:"collapse d-flex flex-row h3-person",children:[Object(C.jsx)("div",{className:"d-flex plus-box",children:Object(C.jsx)("div",{children:Object(C.jsx)("h3",{children:"\u0423\u0447\u0435\u043d\u0438\u043a\u0438"})})}),Object(C.jsx)(Ee,{})]})})}),Object(C.jsx)(Me,{className:"",children:Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{className:"table_user",children:Object(C.jsx)(ne.a,{pagination:!1,dataSource:f,columns:x,scroll:{x:0}})}),Object(C.jsx)(se,{getItem:function(e){be(e,{},{},n,p)},count:b,offset:l,setOffset:u})]})})]})})),Ae=n(226),Pe=n(658),Be=n(25),Ye=function(e,t,n,a,c,r){var o=a?"/CRM/Pupils/".concat(t,"/Payment?subscription=").concat(a,"&group_id=").concat(c):"/CRM/Pupils/".concat(t,"/Payment?amount=").concat(+e);Be({method:"post",url:"".concat(k.a).concat(o),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){n(e.data)})).catch((function(e){K((function(){}),e,r,n,(function(){Object(N.e)("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0431\u0430\u043b\u0430\u043d\u0441","\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430")}))}))},ze=w.a.div({margin:"0 3px 0 0",position:"initial",button:{fontSize:"15px",fontWeight:"600",padding:"1px 7px",width:"104px"},".btnAbic":{width:"100%"},ul:{border:"none",background:"rgba(0, 0, 0, 0.3)",padding:"6px"},".li":{border:"none",background:"rgba(0, 0, 0, 0)",span:{borderRadius:"6px",fontWeight:"500",cursor:"pointer"},".input-group-text":{margin:"0",borderRadius:"6px 0 0 6px"},textarea:{padding:"2px 7px",fontWeight:"500"}}}),Ge=[780,1380,2002].map((function(e){return"@media (max-width: ".concat(e,"px)")})),Ue=w.a.div({borderBottom:"1px solid #91A8B0",paddingBottom:"5px",marginBottom:"5px",i:{color:"#17a2b8",fontSize:"26px",cursor:"pointer",paddingTop:"10px"},".global-fon3000":{position:"fixed",top:"0",left:"0",zIndex:"99",height:"100vh",background:"rgba(0, 0, 0, 0.6)",overflowY:"scroll",i:{position:"fixed",top:"3px",left:"7px",color:"#fff"},".bi-trash":{display:"none"}},h4:{display:"inline-block",marginRight:"10px",marginBottom:"19px"},".fixedSchedule-H":{maxHeight:"81px",overflow:"hidden"},".scheblueFixet":{margin:"0 auto",marginTop:"50px",width:"86%"},".fixedSchedule-H, .scheblueFixet":(i={overflow:"hidden",width:"2476px"},Object(p.a)(i,Ge[2],{width:"1857px"}),Object(p.a)(i,Ge[1],{width:"1238px"}),Object(p.a)(i,Ge[0],{width:"619px"}),i),".boxDay":{overflowX:"auto",padding:"0 0 10px 0","&::-webkit-scrollbar":{height:"10px",backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:"10px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#17a2b8",borderRadius:"10px"}}}),He=n(25),We=function(e){var t=e.itemG,a=e.dataGroup,c=e.getGroup_Id,r=e.setData,o=e.surname,i=e.name,l=e.pageInfo,u=e.type,d=e.set_drop_down_menu_index,j=e.drop_down_menu_index,b=Object(s.useState)(["fixedSchedule-H","","bi-plus-circle"]),p=Object(g.a)(b,2),h=p[0],m=p[1],x=t.localSchedule["".concat(a)]?t.localSchedule["".concat(a)]:[],O=Object(s.useState)(x),v=Object(g.a)(O,2),_=v[0],y=v[1],S=Object(s.useRef)(),T=function e(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};He({method:"post",url:"".concat(k.a,"/CRM/Pupils/").concat(t._id,"/Notes"),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:{text:n}}).then((function(){a()})).catch((function(t){K((function(){e(n,a)}),t,c)}))},D=Object(s.useState)([]),E=Object(g.a)(D,2),M=E[0],L=E[1],A=function e(){He({method:"get",url:"".concat(k.a,"/CRM/Subscriptions"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){L(e.data)})).catch((function(t){K(e,t)}))},P=function e(n){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};He({method:"put",url:"".concat(k.a,"/CRM/Groups/").concat(a,"/Pupils/").concat(t._id,"/Schedule"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:n}).then((function(){c()})).catch((function(t){K((function(){e(n,c)}),t)}))},B=M.map((function(e,n){return Object(C.jsx)(F.a.Item,{className:"li",children:Object(C.jsx)("span",{onClick:function(){for(var n=Object(f.a)(_),c=0,o=0;c<e.hoursCount;)n[o].paid||1===n[o].status||(n[o].paid=!0,c++),o++;P(n,(function(){Ye("-".concat(e.price),t._id,r,e._id,a,(function(){P(n)}))})),y(n)},className:"dropdown-item bg-info text-light",children:e.name})},n)})),Y=Object(C.jsx)(F.a,{children:B});Object(s.useEffect)((function(){A()}),[]);var z=1,G=_.map((function(e,t){var n=0;8===z?(n=27,z=1):z+=1;var c=ce()(e.date,"DD.MM.YYYY").format("DD.MM"),r="#f8f9fa",o="1",i=ce()(e.date,"DD.MM.YYYY").format("YYYY-MM-DD"),s=ce()().diff(i,"day");1===e.status?r="#000":e.paid&&3!==e.status&&s<=0?r="#17a2b8":3===e.status&&s<=0?r="#6c757d":3===e.status&&e.paid?r="#dc3545":s>0&&e.paid?r="#28a745":s>0&&!e.paid&&3!==e.status?(r="#28a745",o="0.5"):s>0&&!e.paid&&3===e.status&&(r="#dc3545",o="0.5");var l=function(e){var n=Object(f.a)(_),a=function(){n[t].status=e,P(n),y(n)};1===e||2===e||3===e&&s<0||1===e?a():3!==e&&2!==e&&1!==e?(n[t].title=e,T(e,(function(){P(n)})),y(n)):Object(N.e)("\u041d\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441")},u=w.a.span({marginRight:"".concat(n,"px")}),b=e.title,p="",h="#1890ff";e.title?p="#ffc107":1===e.status&&(p="#fff",h="#ffc107"),3===e.status&&(h="#fff");var m=Object(C.jsxs)(F.a,{children:[Object(C.jsx)(F.a.Item,{children:Object(C.jsx)("span",{onClick:function(){l(3)},className:"dropdown-item bg-secondary text-light",children:"\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u043b"})},"".concat(c,"1")),Object(C.jsx)(F.a.Item,{children:Object(C.jsx)("span",{onClick:function(){l(2)},className:"dropdown-item bg-success text-light",children:"\u0423\u0440\u043e\u043a \u043f\u0440\u043e\u0439\u0434\u0435\u043d"})},"".concat(c,"2")),Object(C.jsx)(F.a.Item,{children:Object(C.jsx)("span",{style:{background:"#000"},onClick:function(){l(1)},className:"dropdown-item text-light",children:"\u0423\u0440\u043e\u043a\u0430 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442/\u043d\u0435 \u0431\u044b\u043b\u043e"})},"".concat(c,"4")),Object(C.jsx)(F.a.Item,{children:Object(C.jsxs)("div",{className:"input-group",children:[Object(C.jsx)("span",{onClick:function(){b?(l(b),d("",a)):S.current.focus()},className:"input-group-text bg-info text-light",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(C.jsx)("textarea",{ref:S,placeholder:"\u041e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0443...",defaultValue:b,onChange:function(e){b=e.target.value},className:"form-control","aria-label":"With textarea"})]})},"".concat(c,"3"))]},c),x=!1;return j[a]===t?x=!0:j[a]||(x=!1),Object(C.jsx)(u,{children:Object(C.jsx)(ze,{className:"btn-group",children:Object(C.jsx)(Ae.a,{overlay:m,visible:x,trigger:["click"],children:Object(C.jsxs)("button",{type:"button",style:{color:"".concat(p),background:"".concat(r),opacity:"".concat(o)},className:"btn dropdown-toggle",onClick:function(){j[a]===t?d("",a):d(t,a)},children:[c," ",Object(C.jsx)("span",{className:"ant-dropdown-trigger-span",style:{color:h},children:e.duration[0]})]})})})},"".concat(c).concat(t))})),U=t._id,H="student";l&&(H=l,U=a);var W=Object(C.jsx)(R.b,{to:"/".concat(H,"/").concat(U),children:Object(C.jsx)("h4",{children:"".concat(o," ").concat(i)})}),q="";"teacher"!==n(131).decode(localStorage.getItem("tokenID")).accountType&&(q=Object(C.jsx)("span",{children:Object(C.jsx)(ze,{className:"btn-group",children:Object(C.jsx)(Ae.a,{overlay:Y,trigger:["click"],children:Object(C.jsx)("button",{type:"button",className:"btn btn-success dropdown-toggle btnAbic",children:"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c"})})})}));return Object(C.jsx)(Ue,{className:"table",children:Object(C.jsxs)("div",{className:"pupils-item row",children:[Object(C.jsxs)("div",{className:"col-12",children:[W,q]}),Object(C.jsxs)("div",{className:"col-12".concat(h[1]),children:[Object(C.jsx)("div",{className:"boxDay",children:Object(C.jsx)("div",{className:"".concat(h[0]),children:G})}),Object(C.jsx)("i",{onClick:function(){"fixedSchedule-H"===h[0]?m(["scheblueFixet"," global-fon3000","bi-x-circle"]):m(["fixedSchedule-H","","bi-plus-circle"])},className:"bi ".concat(h[2])}),Object(C.jsx)(Pe.a,{title:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435",content:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0443\u0447\u0435\u043d\u0438\u043a\u0430 \u0438\u0437 \u0433\u0440\u0443\u043f\u043f\u044b",placement:"right",trigger:"hover",children:Object(C.jsx)("i",{onClick:function(){He({method:"delete",url:"".concat(k.a,"/CRM/Groups/").concat(a,"/Pupils/").concat(t._id),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){var t=e.data,n=t.group,a=t.pupil;"group"===u?r(n):"pupil"===u&&r(a)})).catch((function(e){e.response&&Object(I.a)(e.response.status)}))},className:"bi bi-trash",style:{color:"rgb(245, 103, 10",marginLeft:"10px"}})})]})]})},t._id)};We.defaultProps={surname:""};var qe,Ke,Ve,Je,$e,Xe,Qe,Ze,et,tt,nt,at,ct,rt,ot,it,st,lt={set_drop_down_menu_index:function(e,t){return{type:"DROP_DOWN_MENU_INDEX",payload:{index:e,group_id:t}}}},ut=Object(j.b)((function(e){return{drop_down_menu_index:e.drop_down_menu_index}}),lt)(We),dt=n(661),jt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pupils",a=[];e.forEach((function(e){e._index===n&&a.push(e._source)})),t(a)},bt=function e(t,n,a){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};c(),de()({method:"post",url:"".concat(k.a,"/CRM/Groups/").concat(t,"/Pupils"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:{ids:[n]}}).then((function(e){a(e.data)})).catch((function(t){K(e,t)}))},pt=function(e){var t=e.data,n=e.updatePage,a=Object(M.f)().id,c=t.groups,r=Object(s.useState)(!1),o=Object(g.a)(r,2),i=o[0],l=o[1],u=Object(s.useState)(""),d=Object(g.a)(u,2),j=d[0],b=d[1],p=Object(s.useState)([]),m=Object(g.a)(p,2),x=m[0],O=m[1],v=x.map((function(e){var r=e.group_name,o=e.id;return Object(C.jsx)("li",{style:{fontSize:"18px"},onClick:function(){bt(o,a,(function(e){Object(N.f)("\u0423\u0447\u0435\u043d\u0438\u043a \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u0433\u0440\u0443\u043f\u043f\u0443"),l(!1),n(Object(h.a)(Object(h.a)({},t),{},{groups:[].concat(Object(f.a)(c),[e])}))}),N.d)},className:"list-group-item",children:Object(C.jsx)("span",{className:"badge bg-warning text-dark",children:"".concat(r)})},o)})),_=c.map((function(e){return Object(C.jsx)("span",{className:"badge bg-light text-dark",children:e.group_name},e._id)}));return Object(C.jsxs)(C.Fragment,{children:[_,Object(C.jsx)(dt.a,{onClick:function(){!function(e){e(!0)}(l)},style:{color:"rgb(23, 162, 184)",fontSize:"23px"}}),Object(C.jsx)(_e.a,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443",visible:i,onOk:function(){!function(e){e(!1)}(l)},onCancel:function(){!function(e){e(!1)}(l)},children:Object(C.jsx)("div",{children:Object(C.jsx)("div",{className:"row addPUPILS",children:Object(C.jsxs)("div",{className:"input-group",children:[Object(C.jsx)(X.a,{placeholder:"\u041d\u0430\u0439\u0442\u0438 \u0433\u0440\u0443\u043f\u043f\u044b...",onChange:function(e){b(e.target.value),J((function(e){jt(e,O,"groups")}),encodeURI(e.target.value))},value:j}),Object(C.jsx)("ul",{className:"list-group list-group-flush",children:v})]})})})})]})},ft=w.a.ul({marginLeft:"10px",".ant-picker":{span:{margin:"0"}},".ant-picker-input":{input:{width:"127px"}}}),ht=w.a.li(qe||(qe=Object(S.a)(["\n  padding: 0.5rem 1.25rem;\n"]))),mt=function(e){var t=e.dataStudent,a=e.updetePage,c={},r=n(25),o=Object(s.useState)(""),i=Object(g.a)(o,2),l=i[0],u=i[1],d=t.name,j=t.surname,b=t.midname,p=t.gender,f=t.parentFullname,h=t.dateOfBirth,m=t.phone,x=t.parentPhone,O=t.discord,v=t.createdAt,_=t._id,y=function(){Object(N.d)("\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f","\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435"),r({method:"patch",url:"".concat(k.a,"/CRM/Pupils/").concat(_),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:c}).then((function(e){a(e.data),Object(N.b)(),N.c.fire({icon:"success",title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b"})})).catch((function(e){e.response&&Object(I.a)(e.response.status)}))},S=Object(C.jsxs)(F.a,{children:[Object(C.jsx)(F.a.Item,{children:Object(C.jsx)("input",{placeholder:"\u041f\u043e\u043c\u0435\u043d\u044f\u0442\u044c \u0444\u0430\u043c\u0438\u043b\u0438\u044e",onChange:function(e){c={surname:"".concat(e.target.value)}},type:"name",className:"text-dark form-control col-12"})}),Object(C.jsx)(F.a.Item,{children:Object(C.jsx)("span",{onClick:function(){u(""),y()},className:"badge bg-warning text-dark save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),w=Object(C.jsxs)(F.a,{children:[Object(C.jsx)(F.a.Item,{children:Object(C.jsx)("input",{placeholder:"\u041d\u043e\u0432\u043e\u0435 \u0438\u043c\u044f",onChange:function(e){c={name:"".concat(e.target.value)}},type:"name",className:"text-dark form-control col-12"})}),Object(C.jsx)(F.a.Item,{children:Object(C.jsx)("span",{onClick:function(){u(""),y()},className:"badge bg-warning text-dark save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),T=Object(C.jsxs)(F.a,{children:[Object(C.jsx)(F.a.Item,{children:Object(C.jsx)("input",{placeholder:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u0435...",onChange:function(e){c={midname:"".concat(e.target.value)}},type:"name",className:"text-dark form-control col-12"})}),Object(C.jsx)(F.a.Item,{children:Object(C.jsx)("span",{onClick:function(){y(),u("")},className:"badge bg-warning text-dark save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),D=Object(C.jsxs)(F.a,{children:[Object(C.jsx)(F.a.Item,{children:Object(C.jsx)(ke.a,{mask:"+9 (999) 999-99-99",placeholder:"\u041d\u043e\u0432\u044b\u0439 \u043d\u043e\u043c\u0435\u0440",onChange:function(e){c={parentPhone:["".concat(e.target.value)]}},type:"name",className:"text-dark form-control col-12"})}),Object(C.jsx)(F.a.Item,{children:Object(C.jsx)("span",{onClick:function(){y(),u("")},className:"badge bg-warning text-dark save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),E=Object(C.jsxs)(F.a,{children:[Object(C.jsx)(F.a.Item,{children:Object(C.jsx)(ke.a,{mask:"+9 (999) 999-99-99",placeholder:"\u041d\u043e\u0432\u044b\u0439 \u043d\u043e\u043c\u0435\u0440",onChange:function(e){c={phone:"".concat(e.target.value)}},type:"name",className:"text-dark form-control col-12"})}),Object(C.jsx)(F.a.Item,{children:Object(C.jsx)("span",{onClick:function(){y(),u("")},className:"badge bg-warning text-dark save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),R=Object(C.jsxs)(F.a,{children:[Object(C.jsx)(F.a.Item,{children:Object(C.jsx)("input",{placeholder:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c NickName",onChange:function(e){c={discord:"".concat(e.target.value)}},type:"name",className:"text-dark form-control col-12"})}),Object(C.jsx)(F.a.Item,{children:Object(C.jsx)("span",{onClick:function(){y(),u("")},className:"badge bg-warning text-dark save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]});return Object(C.jsxs)(ft,{className:"list-group list-group-flush",children:[Object(C.jsxs)(ht,{className:"list-group-item",children:["\u0424\u0430\u043c\u0438\u043b\u0438\u044f:",Object(C.jsx)("span",{className:"badge bg-warning text-dark",children:j}),Object(C.jsx)("div",{className:"btn-group",children:Object(C.jsx)(Ae.a,{overlay:S,visible:function(){return"Surname"===l},trigger:["click"],children:Object(C.jsx)("i",{className:"bi bi-pencil",onClick:function(){u("Surname"===l?"":"Surname")},style:{fontSize:"20px",color:"#17a2b8",cursor:"pointer"}})})})]}),Object(C.jsxs)(ht,{className:"list-group-item",children:["\u0418\u043c\u044f: ",Object(C.jsx)("span",{className:"badge bg-warning text-dark",children:d}),Object(C.jsx)("div",{className:"btn-group",children:Object(C.jsx)(Ae.a,{overlay:w,visible:function(){return"Name"===l},trigger:["hover"],children:Object(C.jsx)("i",{onClick:function(){u("Name"===l?"":"Name")},className:"bi bi-pencil",style:{fontSize:"20px",color:"#17a2b8",cursor:"pointer"}})})})]}),Object(C.jsxs)(ht,{className:"list-group-item",children:["\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e: ",Object(C.jsx)("span",{className:"badge bg-warning text-dark",children:b}),Object(C.jsx)("div",{className:"btn-group",children:Object(C.jsx)(Ae.a,{overlay:T,visible:function(){return"Midname"===l},trigger:["hover"],children:Object(C.jsx)("i",{className:"bi bi-pencil",onClick:function(){u("Midname"===l?"":"Midname")},style:{fontSize:"20px",color:"#17a2b8",cursor:"pointer"}})})})]}),Object(C.jsxs)(ht,{className:"list-group-item",children:["\u0412\u043e\u0437\u0440\u0430\u0441\u0442:"," ",Object(C.jsx)("span",{className:"badge bg-success text-light",children:re(h)}),Object(C.jsx)(ye.a,{onChange:function(e){c={dateOfBirth:e._d.toISOString()},y()},placeholder:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0432\u043e\u0437\u0440\u0430\u0441\u0442"})]}),Object(C.jsxs)(ht,{className:"list-group-item",children:["\u041f\u043e\u043b: ",Object(C.jsx)("span",{className:"badge bg-success text-light",children:p})]}),Object(C.jsxs)(ht,{className:"list-group-item",children:["\u0424\u0418\u041e \u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044f:"," ",Object(C.jsx)("span",{className:"badge bg-success text-light",children:f})]}),Object(C.jsxs)(ht,{className:"list-group-item",children:["\u0414\u0430\u0442\u0430 \u0437\u0430\u043f\u0438\u0441\u0438 \u0443\u0447\u0435\u043d\u0438\u043a\u0430:"," ",Object(C.jsx)("span",{className:"badge bg-info text-light",children:v?ce()(v).format("DD - MMMM - YYYY, HH:MM"):""})]}),Object(C.jsxs)(ht,{className:"list-group-item",children:["\u041d\u043e\u043c\u0435\u0440 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f:"," ",Object(C.jsx)("span",{className:"badge bg-info text-light",children:x}),Object(C.jsx)("div",{className:"btn-group",children:Object(C.jsx)(Ae.a,{overlay:D,visible:function(){return"ParentPhone"===l},children:Object(C.jsx)("i",{className:"bi bi-pencil",onClick:function(){u("ParentPhone"===l?"":"ParentPhone")},style:{fontSize:"20px",color:"#17a2b8",cursor:"pointer"}})})})]}),Object(C.jsxs)(ht,{className:"list-group-item",children:["\u041d\u043e\u043c\u0435\u0440 \u0443\u0447\u0435\u043d\u0438\u043a\u0430:"," ",Object(C.jsx)("span",{className:"badge bg-warning text-dark",children:m}),Object(C.jsx)("div",{className:"btn-group",children:Object(C.jsx)(Ae.a,{overlay:E,visible:function(){return"Phone"===l},children:Object(C.jsx)("i",{className:"bi bi-pencil",onClick:function(){u("Phone"===l?"":"Phone")},style:{fontSize:"20px",color:"#17a2b8",cursor:"pointer"}})})})]}),Object(C.jsxs)(ht,{className:"list-group-item",children:["Discord: ",Object(C.jsx)("span",{className:"badge bg-light text-dark",children:O}),Object(C.jsx)("div",{className:"btn-group",children:Object(C.jsx)(Ae.a,{className:"Discord",overlay:R,visible:function(){return"Discord"===l},children:Object(C.jsx)("i",{className:"bi bi-pencil",onClick:function(){u("Discord"===l?"":"Discord")},style:{fontSize:"20px",color:"#17a2b8",cursor:"pointer"}})})})]}),Object(C.jsxs)(ht,{className:"list-group-item",children:["\u0413\u0440\u0443\u043f\u043f\u044b: ",Object(C.jsx)(pt,{data:t,updatePage:a})]})]})},xt=w.a.span({borderRadius:"6px",fontWeight:"500",cursor:"pointer",fontSize:"14px"}),Ot=w.a.div(Ke||(Ke=Object(S.a)(["\n  padding: 0;\n  h6 {\n    font-size: 1.25rem;\n  }\n"]))),gt=function(e){var t=e.balance_item,n=e.pageStudent_id,a=e.updeteStudent,c=Object(s.useState)(!1),r=Object(g.a)(c,2),o=r[0],i=r[1],l=Object(s.useState)(t),u=Object(g.a)(l,2),d=u[0],j=u[1],b=0,p=function(){j(d)},f=Object(C.jsxs)(F.a,{children:[Object(C.jsx)(F.a.Item,{children:Object(C.jsx)("input",{placeholder:"\u041f\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u044c",onChange:function(e){b=e.target.value},type:"number",className:"text-info form-control col-12"})}),Object(C.jsx)(F.a.Item,{children:Object(C.jsx)(xt,{onClick:function(){i(!o),j(+d+ +b),Ye(b,n,a,void 0,void 0,p)},className:"badge bg-warning text-dark",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]});return Object(C.jsxs)(Ot,{className:"balance",children:[Object(C.jsxs)("h6",{className:"calendar badge bg-success text-light",children:[t,Object(C.jsx)("span",{children:"\u20bd"})]}),Object(C.jsx)(Ae.a,{overlay:f,visible:o,trigger:["click"],children:Object(C.jsx)("i",{id:"dropdownMenuReference",className:"bi bi-plus",onClick:function(){i(!o)},style:{fontSize:"30px",color:"#17a2b8",cursor:"pointer"}})})]})},vt=w.a.div({margin:"0",padding:"0",".colona":{padding:"0 3px",marginBottom:"15px",h3:{fontSize:"16px"},ul:{borderRadius:"5px",overflow:"auto",maxHeight:"268px","&::-webkit-scrollbar":{width:"10px",backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:"10px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#17a2b8",borderRadius:"10px"}},li:{span:{fontSize:"17px"}}},".colona-1":{ul:{border:"1px solid #28a745"},li:{span:{color:"#28a745"}}},".colona-2":{ul:{border:"1px solid #f27474"},li:{span:{color:"#28a745"}}}}),_t=w.a.div(Ve||(Ve=Object(S.a)(["\n  padding: 0 13px;\n"]))),yt=function(e){var t=e.balance_item,n=e.pageStudent_id,a=e.updeteStudent,c=e.pay_History,r=c||[],o=[];r.forEach((function(e,t){0==e.type&&o.unshift(Object(C.jsxs)("li",{className:"list-group-item",children:[e.date," ",Object(C.jsxs)("span",{children:[e.amount,"\u20bd"]})," ",Object(C.jsx)("br",{}),e.issuer]},t))}));var i=[];return r.forEach((function(e,t){1==e.type&&i.unshift(Object(C.jsxs)("li",{className:"list-group-item",children:[e.date," ",Object(C.jsxs)("span",{children:[e.amount,"\u20bd"]})," ",Object(C.jsx)("br",{}),e.issuer]},t))})),Object(C.jsxs)(vt,{className:"col-12",children:[Object(C.jsx)(gt,{balance_item:t,pageStudent_id:n,updeteStudent:a}),Object(C.jsxs)(_t,{className:"row",children:[Object(C.jsxs)("div",{className:"colona colona-1 col-6",children:[Object(C.jsx)("h3",{className:"badge bg-success text-light",children:"\u041f\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435"}),Object(C.jsx)("ul",{className:"list-group",children:o})]}),Object(C.jsxs)("div",{className:"colona colona-2 col-6",children:[Object(C.jsx)("h3",{className:"badge bg-danger text-light",children:"\u041e\u043f\u043b\u0430\u0442\u0430"}),Object(C.jsx)("ul",{className:"list-group",children:i})]})]})]})},St=n(640),kt=X.a.TextArea,Nt=n(25),It=function(e){var t=e._id,a=e.commentsObj,c=n(131).decode(localStorage.getItem("tokenID")),r=c.surname,o=c.name,i=c.midname,l="".concat(r," ").concat(o," ").concat(i),u=a.comments,d=a.setComments,j=Object(s.useState)(!1),b=Object(g.a)(j,2),p=b[0],h=b[1],m=Object(s.useState)(""),x=Object(g.a)(m,2),O=x[0],v=x[1];return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(St.a,{content:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(ge.a.Item,{children:Object(C.jsx)(kt,{value:O,id:"TextArea",rows:4,onChange:function(e){v(e.target.value)},placeholder:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"})}),Object(C.jsx)(ge.a.Item,{children:Object(C.jsx)(ve.a,{htmlType:"submit",loading:p,onClick:function e(){O&&(h(!0),Nt({method:"post",url:"".concat(k.a,"/CRM/Pupils/").concat(t,"/Notes"),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:{text:O}}).then((function(){h(!1),v(""),d([].concat(Object(f.a)(u),[{author:l,content:Object(C.jsx)("p",{children:O}),datetime:ce()().locale("ru").format("dddd, D MMMM YYYY \u0433., HH:MM")}]))})).catch((function(t){K(e,t)})))},type:"primary",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"})})]})})})},wt=n(659),Ct=function(e){var t=e.comments;return Object(C.jsx)(wt.b,{dataSource:t,header:"\u0412\u0441\u0435\u0433\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439: ".concat(t.length),itemLayout:"horizontal",renderItem:function(e,t){var n=Object(h.a)({},e);return n.datetime=ce()(e.datetime).locale("ru").format("dddd, D MMMM YYYY \u0433., HH:mm"),"Invalid date"===n.datetime&&(n.datetime=e.datetime),n.key=t,n.content=Object(C.jsx)(C.Fragment,{children:Object(C.jsx)("p",{style:{color:n.color?n.color:"black"},children:n.content.props.children.split("\n")[0]?n.content.props.children.split("\n")[0]:n.content})}),Object(C.jsx)(St.a,{content:n.content,datetime:n.datetime,author:n.author},n.key)}})},Tt=w.a.div(Je||(Je=Object(S.a)(['\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 100%;\n  \n  .ant-list-items {\n    overflow: hidden auto;\n    max-height: 220px;\n  }\n  .specialList .ant-list-items {\n    max-height: 350px;\n    margin: 0 0 20px 0;\n  }\n  .tasks {\n    font-family: "MontLight";\n  }\n']))),Dt=w.a.div($e||($e=Object(S.a)(["\n  max-height: 350px;\n  overflow: hidden auto;\n  border-top: 1px solid lightgray;\n  margin: 0 0 10px 0;\n  li {\n    border-bottom: 1px solid lightgray;\n  }\n"]))),Et=n(369),Rt=n(182),Mt=n(93),Lt=n(82),Ft=n(272),At=n(282),Pt=n(200),Bt=function(e){var t=e.task,n=e.setRelTasks,a=e.setComments,c=e._id,r=Object(s.useState)(t.done),o=Object(g.a)(r,2),i=o[0],l=o[1],u=function(e){return t.responsible&&0!==t.responsible.length?Array.isArray(t.responsible)?t.responsible[0][e]:!Array.isArray(t.responsible)&&t.responsible instanceof Object?t.responsible[e]:"...":"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"},d=function(){var e=Object(y.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Ft.a)(k.a,t,{archived:!0});case 3:n((function(e){return e.filter((function(e){return e._id!==t}))})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();function j(){return(j=Object(y.a)(_.a.mark((function e(r,o){var i;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=o.target.checked,e.next=4,Object(Ft.a)(k.a,r,{done:!0,completedOn:ce()().toISOString(),archived:!0});case 4:return n((function(e){return e.filter((function(e){return e._id!==r}))})),l((function(e){return i})),e.next=8,Object(Pt.a)(k.a,c,{text:"".concat(t.name,"\n").concat(t.text),color:"crimson"});case 8:a((function(e){return[].concat(Object(f.a)(e),[{author:"".concat(u("surname")," ").concat(u("name")," ").concat(u("midname")),content:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("p",{style:{color:"crimson"},children:t.name}),Object(C.jsx)("p",{children:t.text})]}),deadline:ce()().get().toISOString(),color:"crimson"}])})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),Object(N.e)("\u041e\u0448\u0438\u0431\u043a\u0430!","\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a...");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}return Object(C.jsx)(wt.b.Item,{children:Object(C.jsxs)(Lt.i,{done:i,children:[Object(C.jsxs)("div",{children:[Object(C.jsxs)(Lt.d,{children:[t.name,Object(C.jsx)(At.j,{portable:!1,contains:t.tags.length,children:t.tags.map((function(e){return Object(C.jsx)(te.a,{color:e.color,children:e.name},e._id)}))})]}),Object(C.jsxs)(Lt.e,{children:["\u0421\u0440\u043e\u043a \u0434\u043e: ",ce()(t.deadline).format("DD/MM/YYYY | HH:mm")]}),Object(C.jsxs)(Lt.e,{children:["\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u0435\u043d: ",u("surname")," ",u("name")," ",u("midname")]}),Object(C.jsx)(Lt.c,{onClick:function(){return d(t._id)},children:Object(C.jsx)(Mt.a,{})})]}),Object(C.jsx)("p",{className:"done",children:t.text}),Object(C.jsx)(Lt.a,{children:Object(C.jsx)(Rt.a,{checked:i,onChange:function(e){return function(e,t){return j.apply(this,arguments)}(t._id,e)}})})]})},t._id)},Yt=l.a.memo((function(e){var t=e.tasksObj,n=e._id,a=e.fio,c=e.setComments,r=t.relTasks,o=t.setRelTasks;return Object(C.jsxs)("div",{style:{position:"relative"},children:[Object(C.jsxs)("p",{style:{marginBottom:"5px"},children:["\u0412\u0441\u0435\u0433\u043e \u0437\u0430\u0434\u0430\u0447: ",r.filter((function(e){return!e.archived})).length]}),Object(C.jsx)(Dt,{children:r.filter((function(e){return!e.archived})).map((function(e){return Object(C.jsx)(Bt,{_id:n,setComments:c,task:e,setRelTasks:o},e._id)}))}),Object(C.jsx)(Et.a,{setComments:c,setRelTasks:o,_id:n,fio:a,portable:!0})]})})),zt=l.a.memo((function(e){var t=e.notes,n=e.update,a=e._id,c=e.fio,r=e.tasksObj,o=r.relTasks,i=r.setRelTasks,l=Object(s.useState)([]),u=Object(g.a)(l,2),d=u[0],j=u[1],b=t||[],p=[];Object(s.useEffect)((function(){var e=document.querySelector(".ant-list-items");e&&(e.scrollTop=e.scrollHeight)})),b.forEach((function(e,t){var n=e.author,a=e.date,c=e.text,r=e.color;p.push({author:n,content:Object(C.jsx)("p",{children:c}),datetime:a,color:r})}));var h=w.a.div({position:"relative",".ant-comment-content-detail":{borderBottom:"1px solid #f0f0f0"}});return Object(C.jsxs)(Tt,{children:[Object(C.jsxs)("div",{style:{padding:0},children:[Object(C.jsx)(Ct,{comments:[].concat(p,Object(f.a)(d))}),Object(C.jsx)(It,{commentsObj:{comments:d,setComments:j},notesGlobal:p,update:n,_id:a})]}),Object(C.jsx)(h,{children:Object(C.jsx)(Yt,{tasksObj:{relTasks:o,setRelTasks:i},_id:a,fio:c,setComments:j})})]})})),Gt=[767].map((function(e){return"@media (max-width: ".concat(e,"px)")})),Ut=w.a.div({marginTop:"0px",margin:"0 auto",padding:"0",".pad":Object(p.a)({padding:"0px",paddingRight:"10px"},Gt[0],{paddingRight:"0px"}),".infoLog":(Xe={marginBottom:"10px",padding:"0"},Object(p.a)(Xe,Gt[0],{paddingBottom:"10px"}),Object(p.a)(Xe,".calendar",{margin:"auto 0",marginRight:"10px",fontSize:"20px",span:{paddingLeft:"6px"}}),Xe),".group-name":Object(p.a)({borderBottom:"1px solid #0dcaf0",padding:"0px"},Gt[0],{borderRight:"none"}),".Button-Drawer":{position:"absolute",right:"0",top:"8px"},".ulBox":{borderRadius:"15px",padding:"0px"},".editing":{background:"#fff",borderRadius:"10px 10px 0 0",i:{marginLeft:"95%",cursor:"pointer"}},li:{backgroundColor:"none",span:{fontSize:"14px",margin:"0 5px 5px 0"}}}),Ht=w.a.div({background:"#fff",margin:"10px 0",padding:"0 10px",borderRadius:"15px","& > h3":{fontSize:"22px"},".ant-tabs-nav":{margin:0}}),Wt=n(649),qt=n(660),Kt=n(389),Vt=["magenta","red","volcano","orange","gold","lime","green","cyan","blue","geekblue","purple"],Jt=function e(t,n){n(!0),de()({method:"get",url:"".concat(k.a,"/CRM/Statuses"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){t(e.data),n(!1)})).catch((function(t){K(e,t,(function(){n(!1)}))}))},$t=function e(t,n,a,c,r){if(c){var o=Math.floor(10*Math.random());n(!0),a(""),de()({method:"post",url:"".concat(k.a,"/CRM/Statuses"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:{name:c,color:Vt[o]}}).then((function(e){t([].concat(Object(f.a)(r),[e.data])),n(!1)})).catch((function(t){K(e,t,(function(){n(!1)}))}))}},Xt=function e(t,n,a,c){var r=a.filter((function(e){return e._id!==t}));c(!0),de()({method:"delete",url:"".concat(k.a,"/CRM/Statuses/").concat(t),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(){n(r),c(!1)})).catch((function(t){K(e,t,(function(){c(!1)}))}))},Qt=function e(t,n,a,c){n(!0),de()({method:"patch",url:"".concat(k.a,"/CRM/Pupils/").concat(c),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:{statuses:t}}).then((function(e){n(!1),a(e.data)})).catch((function(t){K(e,t,(function(){n(!1)}))}))},Zt=function(e){var t=e.studentStatuses,n=e.updateStudent,a=e.globalStatuses,c=Object(M.f)().id,r=t.map((function(e){return e._id})),o=Object(s.useState)(!1),i=Object(g.a)(o,2),l=i[0],u=i[1],d=Object(s.useState)(a),j=Object(g.a)(d,2),b=j[0],p=j[1],f=Object(s.useState)(""),h=Object(g.a)(f,2),m=h[0],x=h[1];return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)("div",{style:{padding:8,background:"#fff"},children:[Object(C.jsx)(X.a,{autoComplete:"off",value:m,id:"creating-statuses",placeholder:"\u0421\u0442\u0430\u0442\u0443\u0441...",onChange:function(e){x(e.target.value)},onPressEnter:function(){$t(p,u,x,m,b)},style:{marginBottom:8,display:"block"}}),Object(C.jsx)(qt.b,{children:Object(C.jsx)(ve.a,{loading:l,type:"primary",onClick:function(){$t(p,u,x,m,b)},size:"small",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0441\u0442\u0430\u0442\u0443\u0441"})}),Object(C.jsx)(F.a,{children:b.map((function(e){var n=!1;return t.forEach((function(t){t._id===e._id&&(n=!0)})),Object(C.jsx)(F.a.Item,{children:Object(C.jsxs)(Rt.a,{defaultChecked:n,onChange:function(t){t.target.checked?r.push(e._id):r=r.filter((function(t){return t!==e._id}))},children:[e.name,Object(C.jsx)(Kt.a,{onClick:function(){Xt(e._id,p,b,u)},style:{position:"absolute",right:"10px",top:"14px",color:"red"}})]})},e._id)}))}),Object(C.jsx)(ve.a,{loading:l,type:"primary",size:"small",onClick:function(){Qt(r,u,n,c)},style:{marginTop:10},children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"})]})})},en=n(156),tn=function(e){var t=e.studentStatusesGlobal,n=e.updateStudent,a=Object(s.useState)(!1),c=Object(g.a)(a,2),r=c[0],o=c[1];return Object(s.useEffect)((function(){Jt(o,(function(){}))}),[]),r?Object(C.jsx)(Ae.a,{overlay:Object(C.jsx)(Zt,{updateStudent:n,studentStatuses:t,globalStatuses:r}),trigger:["click"],children:Object(C.jsxs)(R.b,{to:"#",style:{paddingLeft:"5px",lineHeight:"47px",overflow:"hidden",width:"198px",paddingRight:0},children:["\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441 ",Object(C.jsx)(en.a,{})]})}):Object(C.jsx)("div",{style:{padding:"12px 0"},children:Object(C.jsx)(Wt.a.Button,{active:!0,style:{height:25}})})},nn=w.a.div(Qe||(Qe=Object(S.a)(["\n  height: 47px;\n  display: flex;\n  line-height: 47px;\n  overflow: auto;\n  width: 100%;\n\n  &::-webkit-scrollbar {\n    height: 2px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #5c636a;\n  }\n"]))),an=function(e){var t=e.items;return Object(C.jsx)(nn,{children:t.map((function(e){return Object(C.jsx)("div",{children:Object(C.jsx)(te.a,{color:e.color,children:e.name})},e._id)}))})},cn=w.a.div(Ze||(Ze=Object(S.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: ",";\n  > select {\n    margin: 0 10px 0 0;\n    border: 1px solid lightgray;\n    appearance: revert;\n    padding: 3px 5px 3px 2px;\n    width: 120px;\n  }\n"])),(function(e){return e.first?"1px solid #0DCAF0":"none"})),rn=n(646),on=rn.a.TabPane,sn=function(e){},ln=function(e){var t=e.tabs_groups;return Object(C.jsxs)(rn.a,{defaultActiveKey:"1",onChange:sn,children:[Object(C.jsx)(on,{tab:"\u0413\u0440\u0443\u043f\u043f\u044b",children:t},"1"),Object(C.jsxs)(on,{tab:"\u041f\u0440\u043e\u0433\u0440\u0435\u0441\u0441",children:["<","... ",Object(C.jsx)("br",{}),"\u041f\u0440\u043e\u0433\u0440\u0435\u0441\u0441...",Object(C.jsx)("br",{}),"../",">"]},"2"),Object(C.jsxs)(on,{tab:"\u0410\u0440\u0445\u0438\u0432 \u043f\u043e\u0441\u0435\u0449\u0430\u0435\u043c\u043e\u0441\u0442\u0438",children:["<","... ",Object(C.jsx)("br",{}),"\u0410\u0440\u0445\u0438\u0432 \u043f\u043e\u0441\u0435\u0449\u0430\u0435\u043c\u043e\u0441\u0442\u0438 ",Object(C.jsx)("br",{}),"../",">"]},"3")]})},un=function(){var e=Object(M.f)().id,t=Object(s.useState)({_id:"60ba505dc12d3b9783c51d0f",name:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",surname:"",midname:"",gender:"",dateOfBirth:"2004-12-07",phone:"",parentPhone:"",discord:"",balance:0,localSchedule:{},groups:[],paymentHistory:[{type:1,date:"",amount:0,issuer:"",subscription:null},{type:0,date:"",amount:0,issuer:"",subscription:null}],notes:[],statuses:[],tasks:[]}),n=Object(g.a)(t,2),a=n[0],c=n[1],r=Object(s.useState)([]),o=Object(g.a)(r,2),i=o[0],l=o[1],u=Object(s.useState)([]),d=Object(g.a)(u,2),j=d[0],b=d[1],p=a.notes,f=a.groups,h=a.name,m=a.balance,x=a.localSchedule,O=a.paymentHistory,v=a.salesFunnelStep;Object(s.useEffect)((function(){(function(){var t=Object(y.a)(_.a.mark((function t(){var n,a;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fe(e);case 3:return n=t.sent,c(n),b(n.tasks),t.next=8,Object(le.b)(k.a,1);case 8:a=t.sent,l((function(e){return a})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),K(fe,t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}})()()}),[e]);var S=[];for(var N in x)S.push(N);var I=[];f.forEach((function(e){I.push(e.group_name)}));var w=S.map((function(t,n){if(n<I.length)return Object(C.jsx)(ut,{pageInfo:"group",itemG:a,dataGroup:t,getGroup_Id:function(){fe(e,c)},setData:c,name:I[n],type:"pupil"},t)}));return Object(C.jsxs)(Ut,{className:"container row col-12",children:[Object(C.jsxs)("div",{className:"col-12 col-md-3 pad",children:[Object(C.jsxs)("div",{className:"infoLog align-self-start col-md-12 col-12",children:[Object(C.jsxs)(cn,{first:!0,children:[Object(C.jsx)("h3",{children:h}),Object(C.jsx)(cn,{children:Object(C.jsx)("select",{onChange:function(t){Object(le.c)(k.a,e,{salesFunnelStep:t.target.value})},value:null===v||void 0===v?void 0:v._id,children:null===i||void 0===i?void 0:i.map((function(e){return Object(C.jsx)("option",{value:e._id,children:e.name},e._id)}))})})]}),Object(C.jsxs)("div",{style:{display:"flex",height:"47px"},children:[Object(C.jsx)(an,{items:a.statuses?a.statuses:[]}),Object(C.jsx)(tn,{updateStudent:c,studentStatusesGlobal:a.statuses?a.statuses:[]})]})]}),Object(C.jsx)(yt,{balance_item:m,pageStudent_id:e,updeteStudent:c,pay_History:O})]}),Object(C.jsx)("div",{className:"col-md-6",style:{background:"#fff"},children:Object(C.jsx)(zt,{tasksObj:{relTasks:j,setRelTasks:b},notes:p,fio:{name:a.name,surname:a.surname},update:function(){fe(e,c)},_id:e})}),Object(C.jsx)("div",{className:"col-md-3 ulBox",children:Object(C.jsx)(mt,{dataStudent:a,updetePage:c})}),Object(C.jsx)(Ht,{className:"container col-12",children:Object(C.jsx)(ln,{tabs_groups:w})})]})},dn=function(e){var t=e.addStudent,n=e.addedStudents,a=Object(s.useState)([]),c=Object(g.a)(a,2),r=c[0],o=c[1],i=Object(s.useState)(""),l=Object(g.a)(i,2),u=l[0],d=l[1],j=r.map((function(e){var a=e.name,c=e.surname,r=e.midname,o=e.id;return Object(C.jsx)("li",{onClick:function(){!function(e,t,n,a){var c=!0;t.forEach((function(t){t.id===e.id&&(c=!1)})),c&&(n([].concat(Object(f.a)(t),[e])),a(""))}(e,n,t,d)},className:"list-group-item",children:Object(C.jsx)("span",{className:"badge bg-warning text-dark",children:"".concat(c," ").concat(a," ").concat(r)})},o)})),b=n.map((function(e){var a=e.name,c=e.surname,r=e.midname,o=e.id;return Object(C.jsxs)("button",{onClick:function(){!function(e,t,n,a){n(t.filter((function(t){return t.id!==e}))),a("")}(o,n,t,d)},type:"button",className:"btn btn-info",children:["".concat(c," ").concat(a," ").concat(r),Object(C.jsx)("i",{className:"bi bi-x",style:{fontSize:"15px"}})]},o)}));return Object(C.jsxs)("div",{className:"mb-3",children:[Object(C.jsx)("label",{htmlFor:"inputSirname",className:"fs-5 col-sm-4 col-form-label",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0435\u043d\u0438\u043a\u043e\u0432"}),Object(C.jsxs)("div",{className:"row addPUPILS",children:[Object(C.jsxs)("div",{className:"col-sm-6 input-group",children:[Object(C.jsx)(X.a,{placeholder:"\u041d\u0430\u0439\u0442\u0438...",onChange:function(e){d(e.target.value),J((function(e){jt(e,o)}),encodeURI(e.target.value),"")},value:u}),Object(C.jsx)("ul",{className:"col-12 list-group list-group-flush",children:j})]}),Object(C.jsx)("div",{className:"col-sm-6 boxPUPILS",children:b})]})]})},jn=(n(619),[1020,700].map((function(e){return"@media (max-width: ".concat(e,"px)")}))),bn=w.a.div((et={padding:"0 30px"},Object(p.a)(et,jn[1],{padding:"0 0"}),Object(p.a)(et,".table_user",{overflowX:"auto","&::-webkit-scrollbar":{height:"10px",backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:"10px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#17a2b8",borderRadius:"10px"}}),Object(p.a)(et,".log_h2",{}),Object(p.a)(et,"td",{paddingTop:"1px",paddingBottom:"4px"}),Object(p.a)(et,"th, td",{whiteSpace:"nowrap"}),et)),pn=w.a.form({".addPUPILS":{".input-group":{ul:{overflowY:"scroll",height:"100px"},li:{cursor:"pointer",padding:"5px",span:{fontSize:"11px"}}}}}),fn=n(25),hn={install_all_groups:me,add_all_groups:function(e){return{type:"ADD_ALL_GROUPS",payload:e}},delete_all_groups:function(e){return{type:"DELETE_ALL_GROUPS",payload:e}}},mn=Object(j.b)((function(e){return{groups:e.all_groups}}),hn)((function(e){var t=e.install_all_groups,n=e.add_all_groups,a=e.delete_all_groups,c=e.groups,r=Object(s.useState)(!1),o=Object(g.a)(r,2),i=o[0],l=o[1],u=Object(s.useState)(!1),d=Object(g.a)(u,2),j=d[0],b=d[1],p=function(){l(!1)},f=Object(s.useState)(0),h=Object(g.a)(f,2),m=h[0],x=h[1],O=Object(s.useState)(1),v=Object(g.a)(O,2),_=v[0],y=v[1],S=Object(s.useState)([]),w=Object(g.a)(S,2),T=w[0],D=w[1],E=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;fn({method:"post",url:"".concat(k.a,"/CRM/Groups/find?limit=10&offset=").concat(n),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){var n=e.data,a=e.headers;t(n),y(a.count)})).catch((function(t){K((function(){return e(n)}),t)}))},M=function e(){fn({method:"get",url:"".concat(k.a,"/CRM/Teachers?limit=149&offset=0"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){var t=e.data;D(t)})).catch((function(t){K(e,t)}))},L=function(){M(),E(m)};Object(s.useEffect)((function(){L()}),[]);var F=T.map((function(e,t){var n=e.name,a=e.surname,c=e.midname,r=e._id;return Object(C.jsxs)("option",{value:r,children:[a," ",n," ",c]},n+t)})),A=Object(s.useState)([]),P=Object(g.a)(A,2),B=P[0],Y=P[1],z=Object(s.useState)(""),G=Object(g.a)(z,2),U=G[0],H=G[1],W=Object(s.useState)(""),q=Object(g.a)(W,2),V=q[0],J=q[1],$=Object(s.useState)(""),Q=Object(g.a)($,2),Z=Q[0],ee=Q[1],te=Object(s.useState)(""),ne=Object(g.a)(te,2),ae=ne[0],ce=ne[1],re=c.map((function(e){var t=e.group_name,n=e.tutor,c=e.level,r=e.places,o=e.pupils,i=e.global_schedule,s=e._id,l=o||[],u="\u0423\u0447\u0438\u0442\u0435\u043b\u044c \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d...",d="-";if(i&&i[0]){var j=i[0].duration;d="\u0441 ".concat(j[0]," \u0434\u043e ").concat(j[1])}if(n){var b=n.surname,p=n.name,f=n.midname;u="".concat(b," ").concat(p," ").concat(f)}return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{className:"td-trash",scope:"row",children:Object(C.jsx)("i",{id:s,onClick:function t(){var n=document.getElementById(e._id);n.style.opacity="0.3",fn({method:"DELETE",url:"".concat(k.a,"/CRM/Groups/").concat(e._id),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){a(e.data._id),n.style.opacity="1"})).catch((function(e){K(t,e)}))},className:"bi bi-trash",style:{fontSize:"30px",color:"#F56767"}})}),Object(C.jsx)("td",{className:"align-middle td-use",children:Object(C.jsx)(R.b,{className:"link-info",to:"/group/".concat(s),children:t})}),Object(C.jsx)("td",{className:"align-middle td-use",children:u}),Object(C.jsxs)("td",{className:"align-middle td-use",children:[c," \u043a\u043b\u0430\u0441\u0441"]}),Object(C.jsx)("td",{className:"align-middle td-use",children:r}),Object(C.jsx)("td",{className:"align-middle td-use",children:r-l.length}),Object(C.jsx)("td",{className:"align-middle td-use",children:d})]},"".concat(s))}));return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("nav",{id:"navbar-student",className:"navbar navbar-expand-lg navbar-light",children:Object(C.jsx)("div",{className:"container-fluid d-flex",children:Object(C.jsxs)("div",{className:"collapse d-flex flex-row h3-person",children:[Object(C.jsx)("div",{className:"d-flex plus-box",children:Object(C.jsx)("div",{children:Object(C.jsx)("h3",{children:"\u0413\u0440\u0443\u043f\u043f\u044b"})})}),Object(C.jsx)("div",{children:Object(C.jsx)(ve.a,{type:"primary",onClick:function(){l(!0)},children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443"})})]})})}),Object(C.jsx)(bn,{className:"",children:Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{className:"table_user",children:Object(C.jsxs)("table",{className:"table table-striped",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{className:"th-h",scope:"col"}),Object(C.jsx)("th",{className:"th-h align-middle",scope:"col",children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(C.jsx)("th",{className:"th-h align-middle",scope:"col",children:"\u0423\u0447\u0438\u0442\u0435\u043b\u044c"}),Object(C.jsx)("th",{className:"th-h align-middle",scope:"col",children:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c"}),Object(C.jsx)("th",{className:"th-h align-middle",scope:"col",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0435\u0441\u0442"}),Object(C.jsx)("th",{className:"th-h align-middle",scope:"col",children:"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043c\u0435\u0441\u0442"}),Object(C.jsx)("th",{className:"th-h align-middle",scope:"col",children:"\u0412\u0440\u0435\u043c\u044f \u0437\u0430\u043d\u044f\u0442\u0438\u0439"})]})}),Object(C.jsx)("tbody",{children:re})]})}),Object(C.jsx)(se,{getItem:E,count:_,offset:m,setOffset:x})]})}),Object(C.jsx)(_e.a,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443",visible:i,onCancel:p,width:1e3,footer:[Object(C.jsx)(ve.a,{onClick:p,children:"\u041e\u0442\u043c\u0435\u043d\u0430"},"onCancel1"),Object(C.jsx)(ve.a,{onClick:function(){var e=[];B.forEach((function(t){e.push(t.id)})),b(!0),fn({method:"POST",url:"".concat(k.a,"/CRM/Groups"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:{group_name:U,tutor:Z||void 0,level:+ae,places:+V,pupils:e,trial:!1}}).then((function(e){b(!1),Object(N.f)("\u0413\u0440\u0443\u043f\u043f\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0430","\u0422\u0435\u043f\u0435\u0440\u044c \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),l(!1),n(e.data),H(""),J(""),ee(""),ce(""),Y([])})).catch((function(t){if(b(!1),t.response){Object(I.a)(t.response.status);var n=t.response.status;400==n?+V<e.length?Object(N.e)("\u041e\u0439...","\u041c\u0435\u0441\u0442 \u0434\u043b\u044f \u0443\u0447\u0435\u043d\u0438\u043a\u043e\u0432 \u043d\u0435 \u0445\u0432\u0430\u0442\u0430\u0435\u0442"):Object(N.e)("\u041e\u0439...","\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u044f \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e"):401==n?Object(N.e)("\u041e\u0439...","\u0413\u0434\u0435 \u0442\u043e\u043a\u0435\u043d ?"):500==n&&Object(N.e)("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043f\u043e\u043b\u043e\u043c\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430","\u0421\u043e\u043e\u0431\u0449\u0438\u0442\u0435 \u043e\u0431 \u043e\u0448\u0438\u0431\u043a\u0435 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0443 \u0441\u0435\u0440\u0432\u0438\u0441\u0430")}}))},loading:j,type:"primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},"onOk1")],children:Object(C.jsx)(pn,{children:Object(C.jsxs)("div",{className:"modal-body",children:[Object(C.jsxs)("div",{className:"row mb-3",children:[Object(C.jsx)("label",{htmlFor:"inputName",className:"fs-5 col-sm-4 col-form-label",children:"\u0418\u043c\u044f \u0433\u0440\u0443\u043f\u043f\u044b"}),Object(C.jsx)("div",{className:"col-sm-8",children:Object(C.jsx)(X.a,{value:U,autoComplete:"off",onChange:function(e){H(e.target.value)},required:!0,type:"name",name:"group_name",className:"form-control",id:"group_name"})})]}),Object(C.jsxs)("div",{className:"row mb-3",children:[Object(C.jsx)("label",{htmlFor:"inputMidname",className:"fs-5 col-sm-4 col-form-label",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0435\u0441\u0442"}),Object(C.jsx)("div",{className:"col-sm-8",children:Object(C.jsx)(X.a,{value:V,autoComplete:"off",onChange:function(e){J(e.target.value)},required:!0,type:"number",name:"places",className:"form-control",id:"places"})})]}),Object(C.jsxs)("div",{className:"row mb-3",children:[Object(C.jsx)("label",{htmlFor:"inputSirname",className:"fs-5 col-sm-4 col-form-label",children:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0438"}),Object(C.jsx)("div",{className:"col-sm-8 input-group",children:Object(C.jsxs)("select",{value:ae,onChange:function(e){ce(e.target.value)},required:!0,className:"form-control",id:"inputGroupSelect01",children:[Object(C.jsx)("option",{defaultValue:!0}),Object(C.jsx)("option",{value:"1",children:"1 \u043a\u043b\u0430\u0441\u0441"}),Object(C.jsx)("option",{value:"2",children:"2 \u043a\u043b\u0430\u0441\u0441"}),Object(C.jsx)("option",{value:"3",children:"3 \u043a\u043b\u0430\u0441\u0441"}),Object(C.jsx)("option",{value:"4",children:"4 \u043a\u043b\u0430\u0441\u0441"})]})})]}),Object(C.jsxs)("div",{className:"row mb-3",children:[Object(C.jsx)("label",{className:"fs-5 col-sm-4 col-form-label",children:"\u0423\u0447\u0438\u0442\u0435\u043b\u044c"}),Object(C.jsx)("div",{className:"col-sm-8 input-group",children:Object(C.jsxs)("select",{value:Z,onChange:function(e){ee(e.target.value)},className:"form-control",children:[Object(C.jsx)("option",{defaultValue:!0}),F]})})]}),Object(C.jsx)(dn,{addStudent:function(e){Y(e)},addedStudents:B})]})})})]})})),xn=n(25),On=w.a.li({span:{cursor:"pointer"}}),gn=w.a.span({cursor:"pointer"}),vn=function(e){var t=e.title,n=e.pageId,a=e.update,c=e.schedule,r=Object(s.useState)(!1),o=Object(g.a)(r,2),i=o[0],l=o[1],u=function(){l(!1)},d=Object(s.useState)([]),j=Object(g.a)(d,2),b=j[0],p=j[1],f=function e(t){var r=[];c.forEach((function(e){var t=ce()(e.date,"DD.MM.YYYY").format("YYYY-MM-DD");ce()().diff(t,"day")<=0&&r.push(e)})),xn({method:"put",url:"".concat(k.a,"/CRM/Groups/").concat(n,"/Pupils/").concat(t,"/Schedule"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:r}).then((function(e){a(),Object(N.b)()})).catch((function(t){K(e,t)}))},h=function e(t,a){xn({method:"post",url:"".concat(k.a,"/CRM/Groups/").concat(n,"/Pupils"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:{ids:t}}).then((function(){f(a)})).catch((function(t){K(e,t)}))},m=b.map((function(e,t){return Object(C.jsx)(On,{onClick:function(){Object(N.d)("\u0423\u0447\u0435\u043d\u0438\u043a \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f","\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435"),h([e.id],e.id)},className:"list-group-item",children:Object(C.jsxs)("span",{className:"badge bg-warning text-dark",children:[e.surname," ",e.name," ",e.midname]})},e.id)}));return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(gn,{className:"btn ",onClick:function(){l(!0)},children:Object(C.jsx)("i",{className:"bi bi-person-plus-fill",style:{color:"#ffc107",fontSize:"24px"}})}),Object(C.jsx)(_e.a,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c ".concat(t),visible:i,onCancel:u,width:600,footer:[Object(C.jsx)(ve.a,{onClick:u,children:"\u041e\u0442\u043c\u0435\u043d\u0430"},"onCancel1")],children:Object(C.jsx)("div",{className:"row addPUPILS",children:Object(C.jsxs)("div",{className:"col-12 input-group",children:[Object(C.jsx)("input",{id:"fort",onChange:function(e){J((function(e){jt(e,p)}),encodeURI(e.target.value))},autoComplete:"off",type:"search",className:"form-control",name:"q",placeholder:"\u041d\u0430\u0439\u0442\u0438 \u0443\u0447\u0435\u043d\u0438\u043a\u0430..."}),Object(C.jsx)("ul",{className:"col-12 list-group list-group-flush",children:m})]})})})]})},_n=function(e){var t=e.Data_ALL,a=e.updetePage,c={},r=n(25),o=Object(s.useState)(""),i=Object(g.a)(o,2),l=i[0],u=i[1],d=t.group_name,j=t.tutor,b=t.level,p=t.places,f=t.pupils,h=t._id,m=f||"",x="\u0423\u0447\u0438\u0442\u0435\u043b\u044c \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d...";if(j){var O=j.surname,v=j.name,_=j.midname;x="".concat(O," ").concat(v," ").concat(_)}var y=Object(s.useState)([{name:"\u0423\u0447\u0438\u0442\u0435\u043b\u0435\u0439 \u043d\u0435 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d\u043d\u043e...",surname:"",midname:"",_id:"546456"}]),S=Object(g.a)(y,2),T=S[0],D=S[1],E=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;r({method:"get",url:"".concat(k.a,"/AdminPanel/CRMAccounts?limit=20&offset=").concat(t,"&accountType=teacher"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){var t=e.data;D(t)})).catch((function(t){t.response&&(Object(I.a)(t.response.status),401==t.response.status&&("TOKEN_EXPIRED"==t.response.data.message?(Object(q.a)(t.response.data.token),e()):(localStorage.removeItem("tokenID"),window.location.replace("/"))))}))},R=function(){r({method:"get",url:"".concat(k.a,"/CRM/Groups/").concat(h),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){a(e.data),Object(N.b)(),N.c.fire({icon:"success",title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b"})})).catch((function(e){e.response&&Object(I.a)(e.response.status)}))},M=T.map((function(e,t){var n=e.name,a=e.surname,c=e.midname;return Object(C.jsxs)("option",{value:e._id,children:[a," ",n," ",c]},e._id)}));Object(s.useEffect)((function(){E()}),[]);var L=function(){Object(N.d)("\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f","\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435"),r({method:"patch",url:"".concat(k.a,"/CRM/Groups/").concat(h),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:c}).then((function(){R()})).catch((function(e){e.response&&Object(I.a)(e.response.status)}))},A=w.a.span({fontSize:"13px"}),P=Object(C.jsxs)(F.a,{children:[Object(C.jsx)(F.a.Item,{children:Object(C.jsx)("input",{placeholder:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",onChange:function(e){c={group_name:"".concat(e.target.value)}},type:"name",className:"text-dark form-control col-12"})}),Object(C.jsx)(F.a.Item,{children:Object(C.jsx)(A,{onClick:function(){L(),u("")},className:"badge bg-warning text-dark save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),B=Object(C.jsx)(F.a,{children:Object(C.jsx)(F.a.Item,{children:Object(C.jsx)("div",{className:"input-group",children:Object(C.jsxs)("select",{onChange:function(e){var t;t=e.target.value,Object(N.d)("\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f","\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435"),r({method:"post",url:"".concat(k.a,"/CRM/Groups/").concat(h,"/Teacher?tutorID=").concat(t),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(){R()})).catch((function(e){e.response&&Object(I.a)(e.response.status)}))},className:"form-control",children:[Object(C.jsx)("option",{}),M]})})})}),Y=Object(C.jsxs)(F.a,{children:[Object(C.jsx)(F.a.Item,{children:Object(C.jsx)("div",{className:"input-group",children:Object(C.jsxs)("select",{onChange:function(e){c={level:+e.target.value}},className:"form-control",children:[Object(C.jsx)("option",{}),Object(C.jsx)("option",{value:"1",children:"1 \u043a\u043b\u0430\u0441\u0441"}),Object(C.jsx)("option",{value:"2",children:"2 \u043a\u043b\u0430\u0441\u0441"}),Object(C.jsx)("option",{value:"3",children:"3 \u043a\u043b\u0430\u0441\u0441"}),Object(C.jsx)("option",{value:"4",children:"4 \u043a\u043b\u0430\u0441\u0441"})]})})}),Object(C.jsx)(F.a.Item,{children:Object(C.jsx)(A,{onClick:function(){L(),u("")},className:"badge bg-warning text-dark save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),z=Object(C.jsxs)(F.a,{children:[Object(C.jsx)(F.a.Item,{children:Object(C.jsx)("input",{placeholder:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043a\u043e\u043b\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0435\u0441\u0442",onChange:function(e){c={places:+e.target.value}},type:"number",className:"text-dark form-control col-12"})}),Object(C.jsx)(F.a.Item,{children:Object(C.jsx)(A,{onClick:function(){L(),u("")},className:"badge bg-warning text-dark save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),G=function(e,t){return Object(C.jsx)(Ae.a,{overlay:e,visible:function(){return l===t},trigger:["click"],children:Object(C.jsx)("i",{className:"bi bi-pencil",onClick:function(){u(l===t?"":t)},style:{fontSize:"20px",color:"#17a2b8",cursor:"pointer"}})})};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("li",{className:"list-group-item",children:["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435: ",Object(C.jsx)("span",{className:"badge bg-info text-light",children:d}),Object(C.jsx)("div",{className:"btn-group",children:G(P,"group_name")})]}),Object(C.jsxs)("li",{className:"list-group-item",children:["\u0423\u0447\u0438\u0442\u0435\u043b\u044c: ",Object(C.jsx)("span",{className:"badge bg-warning text-dark",children:x}),Object(C.jsx)("div",{className:"btn-group",children:G(B,"tutor")})]}),Object(C.jsxs)("li",{className:"list-group-item",children:["\u041a\u043b\u0430\u0441\u0441: ",Object(C.jsx)("span",{className:"badge bg-success",children:b}),Object(C.jsx)("div",{className:"btn-group",children:G(Y,"level")})]}),Object(C.jsxs)("li",{className:"list-group-item",children:["M\u0435\u0441\u0442 \u0432 \u0433\u0440\u0443\u043f\u043f\u0435: ",Object(C.jsx)("span",{className:"badge bg-info text-dark",children:p}),Object(C.jsx)("div",{className:"btn-group",children:G(z,"places")})]}),Object(C.jsxs)("li",{className:"list-group-item",children:["\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043c\u0435\u0441\u0442:"," ",Object(C.jsx)("span",{className:"badge bg-light text-dark",children:p-m.length})]})]})},yn=[767].map((function(e){return"@media (max-width: ".concat(e,"px)")})),Sn=w.a.div({marginTop:"0px",margin:"0 auto",".pad":Object(p.a)({padding:"0px",paddingRight:"10px"},yn[0],{paddingRight:"0px"}),".infoLog":(tt={marginBottom:"10px",padding:"0"},Object(p.a)(tt,yn[0],{paddingBottom:"10px"}),Object(p.a)(tt,".calendar",{margin:"9px 0",marginRight:"10px",fontSize:"15px"}),tt),".group-name":Object(p.a)({padding:"0",borderBottom:"1px solid #0dcaf0"},yn[0],{borderRight:"none"}),".time":{margin:"0",padding:"0",h5:{fontSize:"1.25rem"}},".ulBox":{borderRadius:"15px",padding:"0px"},".editing":{background:"#fff",borderRadius:"10px 10px 0 0",i:{marginLeft:"95%",cursor:"pointer"}},li:{backgroundColor:"none",span:{fontSize:"16px",margin:"0 5px 5px 0"}}}),kn=w.a.div({background:"#fff",margin:"10px 0",padding:"10px",borderRadius:"15px","& > h3":{fontSize:"22px"}}),Nn=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},c=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];de()({method:"get",url:"".concat(k.a,"/CRM/Groups/").concat(n),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){t(e.data)})).catch((function(r){K((function(){e(t,n,a,c)}),r,a,c)}))},In=w.a.div({padding:"0",marginBottom:"15px",".boxS":{overflow:"auto",maxHeight:"200px"},".dataNumber":{margin:"0 3px 0 0",fontSize:"15px",fontWeight:"600",width:"96px",".time":{color:"#1890ff"}}}),wn=function(e){var t=e.global_schedule;if(!t[0])return Object(C.jsx)(In,{className:"col-12",children:Object(C.jsx)("h5",{children:"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u043d\u0435\u0442..."})});var n,a="",c=t.map((function(e){var t=ce()(e.date,"DD.MM.YYYY").format("DD.MM");if(n===t){var c=+"".concat(e.duration[0][0]).concat(e.duration[0][1]);a=23===c?"00:".concat(e.duration[0][3]).concat(e.duration[0][4]):"".concat(c+1,":").concat(e.duration[0][3]).concat(e.duration[0][4])}else a=e.duration[0];return n=t,Object(C.jsxs)("span",{className:"badge bg-light text-dark dataNumber",children:["".concat(t," "),Object(C.jsx)("span",{className:"time",children:a})]},"".concat(e.date).concat(a))}));return Object(C.jsx)(In,{className:"col-12",children:Object(C.jsx)("div",{className:"boxS",children:c})})},Cn=n(641),Tn=function(e){var t=e.label,n=e.name;return Object(C.jsxs)(ge.a.Item,{style:{marginBottom:0},label:t,children:[Object(C.jsx)(ge.a.Item,{name:"".concat(n,"0"),style:{display:"inline-block",width:"calc(50% - 12px)"},children:Object(C.jsx)(Cn.a,{allowClear:!1,format:"HH",placeholder:"\u041d\u0430\u0447\u0430\u043b\u043e \u0443\u0440\u043e\u043a\u0430"})}),Object(C.jsx)("span",{style:{display:"inline-block",width:"23px",lineHeight:"32px",textAlign:"center"},children:"-"}),Object(C.jsx)(ge.a.Item,{name:"".concat(n,"1"),style:{display:"inline-block",width:"calc(50% - 12px)"},children:Object(C.jsx)(Cn.a,{format:"HH",allowClear:!1,placeholder:"\u041a\u043e\u043d\u0435\u0446 \u0443\u0440\u043e\u043a\u0430"})})]})},Dn={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},En=w.a.div(nt||(nt=Object(S.a)(["\n\n"]))),Rn=(w.a.div(at||(at=Object(S.a)(["\n  .ant-picker-clear {\n    top: 16%;\n  }\n"]))),ye.a.RangePicker),Mn=n(25),Ln=function(e){var t=e.updateGroup,n=e.groupID,a=ge.a.useForm(),c=Object(g.a)(a,1)[0],r=Object(s.useState)(!1),o=Object(g.a)(r,2),i=o[0],l=o[1],u=Object(s.useState)(!1),d=Object(g.a)(u,2),j=d[0],b=d[1],p=function(){l(!1),c.resetFields()},f={startDate:"",endDate:"",weekDay:[]},m=[],x=function e(){var a=f.startDate,c=f.endDate,r=ce()(a,"DD.MM.YYYY").day(),o=c,i=a,s=ce()(i,"DD.MM.YYYY").day(),l=1,u=function(){f.weekDay.forEach((function(e){if(e.index===s)for(var t=ce()("2000-01-01, ".concat(e.duration[1])).diff("2000-01-01, ".concat(e.duration[0]),"hours"),n={date:i,duration:e.duration,status:2,tutor:"",paid:!1,title:""},a=0;a<t;a++)m.push(n)}))};u();do{i=ce()(f.startDate,"DD.MM.YYYY").day(r+l).format("DD.MM.YYYY"),s=ce()(i,"DD.MM.YYYY").day(),u(),l++}while(i!==o);Mn({method:"post",url:"".concat(k.a,"/CRM/Groups/").concat(n,"/Schedule"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:m}).then((function(){t((function(){b(!1),p(),Object(N.f)("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u043e","")}))})).catch((function(t){K(e,t)}))},O=function(e){for(var t in b(!0),e)e[t]&&"range_picker"!==t&&f.weekDay.push({duration:["".concat(e[t][0],":00"),"".concat(e[t][1],":00")],index:+t});f.startDate=e.range_picker[0],f.endDate=e.range_picker[1],x()};return Object(C.jsxs)(En,{children:[Object(C.jsx)(ve.a,{style:{margin:"8px 0 8px 0"},onClick:function(){l(!0)},children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(C.jsx)(_e.a,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435",visible:i,onCancel:p,footer:[Object(C.jsx)(ve.a,{onClick:function(){c.resetFields()},children:"\u0421\u0431\u0440\u043e\u0441"},"onCancel1"),Object(C.jsx)(ve.a,{onClick:function(){c.submit()},loading:j,type:"primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},"onOk1")],children:Object(C.jsxs)(ge.a,Object(h.a)(Object(h.a)({},Dn),{},{form:c,name:"basic",onFinish:function(e){var t={range_picker:e.range_picker.map((function(e){return ce()(e).format("DD.MM.YYYY")}))};for(var n in e){var a=function(e){return e?"".concat(ce()(e).format("HH"),":00"):void 0},c=+"".concat(n[0]);"range_picker"!==n&&e[n]?"1"===n[1]?t[c].push(a(e[n])):t[c]=[a(e[n])]:"range_picker"===n||e[n]||(t[c]=void 0)}O(t)},autoComplete:"off",children:[Object(C.jsx)(ge.a.Item,{className:"form-item",name:"range_picker",label:"\u041f\u0435\u0440\u0438\u043e\u0434",rules:[{required:!0,message:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u044d\u0442\u043e \u043f\u043e\u043b\u0435!"}],children:Object(C.jsx)(Rn,{format:"DD.MM.YYYY",allowClear:!1})}),Object(C.jsx)(Tn,{label:"\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a",name:"1"}),Object(C.jsx)(Tn,{label:"\u0412\u0442\u043e\u0440\u043d\u0438\u043a",name:"2"}),Object(C.jsx)(Tn,{label:"\u0421\u0440\u0435\u0434\u0430",name:"3"}),Object(C.jsx)(Tn,{label:"\u0427\u0435\u0442\u0432\u0435\u0440\u0433",name:"4"}),Object(C.jsx)(Tn,{label:"\u041f\u044f\u0442\u043d\u0438\u0446\u0430",name:"5"}),Object(C.jsx)(Tn,{label:"\u0421\u0443\u0431\u0431\u043e\u0442\u0430",name:"6"}),Object(C.jsx)(Tn,{label:"\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435",name:"0"})]}))})]})},Fn=function(){var e=Object(M.f)().id,t=Object(s.useState)({pupils:[{_id:"564564",localSchedule:{}}],group_name:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",tutor:"",level:"",places:"",global_schedule:[{duration:["--:--","--:--"]}],_id:"6456"}),n=Object(g.a)(t,2),a=n[0],c=n[1],r=a.group_name,o=a.pupils,i=a.global_schedule;Object(s.useEffect)((function(){Nn(c,e)}),[e]);var l="";o&&(l=o.map((function(e){return Object(C.jsx)("span",{className:"badge bg-info text-dark",children:"".concat(e.name," ").concat(e.surname)},e._id)})));var u="";o&&(u=o.map((function(t){return Object(C.jsx)(ut,{itemG:t,dataGroup:e,getGroup_Id:function(){return Nn(c,e)},setData:c,surname:t.surname,name:t.name,type:"group"},t._id)})));var d=Object(C.jsx)(vn,{schedule:i,update:function(){return Nn(c,e)},pageId:e,title:"\u0443\u0447\u0435\u043d\u0438\u043a\u0430"});return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(Sn,{className:"container row col-12",children:[Object(C.jsx)("div",{className:"col-12 col-md-6 pad",children:Object(C.jsxs)("div",{className:"infoLog align-self-start col-md-12 col-12",children:[Object(C.jsx)("div",{className:"group-name col-12 col-lg-12",children:Object(C.jsx)("h3",{children:r})}),Object(C.jsxs)("div",{className:"time col-md-12 row",children:[Object(C.jsx)(Ln,{updateGroup:function(t){return Nn((function(e){c(e),t()}),e)},groupID:e}),Object(C.jsx)(wn,{global_schedule:i||[]})]})]})}),Object(C.jsx)("div",{className:"col-md-6 ulBox",children:Object(C.jsxs)("ul",{className:"list-group list-group-flush",children:[Object(C.jsx)(_n,{Data_ALL:a,updetePage:c}),Object(C.jsxs)("li",{className:"list-group-item",children:["\u0423\u0447\u0435\u043d\u0438\u043a\u0438: ",l," ",d]})]})}),Object(C.jsxs)(kn,{className:"container col-12",children:[Object(C.jsx)("h3",{className:"badge bg-warning",children:"\u0423\u0447\u0435\u043d\u0438\u043a\u0438:"}),u]})]})})},An=n(645),Pn=w.a.div({".ButtonUpload":{padding:0,background:"rgba(0, 0, 0, 0)",border:"none",color:"#a6adb4","&:hover":{color:"#fff"}},".ant-upload-list":{display:"none"}}),Bn=function(){var e={name:"file",action:"".concat(k.a,"/CRM/Pupils/uploadFile"),accept:".csv,.xlsx",headers:{Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},onChange:function(e){"done"===e.file.status?N.c.fire({icon:"success",title:"\u0424\u0430\u0438\u043b ".concat(e.file.name,", \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d")}):"error"===e.file.status&&(403===e.file.response.statusCode?Object(I.a)(403):N.c.fire({icon:"error",title:"\u0412 ".concat(e.file.name,", \u043e\u0448\u0438\u0431\u043a\u0438 \u043d\u0430 \u0441\u0442\u0440\u043e\u043a\u0430\u0445: ").concat(e.file.response.message.join(", "))}))}};return Object(C.jsx)(Pn,{children:Object(C.jsx)(An.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(C.jsx)(ve.a,{className:"ButtonUpload",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0444\u0430\u0439\u043b\u044b c \u0443\u0447\u0435\u043d\u0438\u043a\u0430\u043c\u0438"})}))})},Yn=n(239),zn=w.a.div({".log_h2":{},td:{paddingTop:"1px",paddingBottom:"4px"},"th, td":{padding:"16px 11px",whiteSpace:"nowrap"}}),Gn=function(e){var t=e.dataSource,n=void 0===t?[]:t,a=e.columns,c=void 0===a?[]:a,r=e.setParamFilrers,o=e.paramFilrers,i=e.update,s=void 0===i?function(){}:i;return Object(C.jsx)(zn,{children:Object(C.jsx)(ne.a,{pagination:!1,dataSource:n,columns:c,scroll:{x:0},onChange:function(e,t){var n=Object(h.a)({},o);for(var a in t)t[a]?n[a]=t[a]:"GROUP_NAME"!==a&&(n[a]=[]);s(0,n),r(n)}})})},Un=n(662),Hn=function(e,t,n,a){return{title:function(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Un.a,{onClick:function(){e[1]?t(["",""]):t([Object(C.jsx)("span",{style:{paddingLeft:"7px"},children:n}),a])}}),e[0]]})},dataIndex:"".concat(e[1]),key:"".concat(e[1])}},Wn={install_all_groups:me,setParamFilrers:function(e){return{type:"INSTALL_PARAM_FILTERS_GROUPS",payload:e}}},qn=Object(j.b)((function(e){return{dataObj:e.all_groups,paramFilrers:e.param_filters_groups}}),Wn)((function(e){var t=e.dataObj,a=e.install_all_groups,c=e.paramFilrers,r=e.setParamFilrers,o=Object(s.useState)(0),i=Object(g.a)(o,2),l=i[0],u=i[1],d=Object(s.useState)(1),j=Object(g.a)(d,2),b=j[0],p=j[1],m=Object(s.useState)(!1),x=Object(g.a)(m,2),O=x[0],v=x[1],_=Object(s.useState)({group_name:!1}),y=Object(g.a)(_,2),S=y[0],N=y[1],I=Object(s.useState)([Object(C.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0413\u0440\u0443\u043f\u043f\u0430"}),"group_name"]),T=Object(g.a)(I,2),D=T[0],E=T[1],M=Object(s.useState)([Object(C.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0433\u0440\u0443\u043f\u043f\u044b"}),"level"]),L=Object(g.a)(M,2),P=L[0],B=L[1],Y=Object(s.useState)([Object(C.jsx)("span",{style:{paddingLeft:"7px"},children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0435\u0441\u0442"}),"places"]),z=Object(g.a)(Y,2),G=z[0],U=z[1],H=Object(s.useState)([Object(C.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043c\u0435\u0441\u0442"}),"occupied"]),W=Object(g.a)(H,2),q=W[0],V=W[1],J=Object(s.useState)([Object(C.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0427\u0438\u0441\u043b\u043e \u0443\u0447\u0435\u043d\u0438\u043a\u043e\u0432"}),"NUMBER_PUPILS"]),$=Object(g.a)(J,2),Q=$[0],Z=$[1],ee=Object(s.useState)([Object(C.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0423\u0447\u0438\u0442\u0435\u043b\u044c"}),"tutor"]),te=Object(g.a)(ee,2),ne=te[0],ae=te[1],ce=n(25),re=Object(s.useState)([]),oe=Object(g.a)(re,2),le=oe[0],ue=oe[1],de=function e(){ce({method:"get",url:"".concat(k.a,"/AdminPanel/CRMAccounts?limit=100&offset=0&accountType=teacher"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){var t=e.data;ue(t)})).catch((function(t){K(e,t)}))},je=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(!0);var c={};for(var r in n)"occupied"!==r&&void 0!==n[r][0]?c["".concat(r,"s")]=n[r]:n[r].length&&(c[r]=n[r][0]);ce({method:"post",url:"".concat(k.a,"/CRM/Groups/find?limit=").concat(ie,"&offset=").concat(t),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:{filters:c}}).then((function(e){var t=e.data,n=e.headers;a(t),N({group_name:!1}),v(!1),p(n.count)})).catch((function(t){K(e,t,(function(){v(!1)}))}))};Object(s.useEffect)((function(){de(),je(0,c)}),[]);var be={group_name:{}},pe=function(e){c[e].forEach((function(t){be[e][t]=!0}))};for(var fe in be)pe(fe);var he,me=Object(s.useState)({group_name:[]}),xe=Object(g.a)(me,2),Oe=xe[0],ge=xe[1],_e=function(e,t,n){if(e[0]){var a=Object(h.a)({},Oe);a[n].push({text:e[0],value:e[0]}),ge(a),e[0]=""}},ye=t.map((function(e){var t=e.group_name,n=e.level,a=e.places,c=e.pupils,r=e.tutor,o=e._id;return{key:o,group_name:[t,o],level:n,places:a,NUMBER_PUPILS:c?c.length:"",tutor:r?"".concat(r.surname," ").concat(r.name," ").concat(r.midname):"-",occupied:c?a-c.length:""}})),Se=w.a.div({marginTop:"10px",svg:{marginBottom:"3px"}}),ke=le.map((function(e){return{text:"".concat(e.surname," ").concat(e.name),value:e._id}})),Ne=[Object(h.a)(Object(h.a)({},Hn(D,E,"\u0413\u0440\u0443\u043f\u043f\u0430","group_name")),{},{render:function(e){if(e)return Object(C.jsx)(R.b,{to:"/group/".concat(e[1]),children:e[0]})}},(he="group_name",{filterDropdown:function(e){var t=e.setSelectedKeys,n=e.selectedKeys;return e.confirm,e.clearFilters,Object(C.jsxs)("div",{style:{padding:8},children:[Object(C.jsx)(X.a,{placeholder:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440 ".concat(he),value:n[0],onChange:function(e){return t(e.target.value?[e.target.value]:[])},onPressEnter:function(){return _e(n,0,he)},style:{marginBottom:8,display:"block"}}),Object(C.jsxs)(qt.b,{children:[Object(C.jsx)(ve.a,{type:"primary",onClick:function(){_e(n,0,he)},size:"small",style:{width:140},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0444\u0438\u043b\u044c\u0442\u0440"}),Object(C.jsx)(ve.a,{type:"link",size:"small",onClick:function(){var e=Object(h.a)({},Oe);e[he]=[],ge(e);var t=Object(h.a)({},c);t[he]=[],r(t),je(0,t)},children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440"})]}),Object(C.jsx)(F.a,{children:Oe[he].map((function(e,t){var n=!1;return c[he].forEach((function(t){t==e.text&&(n=!0)})),Object(C.jsx)(F.a.Item,{children:Object(C.jsx)(Rt.a,{defaultChecked:n,onChange:function(t){t.target.checked?be[he][e.text]=!0:be[he][e.text]=!1},children:e.text})},"".concat(e.text).concat(t))}))}),Object(C.jsx)(Se,{children:Object(C.jsx)(ve.a,{loading:O,type:"primary",size:"small",icon:Object(C.jsx)(A.a,{}),onClick:function(){var e=[];for(var t in be[he])be[he][t]&&e.push(t);var n=Object(h.a)({},c);n[he]=e,r(n),ge(Oe),je(0,n)},children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440"})})]})},filterIcon:function(){var e=void 0;return c[he][0]&&(e="#1890ff"),S[he]?Object(C.jsx)(Yn.a,{}):Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(A.a,{style:{color:e}})})},onFilterDropdownVisibleChange:function(e){var t=Object(h.a)({},S);t[he]=e,N(t),e||(r(c),ge(Oe))},filterDropdownVisible:S[he]})),Object(h.a)(Object(h.a)({},Hn(P,B,"\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0433\u0440\u0443\u043f\u043f\u044b","level")),{},{filters:[{text:"1",value:1},{text:"2",value:2},{text:"3",value:3},{text:"4",value:4}],defaultFilteredValue:c.level.map((function(e){return e+""}))}),Object(h.a)({},Hn(G,U,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0435\u0441\u0442","places")),Object(h.a)(Object(h.a)({},Hn(q,V,"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043c\u0435\u0441\u0442","occupied")),{},{filters:[{text:"\u0417\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u043e",value:!1},{text:"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u043e",value:!0}],defaultFilteredValue:c.occupied.map((function(e){return"".concat(e)}))}),Object(h.a)({},Hn(Q,Z,"\u0427\u0438\u0441\u043b\u043e \u0443\u0447\u0435\u043d\u0438\u043a\u043e\u0432","NUMBER_PUPILS")),Object(h.a)(Object(h.a)({},Hn(ne,ae,"\u0423\u0447\u0438\u0442\u0435\u043b\u044c","tutor")),{},{filters:ke,defaultFilteredValue:Object(f.a)(c.tutor)})],Ie=w.a.div({padding:"0 30px"});return Object(C.jsxs)(Ie,{children:[Object(C.jsx)(Gn,{dataSource:ye,columns:Ne,setParamFilrers:r,paramFilrers:c,update:je}),Object(C.jsx)(se,{getItem:je,count:b,offset:l,setOffset:u})]})})),Kn=(n(620),w.a.div({"th, td":{padding:"16px 11px"}})),Vn=function(e){var t=e.paramFilrers,n=e.setParamFilrers,a=e.dataGroupsChecked,c=e.dataSource,r=e.update,o=e.columns,i=e.scrollLeft;Object(s.useEffect)((function(){document.querySelector(".ant-table-content").scrollLeft=i}));var l=c.map((function(e){var t=e._id,n=e.surname,a=e.name,c=e.midname,r=e.dateOfBirth,o=e.gender,i=e.phone,s=e.balance,l=e.parentPhone,u=e.parentFullname,d=e.discord,j=e.groups,b=e.tutor,p=e.statuses,f=e.createdAt;return{key:t,surname:function(){return Object(C.jsx)(R.b,{className:"link-info",to:"/student/".concat(t),children:n})},name:a,midname:c,dateOfBirth:re(r),gender:o,phoneNumber:i,tutor:b,parentFullname:u,parentPhoneNumber:l.join(", "),balance:"".concat(s),discordNickname:d,groups:j,statuses:p,createdAt:ce()(f).format("DD - MMMM - YYYY, HH:MM")}}));return Object(C.jsx)(Kn,{children:Object(C.jsx)(ne.a,{pagination:!1,dataSource:l,columns:o,scroll:{x:0},onChange:function(e,c){var o=Object(h.a)({},t);c.gender?o.gender=c.gender:o.gender=[],c.balance?o.balance=c.balance:o.balance=[],n(o),r(o,a)}})})},Jn=n(388),$n=[1020,700].map((function(e){return"@media (max-width: ".concat(e,"px)")})),Xn=w.a.div((ct={padding:"0 30px"},Object(p.a)(ct,$n[1],{padding:"0 0"}),Object(p.a)(ct,".log_h2",{}),Object(p.a)(ct,"td",{paddingTop:"1px",paddingBottom:"4px"}),Object(p.a)(ct,"th, td",{whiteSpace:"nowrap"}),ct)),Qn=w.a.div({marginTop:"10px",svg:{marginBottom:"3px"}}),Zn=function(e,t,n,a,c){return{filterDropdown:function(){return Object(C.jsxs)("div",{style:{padding:8},children:[Object(C.jsx)(F.a,{children:e.map((function(e){var n=!1,c=e._id,r=e.name;return a.statuses.forEach((function(e){c===e&&(n=!0)})),Object(C.jsx)(F.a.Item,{children:Object(C.jsx)(Rt.a,{defaultChecked:n,onChange:function(e){var n=Object(f.a)(a.statuses);e.target.checked?n.push(c):n=n.filter((function(e){return e!==c})),t(Object(h.a)(Object(h.a)({},a),{},{statuses:n}))},children:r})},c)}))}),Object(C.jsx)(Qn,{children:Object(C.jsx)(ve.a,{loading:n,type:"primary",size:"small",icon:Object(C.jsx)(A.a,{}),onClick:function(){c(a,{})},children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440"})})]})},filterIcon:function(){return Object.keys(a.statuses).length?Object(C.jsx)(Jn.a,{style:{color:"#1890ff"}}):Object(C.jsx)(Jn.a,{})}}},ea=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},c=Object(s.useState)([]),r=Object(g.a)(c,2),o=r[0];r[1];return{filterDropdown:function(){return Object(C.jsxs)("div",{style:{padding:8},children:[Object(C.jsx)(F.a,{children:o.map((function(t){var a=!1,c=t._id,r=t.name;return n.statuses.forEach((function(e){c===e&&(a=!0)})),Object(C.jsx)(F.a.Item,{children:Object(C.jsx)(Rt.a,{defaultChecked:a,onChange:function(t){var a=Object(f.a)(n.statuses);t.target.checked?a.push(c):a=a.filter((function(e){return e!==c})),e(Object(h.a)(Object(h.a)({},n),{},{statuses:a}))},children:r})},c)}))}),Object(C.jsx)(Qn,{children:Object(C.jsx)(ve.a,{loading:t,type:"primary",size:"small",icon:Object(C.jsx)(A.a,{}),onClick:function(){a(n,{})},children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440"})})]})},filterIcon:function(){return Object.keys(n.statuses).length?Object(C.jsx)(Jn.a,{style:{color:"#1890ff"}}):Object(C.jsx)(Jn.a,{})}}},ta=n(25),na=function(){var e=Object(s.useState)(""),t=Object(g.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)([{name:"1",color:"red",_id:"345"},{name:"2",color:"red",_id:"335"}]),r=Object(g.a)(c,2),o=r[0],i=r[1],l=Object(s.useState)(0),u=Object(g.a)(l,2),d=u[0],j=u[1],b=Object(s.useState)(0),p=Object(g.a)(b,2),m=p[0],x=p[1],O=Object(s.useState)([]),v=Object(g.a)(O,2),_=v[0],y=v[1],S=Object(s.useState)(0),N=Object(g.a)(S,2),I=N[0],w=N[1],T=Object(s.useState)({surname:[],name:[],midname:[],age:[],gender:[],groups:[],balance:[],statuses:[]}),D=Object(g.a)(T,2),E=D[0],R=D[1],M=Object(s.useState)(!1),L=Object(g.a)(M,2),P=L[0],B=L[1],Y=!1,z=Object(s.useState)({surname:[],name:[],midname:[],age:[],balance:[],statuses:[]}),G=Object(g.a)(z,2),U=G[0],H=G[1],W=Object(s.useState)(!1),q=Object(g.a)(W,2),V=q[0],J=q[1],$=Object(s.useState)({surname:!1,name:!1,midname:!1,age:!1,groups:!1,statuses:!1}),Q=Object(g.a)($,2),Z=Q[0],ee=Q[1],ne=Object(s.useState)([Object(C.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"}),"surname"]),ae=Object(g.a)(ne,2),ce=ae[0],re=ae[1],oe=Object(s.useState)([Object(C.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0418\u043c\u044f"}),"name"]),le=Object(g.a)(oe,2),ue=le[0],de=le[1],je=Object(s.useState)([Object(C.jsx)("span",{style:{paddingLeft:"7px"},children:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"}),"midname"]),be=Object(g.a)(je,2),pe=be[0],fe=be[1],he=Object(s.useState)([Object(C.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442"}),"dateOfBirth"]),me=Object(g.a)(he,2),xe=me[0],Oe=me[1],ge=Object(s.useState)([Object(C.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0424\u0418\u041e \u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044f"}),"parentFullname"]),_e=Object(g.a)(ge,2),ye=_e[0],Se=_e[1],ke=Object(s.useState)([Object(C.jsx)("span",{style:{paddingLeft:"7px"},children:"\u041f\u043e\u043b"}),"gender"]),Ne=Object(g.a)(ke,2),Ie=Ne[0],we=Ne[1],Ce=Object(s.useState)([Object(C.jsx)("span",{style:{paddingLeft:"7px"},children:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"}),"phoneNumber"]),Te=Object(g.a)(Ce,2),De=Te[0],Ee=Te[1],Re=Object(s.useState)([Object(C.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f"}),"createdAt"]),Me=Object(g.a)(Re,2),Le=Me[0],Fe=Me[1],Ae=Object(s.useState)([Object(C.jsx)("span",{style:{paddingLeft:"7px"},children:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f"}),"parentPhoneNumber"]),Pe=Object(g.a)(Ae,2),Be=Pe[0],Ye=Pe[1],ze=Object(s.useState)([Object(C.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0411\u0430\u043b\u0430\u043d\u0441"}),"balance"]),Ge=Object(g.a)(ze,2),Ue=Ge[0],He=Ge[1],We=Object(s.useState)([Object(C.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0414\u0438\u0441\u043a\u043e\u0440\u0434 \u043d\u0438\u043a\u043d\u0435\u0439\u043c"}),"discordNickname"]),qe=Object(g.a)(We,2),Ke=qe[0],Ve=qe[1],Je=Object(s.useState)([Object(C.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),"groups"]),$e=Object(g.a)(Je,2),Xe=$e[0],Qe=$e[1],Ze=Object(s.useState)([Object(C.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0421\u0442\u0430\u0442\u0443\u0441\u044b"}),"statuses"]),et=Object(g.a)(Ze,2),tt=et[0],nt=et[1],at=Object(s.useState)([Object(C.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0423\u0447\u0438\u0442\u0435\u043b\u044f"}),"tutors"]),ct=Object(g.a)(at,2),rt=ct[0],ot=ct[1],it={surname:{},name:{},midname:{},age:{}},st=function(e){E[e].forEach((function(t){it[e][t]=!0}))};for(var lt in it)st(lt);var ut=Object(s.useState)({}),dt=Object(g.a)(ut,2),jt=dt[0],bt=dt[1],pt=Object(s.useState)({}),ft=Object(g.a)(pt,2),ht=ft[0],mt=ft[1],xt=Object(h.a)(Object(h.a)({},jt),ht),Ot=[];for(var gt in xt)Ot.push({id:gt,text:xt[gt][0],checked:xt[gt][1]});var vt,_t=Object(s.useState)(U),yt=Object(g.a)(_t,2),St=yt[0],kt=yt[1],Nt=function(e,t,n){if(e[0]){var a=Object(h.a)({},St);a[n].push({text:e[0],value:e[0]}),kt(a),e[0]=""}},It=function(e){return"age"===e?"block":" none"},wt=function(e){return{filterDropdown:function(t){var n,a=t.setSelectedKeys,c=t.selectedKeys;t.confirm,t.clearFilters;return Object(C.jsxs)("div",{style:{padding:8},children:[Object(C.jsx)(X.a,{type:(n=e,"age"===n?"number":"text"),placeholder:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440 ".concat(e),value:c[0],onChange:function(e){return a(e.target.value?[e.target.value]:[])},onPressEnter:function(){return Nt(c,0,e)},style:{marginBottom:8,display:"block"}}),Object(C.jsx)(qt.b,{children:Object(C.jsx)(ve.a,{type:"primary",onClick:function(){Nt(c,0,e)},size:"small",style:{width:140},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0444\u0438\u043b\u044c\u0442\u0440"})}),Object(C.jsxs)(F.a,{children:[St[e].map((function(t,n){var a=!1;return E[e].forEach((function(e){e==t.text&&(a=!0)})),Object(C.jsx)(F.a.Item,{children:Object(C.jsx)(Rt.a,{defaultChecked:a,onChange:function(n){n.target.checked?it[e][t.text]=!0:it[e][t.text]=!1},children:t.text})},"".concat(t.text).concat(n))})),Object(C.jsx)(F.a.Item,{style:{display:It(e)},children:Object(C.jsx)(Rt.a,{defaultChecked:P,onChange:function(e){Y=e.target.checked},children:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"})},"emptyAge")]}),Object(C.jsx)(Qn,{children:Object(C.jsx)(ve.a,{loading:V,type:"primary",size:"small",icon:Object(C.jsx)(A.a,{}),onClick:function(){var t=[];for(var n in it[e])it[e][n]&&t.push(n);var a=Object(h.a)({},E);a[e]=t,R(a),H(St),At(a,jt)},children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440"})})]})},filterIcon:function(){var t=void 0;return E[e][0]&&(t="#1890ff"),Z[e]?Object(C.jsx)(Yn.a,{}):Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(A.a,{style:{color:t}})})},onFilterDropdownVisibleChange:function(t){var n=Object(h.a)({},Z);n[e]=t,ee(n),t||(R(E),H(St))},filterDropdownVisible:Z[e]}},Ct=function e(t){var n=encodeURI(t);ta({method:"get",url:"".concat(k.a,"/CRM/Search/autocompletion?query=").concat(n),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){var n={};e.data.body.hits.hits.map((function(e){var t=e._source,a=t.id,c=t.group_name;"group"===t.type&&(n[a]=["".concat(c),!1])})),a(t),mt(n)})).catch((function(t){K(e,t)}))},Tt=function(e){clearTimeout(vt),e?vt=setTimeout((function(){Ct(e)}),500):(a(""),mt({}))},Dt=Object(s.useState)({filters:{}}),Et=Object(g.a)(Dt,2),Mt=Et[0],Lt=Et[1],Ft=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;J(!0),ta({method:"post",url:"".concat(k.a,"/CRM/Pupils/find?limit=").concat(ie,"&offset=").concat(t),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:n||Mt}).then((function(e){var t=e.data,n=e.headers;y(t),x(n.count),ee({surname:!1,name:!1,midname:!1}),J(!1)})).catch((function(t){K(e,t,(function(){J(!1)}))}))},At=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};for(var a in t)n.groups||(n.groups=[]),n.groups.push(a);for(var c in e)e[c][0]&&("surname"===c||"name"===c||"midname"===c||"age"===c?n["".concat(c,"s")]=e[c]:n["".concat(c)]=e[c]);if(n.ages){var r=Object(f.a)(n.ages);n.ages=[],r.forEach((function(e){n.ages.push(+e)}))}if(n.balance){var o=Object(f.a)(n.balance);1==o[0]&!o[1]?n.balance={$gte:0}:2==o[0]&!o[1]?n.balance={$lt:0}:o[1]&&(n.balance={$gte:0,$lte:0})}n.emptyAge=Y;var i={filters:n};B(Y),Lt(i),Ft(0,i)};Object(s.useEffect)((function(){Ft(),Jt(i,J)}),[]),Object(s.useEffect)((function(){var e=document.getElementById("inputGroup");e&&e.focus()}));var Pt=[Object(h.a)(Object(h.a)({},Hn(ce,re,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f","surname")),{},{render:function(e){if("function"==typeof e)return e()}},wt("surname")),Object(h.a)(Object(h.a)({},Hn(ue,de,"\u0418\u043c\u044f","name")),wt("name")),Object(h.a)(Object(h.a)({},Hn(pe,fe,"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e","midname")),wt("midname")),Object(h.a)(Object(h.a)({},Hn(xe,Oe,"\u0412\u043e\u0437\u0440\u0430\u0441\u0442","age")),wt("age")),Object(h.a)(Object(h.a)({},Hn(Ie,we,"\u041f\u043e\u043b","gender")),{},{filters:[{text:"\u041c\u0443\u0436\u0441\u043a\u043e\u0439",value:"\u041c\u0443\u0436\u0441\u043a\u043e\u0439"},{text:"\u0416\u0435\u043d\u0441\u043a\u0438\u0439",value:"\u0416\u0435\u043d\u0441\u043a\u0438\u0439"}],defaultFilteredValue:Object(f.a)(E.gender)}),Object(h.a)(Object(h.a)({},Hn(tt,nt,"\u0421\u0442\u0430\u0442\u0443\u0441\u044b","statuses")),{},{render:function(e){if(e&&e[0])return e.map((function(e){var t=e.color,n=e._id,a=e.name;return Object(C.jsx)(te.a,{color:t,children:a},n)}))}},Zn(o,R,V,E,At)),Object(h.a)(Object(h.a)({},Hn(rt,ot,"\u0423\u0447\u0438\u0442\u0435\u043b\u044f","tutors")),Object(C.jsx)(ea,{})),Object(h.a)({},Hn(De,Ee,"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430","phoneNumber")),Object(h.a)({},Hn(Le,Fe,"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f","createdAt")),Object(h.a)({},Hn(Be,Ye,"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f","parentPhoneNumber")),Object(h.a)({},Hn(ye,Se,"\u0424\u0418\u041e \u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044f","parentFullname")),Object(h.a)(Object(h.a)({},Hn(Ue,He,"\u0411\u0430\u043b\u0430\u043d\u0441","balance")),{},{filters:[{text:"\u041f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439",value:"1"},{text:"\u041e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439",value:"2"}],defaultFilteredValue:Object(f.a)(E.balance)}),Object(h.a)(Object(h.a)({},Hn(Xe,Qe,"\u0413\u0440\u0443\u043f\u043f\u044b","groups")),{},{render:function(e){if(e)return e.map((function(e){return Object(C.jsx)(te.a,{color:"blue",children:e.group_name},"".concat(e._id))}))}},{filterDropdown:function(e){return e.setSelectedKeys,e.selectedKeys,e.confirm,e.clearFilters,Object(C.jsxs)("div",{style:{padding:8},children:[Object(C.jsx)(X.a,{id:"inputGroup",placeholder:"\u041d\u0430\u0439\u0442\u0438 \u0433\u0440\u0443\u043f\u043f\u044b",defaultValue:n,onChange:function(e){Tt(e.target.value)},onPressEnter:function(){},style:{marginBottom:8,display:"block"}}),Object(C.jsx)(F.a,{children:Ot.map((function(e){var t=e.id,n=e.text,a=e.checked;return Object(C.jsx)(F.a.Item,{children:Object(C.jsx)(Rt.a,{defaultChecked:a,onChange:function(e){var a=Object(h.a)({},jt);e.target.checked?a[t]=[n,!0]:delete a[t],bt(a),mt({})},children:n})},t)}))}),Object(C.jsx)(Qn,{children:Object(C.jsx)(ve.a,{loading:V,type:"primary",size:"small",icon:Object(C.jsx)(A.a,{}),onClick:function(){At(E,jt)},children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440"})})]})},onFilterDropdownVisibleChange:function(e){w(e?document.querySelector(".ant-table-content").scrollLeft:0);var t=Object(h.a)({},Z);t.groups=e,ee(t),e||At(E,jt)},filterDropdownVisible:Z.groups,filterIcon:function(){return Object.keys(jt).length?Object(C.jsx)(Jn.a,{style:{color:"#1890ff"}}):Object(C.jsx)(Jn.a,{})}}),Object(h.a)({},Hn(Ke,Ve,"\u0414\u0438\u0441\u043a\u043e\u0440\u0434 \u043d\u0438\u043a\u043d\u0435\u0439\u043c","discordNickname"))];return Object(C.jsxs)(Xn,{children:[Object(C.jsx)(Vn,{paramFilrers:E,setParamFilrers:R,globalFiltersG:St,setGlobalFiltersG:kt,dataGroupsChecked:jt,setDataGroupsChecked:bt,dataSource:_,update:At,loadingButtomFilrer:V,setLoadingButtomFilrer:J,filterDropdownVisible:Z,setFilterDropdownVisible:ee,columns:Pt,scrollLeft:I}),Object(C.jsx)(se,{getItem:Ft,count:m,offset:d,setOffset:j})]})},aa=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(){return Object(C.jsx)(l.a.Suspense,{fallback:e,children:Object(C.jsx)(t,Object(h.a)({},n))})}},ca=w.a.div(rt||(rt=Object(S.a)(["\n  .trial-lesson-schedule-skeleton {\n    display: block;\n\n    div {\n      display: block;\n      width: 100%;\n\n      span {\n        width: 100%;\n        margin-bottom: 8px;\n        height: 56px;\n      }\n    }\n  }\n\n  .trial-lesson-schedule {\n    td {\n      padding: 10px 10px;\n    }\n\n    .ant-checkbox-inner {\n      height: 20px;\n      width: 20px;\n    }\n  }\n\n  .trial-lesson-schedule-comments {\n    display: flex;\n\n    button {\n      margin: auto 0;\n      margin-left: 8px;\n    }\n  }\n"]))),ra=n(655),oa=function e(t,n,a,c,r){r(!0);var o=[Object(h.a)(Object(h.a)({},n.global_schedule[0]),{},{title:t})];n.pupils.forEach((function(e){c(e.id,t)})),sa(n._id,o).then((function(e){r(!1),a(e.data)})).catch((function(a){K((function(){e(t,n)}),a,(function(){r(!1)}))}))},ia=function e(t,n){return de()({method:"post",url:"".concat(k.a,"/CRM/Pupils/").concat(t,"/Notes"),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:{text:n}}).catch((function(a){K((function(){return e(t,n)}),a,!1)}))},sa=function(e,t){return de()({method:"post",url:"".concat(k.a,"/CRM/Groups/").concat(e,"/Schedule"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:t})},la=function e(t,n){t(!0),de()({method:"post",url:"".concat(k.a,"/CRM/Groups/find?limit=100&offset=",0,"&trial=true"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){n(e.data),t(!1)})).catch((function(a){K((function(){return e(n)}),a,(function(){return t(!1)}))}))},ua=function e(t,n,a,c){a(!0),de()({method:"DELETE",url:"".concat(k.a,"/CRM/Groups/").concat(t),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(){n(t),c()})).catch((function(c){K((function(){return e(t,n,a)}),c,(function(){return a(!1)}))}))},da=function e(t,n,a,c,r){var o=[Object(h.a)(Object(h.a)({},a[0]),{},{status:t?2:3,title:c.pupils[0].localSchedule[n][0].title})];r(Object(h.a)(Object(h.a)({},c),{},{global_schedule:o})),sa(n,o).catch((function(o){K((function(){return e(t,n,a)}),o,(function(){r(c)}))}))},ja={free_day_for_teacher:function(e,t,n){return{type:"FREE_DAY_FOR_TEACHER",payload:{time:e,day:t,tutor:n}}}},ba=Object(j.b)((function(){return{}}),ja)((function(e){var t=e.setFnc,n=e.free_day_for_teacher,a=Object(s.useState)(!1),c=Object(g.a)(a,2),r=c[0],o=c[1];return Object(C.jsx)(ve.a,{danger:!0,loading:r,onClick:function(){return t(o,n)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})),pa=function(e){var t=e.data,n=e.change_trial_lessons,a=Object(s.useState)(t.pupils[0]?t.pupils[0].localSchedule[t._id][0].title:""),c=Object(g.a)(a,2),r=c[0],o=c[1],i=Object(s.useState)(!1),l=Object(g.a)(i,2),u=l[0],d=l[1];return Object(C.jsxs)("div",{className:"trial-lesson-schedule-comments",children:[Object(C.jsx)(X.a.TextArea,{value:r,onChange:function(e){return o(e.target.value)}}),Object(C.jsx)(ve.a,{loading:u,onClick:function(){oa(r,t,n,ia,d)},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})},fa={change_trial_lessons:function(e){return{type:"CHANGE_TRIAL_LESSONS",payload:e}},install_trial_lessons:function(e){return{type:"INSTALL_TRIAL_LESSONS",payload:e}},delete_trial_lessons:function(e){return{type:"DELETE_TRIAL_LESSONS",payload:e}}},ha=Object(j.b)((function(e){return{trial_lessons:e.trial_lessons,selected_subject:e.selected_subject}}),fa)((function(e){var t=e.trial_lessons,n=e.change_trial_lessons,a=e.install_trial_lessons,c=e.delete_trial_lessons,r=e.selected_subject,o=Object(s.useState)(!1),i=Object(g.a)(o,2),l=i[0],u=i[1];Object(s.useEffect)((function(){la(u,a)}),[]);var d=t.map((function(e){var t=e.global_schedule[0].duration[0].substr(0,2),n=ce()(e.global_schedule[0].date,"DD.MM.YYYY").locale("en").format("dddd").substr(0,2);return Object(h.a)(Object(h.a)({},e),{},{group:e,key:e._id,delete_group:{tutor:e.tutor,hour:"hour".concat("0"===t[0]?t[1]:t),day:n,_id:e._id},group_name:{name:e.group_name,id:e._id},comment:{pupils:e.pupils,group_id:e._id}})})),j=[{title:"\u0423\u0440\u043e\u043a \u043f\u0440\u043e\u0439\u0434\u0435\u043d",dataIndex:"group",key:"group",render:function(e){var t=2===e.global_schedule[0].status;return Object(C.jsx)(Rt.a,{loading:!0,checked:t,onChange:function(t){da(t.target.checked,e._id,e.global_schedule,e,n)}})}},{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"group_name",key:"group_name",render:function(e){return Object(C.jsx)(R.b,{to:"/group/".concat(e.id),children:e.name})}},{title:"\u0423\u0447\u0435\u043d\u0438\u043a\u0438",dataIndex:"pupils",key:"pupils",render:function(e){return Object(C.jsx)(wt.b,{size:"small",children:e.map((function(e){var t=e.surname,n=e.name,a=e.midname,c=e._id;return Object(C.jsx)(wt.b.Item,{children:Object(C.jsx)(R.b,{to:"/student/".concat(c),children:"".concat(t," ").concat(n," ").concat(a)})},c)}))})}},{title:"\u0423\u0447\u0438\u0442\u0435\u043b\u044c",dataIndex:"tutor",key:"tutor",render:function(e){var t=e.surname,n=e.name,a=e.midname;return"".concat(t," ").concat(n," ").concat(a)}},{title:"\u0414\u0430\u0442\u0430 \u0443\u0440\u043e\u043a\u0430",dataIndex:"global_schedule",key:"global_schedule",render:function(e){var t=e[0],n=t.date,a=t.duration;return"".concat(n,"\u0433., \u0441 ").concat(a[0]," \u0434\u043e ").concat(a[1])}},{title:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",dataIndex:"group",key:"comment",render:function(e){return Object(C.jsx)(pa,{data:e,change_trial_lessons:n})}},{title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0433\u0440\u0443\u043f\u043f",dataIndex:"delete_group",key:"delete_group",render:function(e){return Object(C.jsx)(ba,{setFnc:function(t,n){ua(e._id,c,t,(function(){r===e.tutor.subject&&n(e.hour,e.day,e.tutor)}))}})}}],b=Object(C.jsxs)(qt.b,{className:"trial-lesson-schedule-skeleton",children:[Object(C.jsx)(Wt.a.Button,{active:!0,size:"large",block:!0},"0"),Object(C.jsx)(Wt.a.Button,{active:!0,size:"large",block:!0},"1"),Object(C.jsx)(Wt.a.Button,{active:!0,size:"large",block:!0},"2"),Object(C.jsx)(Wt.a.Button,{active:!0,size:"large",block:!0},"3")]}),p=Object(C.jsx)(ne.a,{className:"trial-lesson-schedule",dataSource:d,columns:j});return Object(C.jsx)(C.Fragment,{children:l?b:p})})),ma=w.a.div(ot||(ot=Object(S.a)(["\n  margin-bottom: 16px;\n\n  .select {\n    margin-bottom: 16px;\n  }\n\n  .week-and-pupils {\n    display: flex;\n  }\n\n  .selection-students {\n    margin-left: 8px;\n    flex: 1;\n  }\n\n  table {\n    margin-right: 8px;\n  }\n\n  .none-table {\n    opacity: 0.2;\n  }\n\n  .chosen_teacher {\n    margin-top: 16px;\n\n    td {\n      background: #002140;\n      color: #fff;\n    }\n\n    .date {\n      .anticon-double-left {\n        position: relative;\n        top: -1px;\n        color: #1890ff;\n        font-size: 19px;\n        cursor: pointer;\n        margin-right: 8px;\n      }\n      .anticon-double-right {\n        position: relative;\n        top: -1px;\n        color: #1890ff;\n        font-size: 19px;\n        cursor: pointer;\n        margin-left: 8px;\n      }\n    }\n  }\n"]))),xa=w.a.table(it||(it=Object(S.a)(["\n  user-select: none;\n  width: 70%;\n\n  tr {\n    border-bottom: 1px solid #002140;\n  }\n\n  .week {\n    td {\n      text-align: left;\n      background: #001529;\n      color: #fff;\n      border-right: 1px solid #002140;\n    }\n\n    .white {\n      background: #f0f2f5;\n    }\n  }\n\n  .time {\n    background: #001529;\n    color: #fff;\n  }\n\n  td {\n    padding: 10px;\n    width: 12.5%;\n    height: 50px;\n    text-align: right;\n  }\n\n  .td {\n    padding: 0;\n    border-right: 1px solid #002140;\n\n    .ant-list-item {\n      padding: 0 7px;\n      display: flex;\n    }\n\n    .item-span {\n      width: 6px;\n      height: 6px;\n      background: #52c41a;\n      border-radius: 50%;\n      margin-right: 2px;\n    }\n  }\n"]))),Oa={when_choosing_subject:function(e){return{type:"WHEN_CHOOSING_SUBJECT",payload:e}},specify_loading:function(e){return{type:"SPECIFY_LOADING",payload:e}},set_subject_teachers:function(e){return{type:"SET_SUBJECT_TEACHERS",payload:e}},set_local_week:function(e){return{type:"SET_LOCAL_WEEK",payload:e}},set_chosen_teacher:function(e){return{type:"SET_CHOSEN_TEACHER",payload:e}},set_trial_lesson_day:he},ga={hour8:{Mo:{free:!0,tutors:[]},Tu:{free:!0,tutors:[]},We:{free:!0,tutors:[]},Th:{free:!0,tutors:[]},Fr:{free:!0,tutors:[]},Sa:{free:!0,tutors:[]},Su:{free:!0,tutors:[]}},hour9:{Mo:{free:!0,tutors:[]},Tu:{free:!0,tutors:[]},We:{free:!0,tutors:[]},Th:{free:!0,tutors:[]},Fr:{free:!0,tutors:[]},Sa:{free:!0,tutors:[]},Su:{free:!0,tutors:[]}},hour10:{Mo:{free:!0,tutors:[]},Tu:{free:!0,tutors:[]},We:{free:!0,tutors:[]},Th:{free:!0,tutors:[]},Fr:{free:!0,tutors:[]},Sa:{free:!0,tutors:[]},Su:{free:!0,tutors:[]}},hour11:{Mo:{free:!0,tutors:[]},Tu:{free:!0,tutors:[]},We:{free:!0,tutors:[]},Th:{free:!0,tutors:[]},Fr:{free:!0,tutors:[]},Sa:{free:!0,tutors:[]},Su:{free:!0,tutors:[]}},hour12:{Mo:{free:!0,tutors:[]},Tu:{free:!0,tutors:[]},We:{free:!0,tutors:[]},Th:{free:!0,tutors:[]},Fr:{free:!0,tutors:[]},Sa:{free:!0,tutors:[]},Su:{free:!0,tutors:[]}},hour13:{Mo:{free:!0,tutors:[]},Tu:{free:!0,tutors:[]},We:{free:!0,tutors:[]},Th:{free:!0,tutors:[]},Fr:{free:!0,tutors:[]},Sa:{free:!0,tutors:[]},Su:{free:!0,tutors:[]}},hour14:{Mo:{free:!0,tutors:[]},Tu:{free:!0,tutors:[]},We:{free:!0,tutors:[]},Th:{free:!0,tutors:[]},Fr:{free:!0,tutors:[]},Sa:{free:!0,tutors:[]},Su:{free:!0,tutors:[]}},hour15:{Mo:{free:!0,tutors:[]},Tu:{free:!0,tutors:[]},We:{free:!0,tutors:[]},Th:{free:!0,tutors:[]},Fr:{free:!0,tutors:[]},Sa:{free:!0,tutors:[]},Su:{free:!0,tutors:[]}},hour16:{Mo:{free:!0,tutors:[]},Tu:{free:!0,tutors:[]},We:{free:!0,tutors:[]},Th:{free:!0,tutors:[]},Fr:{free:!0,tutors:[]},Sa:{free:!0,tutors:[]},Su:{free:!0,tutors:[]}},hour17:{Mo:{free:!0,tutors:[]},Tu:{free:!0,tutors:[]},We:{free:!0,tutors:[]},Th:{free:!0,tutors:[]},Fr:{free:!0,tutors:[]},Sa:{free:!0,tutors:[]},Su:{free:!0,tutors:[]}},hour18:{Mo:{free:!0,tutors:[]},Tu:{free:!0,tutors:[]},We:{free:!0,tutors:[]},Th:{free:!0,tutors:[]},Fr:{free:!0,tutors:[]},Sa:{free:!0,tutors:[]},Su:{free:!0,tutors:[]}},hour19:{Mo:{free:!0,tutors:[]},Tu:{free:!0,tutors:[]},We:{free:!0,tutors:[]},Th:{free:!0,tutors:[]},Fr:{free:!0,tutors:[]},Sa:{free:!0,tutors:[]},Su:{free:!0,tutors:[]}},hour20:{Mo:{free:!0,tutors:[]},Tu:{free:!0,tutors:[]},We:{free:!0,tutors:[]},Th:{free:!0,tutors:[]},Fr:{free:!0,tutors:[]},Sa:{free:!0,tutors:[]},Su:{free:!0,tutors:[]}},hour21:{Mo:{free:!0,tutors:[]},Tu:{free:!0,tutors:[]},We:{free:!0,tutors:[]},Th:{free:!0,tutors:[]},Fr:{free:!0,tutors:[]},Sa:{free:!0,tutors:[]},Su:{free:!0,tutors:[]}}},va={hour8:{Mo:!1,Tu:!1,We:!1,Th:!1,Fr:!1,Sa:!1,Su:!1},hour9:{Mo:!1,Tu:!1,We:!1,Th:!1,Fr:!1,Sa:!1,Su:!1},hour10:{Mo:!1,Tu:!1,We:!1,Th:!1,Fr:!1,Sa:!1,Su:!1},hour11:{Mo:!1,Tu:!1,We:!1,Th:!1,Fr:!1,Sa:!1,Su:!1},hour12:{Mo:!1,Tu:!1,We:!1,Th:!1,Fr:!1,Sa:!1,Su:!1},hour13:{Mo:!1,Tu:!1,We:!1,Th:!1,Fr:!1,Sa:!1,Su:!1},hour14:{Mo:!1,Tu:!1,We:!1,Th:!1,Fr:!1,Sa:!1,Su:!1},hour15:{Mo:!1,Tu:!1,We:!1,Th:!1,Fr:!1,Sa:!1,Su:!1},hour16:{Mo:!1,Tu:!1,We:!1,Th:!1,Fr:!1,Sa:!1,Su:!1},hour17:{Mo:!1,Tu:!1,We:!1,Th:!1,Fr:!1,Sa:!1,Su:!1},hour18:{Mo:!1,Tu:!1,We:!1,Th:!1,Fr:!1,Sa:!1,Su:!1},hour19:{Mo:!1,Tu:!1,We:!1,Th:!1,Fr:!1,Sa:!1,Su:!1},hour20:{Mo:!1,Tu:!1,We:!1,Th:!1,Fr:!1,Sa:!1,Su:!1},hour21:{Mo:!1,Tu:!1,We:!1,Th:!1,Fr:!1,Sa:!1,Su:!1}},_a=function(){var e=Object(y.a)(_.a.mark((function e(t,n,a){var c,r,o;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=JSON.parse(JSON.stringify(ga)),r=0,o=0,0===t.length&&(n(c),a(!1)),t.forEach((function(e){var t=e.groups,i=[],s="",l="",u="",d=e.workHours?e.workHours:JSON.parse(JSON.stringify(va));0===t.length&&(r+=1,b([]));var j=function(){r+=1};function b(t){var i=[["\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","Mo"],["\u0432\u0442\u043e\u0440\u043d\u0438\u043a","Tu"],["\u0441\u0440\u0435\u0434\u0430","We"],["\u0447\u0435\u0442\u0432\u0435\u0440\u0433","Th"],["\u043f\u044f\u0442\u043d\u0438\u0446\u0430","Fr"],["\u0441\u0443\u0431\u0431\u043e\u0442\u0430","Sa"],["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","Su"]],l=[];t.forEach((function(e){l.push(ce()(e.date,"DD.MM.YYYY").format("dddd"))})),l.forEach((function(e){i.forEach((function(t){if(e===t[0])if(0===u)d["hour".concat(s)][t[1]]=!1;else for(var n=0;n<u;++n)d["hour".concat(+s+n)][t[1]]=!1}))})),i.forEach((function(t){["8","9","10","11","12","13","14","15","16","17","18","19","20","21"].forEach((function(n){if(!0===d["hour".concat(n)][t[1]]){c["hour".concat(n)][t[1]].tutors.push(e);var a=Object(f.a)(c["hour".concat(n)][t[1]].tutors);c["hour".concat(n)][t[1]].tutors=a.reduce((function(e,t){return-1!==e.indexOf(t)?e:[].concat(Object(f.a)(e),[t])}),[])}else c["hour".concat(n)][t[1]].tutors=c["hour".concat(n)][t[1]].tutors.filter((function(t){return t._id!==e._id}))}))})),r>=o&&(n(c),a(!1))}t.forEach((function(e,t){o+=1,Nn((function(e){i=e.global_schedule.filter((function(e,t){return t<7}));var t=e.global_schedule[0].duration,n=t[0].substr(0,2),a=t[1].substr(0,2);s="0"===n[0]?n[1]:n,l="0"===a[0]?a[1]:a,u=+l-+s,j(),b(i)}),e,(function(){j(),b([])}),!1)}))}));case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),ya=function e(t,n,a,c,r){n?(a(!0),de()({method:"get",url:"".concat(k.a,"/CRM/Teachers?limit=100&offset=",0,"&subject=").concat(n),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){var n=e.data;t(n),r(n)})).catch((function(c){return K((function(){return e(t,n,a)}),c,(function(){return a(!1)}))}))):a(!1)},Sa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=null;switch(e){case"Mo":a=1;break;case"Tu":a=2;break;case"We":a=3;break;case"Th":a=4;break;case"Fr":a=5;break;case"Sa":a=6;break;case"Su":a=0}var c=t?ce()(t,"DD.MM.YYYY"):ce()(),r=c.day();return a<=r&&(n?a+=7:a-=7),c.day(a).format("DD.MM.YYYY")},ka=function(e,t,n,a,c,r,o,i){var s=a,l=function(n){e.push(Object(C.jsx)("td",{className:"td",style:{background:t[n].tutors[0]?"#fff":"rgb(166 173 180)"},children:Object(C.jsx)(wt.b,{className:t[n].tutors[0]?"":"displayNone",size:"small",children:t[n].tutors.map((function(e){var t=e.surname,a=e.name,l=e.midname,u=e._id,d=i(n);return Object(C.jsxs)(wt.b.Item,{onClick:function(){c({tutor:e,time:s,index:n}),o(d)},style:{background:r.tutor._id===u&&r.time===s&&r.index===n?"aquamarine":"#fff"},children:[Object(C.jsx)("div",{className:"item-span"}),"".concat(a[0],".").concat(l[0],".").concat(t)]},u)}))})},"".concat(n).concat(t)))};for(var u in t)l(u);return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{className:"time",children:a}),e]})},Na=Oe.a.Option,Ia=function(e){return e.map((function(e){return Object(C.jsx)(Na,{value:e,children:e},e)}))},wa=w.a.div(st||(st=Object(S.a)(["\n  background: #fff;\n\n  .find-students-for-trial-lesson {\n    background: #fff;\n\n    .Button {\n      width: 100%;\n      color: #000;\n      text-transform: none;\n    }\n\n    .MuiListItem-root {\n      border-bottom: 1px solid #f0f0f0;\n    }\n  }\n\n  .list-students-for-trial-lesson {\n    margin-top: 16px;\n    background: #fff;\n    border-top: 1px solid rgb(82, 196, 26);\n\n    .item {\n      padding: 8px 16px;\n      display: flex;\n      width: 100%;\n      justify-content: space-between;\n\n      .delete {\n        width: 14px;\n      }\n\n      .title {\n        padding: 0 10px;\n        word-wrap: break-word;\n        width: 100%\n      }\n\n      & > div {\n        margin: auto 0;\n      }\n    }\n  }\n"]))),Ca=n(651),Ta=n(657),Da=n(642),Ea=n(653),Ra={add_pupil_to_trial_lesson:function(e){return{type:"ADD_PUPIL_TO_TRIAL_LESSON",payload:e}}},Ma=Object(j.b)((function(e){return{students_for_trial_lesson:e.students_for_trial_lesson}}),Ra)((function(e){var t=e.students_for_trial_lesson,n=e.add_pupil_to_trial_lesson,a=Object(s.useState)([]),c=Object(g.a)(a,2),r=c[0],o=c[1],i=Object(s.useState)(""),l=Object(g.a)(i,2),u=l[0],d=l[1];return Object(C.jsxs)("div",{className:"find-students-for-trial-lesson",children:[Object(C.jsx)("div",{children:Object(C.jsx)(X.a,{value:u,onChange:function(e){e.target.value&&J((function(e){var t=e.map((function(e){var t=e._index,n=e._source;if("pupils"===t)return n}));o(t.filter((function(e){return e})))}),encodeURI(e.target.value)),d(e.target.value)},placeholder:"\u041f\u043e\u0434\u0431\u0435\u0440\u0438 \u0443\u0447\u0435\u043d\u0438\u043a\u043e\u0432 \u0434\u043b\u044f \u0443\u0440\u043e\u043a\u0430"})}),Object(C.jsx)(wt.b,{size:"large",bordered:!0,dataSource:r,renderItem:function(e){var a=e.name,c=e.surname,r=e.midname,o=e.id,i="";return t.forEach((function(e){e.id===o&&(i="line-through")})),Object(C.jsx)(Ca.a,{disablePadding:!0,children:Object(C.jsx)(Ta.a,{className:"Button",disabled:!!i,children:Object(C.jsx)(Da.a,{onClick:function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>3?arguments[3]:void 0,a=!0;(arguments.length>2?arguments[2]:void 0).forEach((function(t){t.id===e.id&&(a=!1)})),a&&(n(e),t())}(e,(function(){return d("")}),t,n)},dense:!0,children:Object(C.jsx)(Ea.a,{style:{textDecoration:i},id:o,primary:[c,a,r].join(" ")})})})},o)}})]})})),La={delete_pupil_to_trial_lesson:function(e){return{type:"DELETE_PUPIL_TO_TRIAL_LESSON",payload:e}}},Fa=Object(j.b)((function(e){return{students_for_trial_lesson:e.students_for_trial_lesson}}),La)((function(e){var t=e.students_for_trial_lesson,n=e.delete_pupil_to_trial_lesson;return Object(C.jsx)("div",{className:"list-students-for-trial-lesson",children:Object(C.jsx)(wt.b,{size:"large",bordered:!0,dataSource:t,renderItem:function(e){var t=e.surname,a=e.name,c=e.midname,r=e.id;return Object(C.jsx)(wt.b.Item,{style:{padding:0},children:Object(C.jsxs)("div",{className:"item",children:[Object(C.jsx)("div",{className:"title",children:Object(C.jsx)(R.b,{to:"/student/".concat(r),children:[t,a,c].join(" ")})}),Object(C.jsx)("div",{className:"delete",children:Object(C.jsx)(Kt.a,{onClick:function(){return n(r)},style:{color:"red"}})})]})})}})})})),Aa=function(){return Object(C.jsxs)(wa,{children:[Object(C.jsx)(Ma,{}),Object(C.jsx)(Fa,{})]})},Pa=n(654),Ba=n(386),Ya=n(387),za={set_trial_lesson_day:he},Ga=Object(j.b)((function(e){return{date:e.trial_lesson_day,tutor:e.chosen_teacher}}),za)((function(e){var t=e.date,n=e.tutor,a=e.set_trial_lesson_day,c=n.tutor,r=c.surname,o=c.name,i=c.midname,s=function(e){var n=ce()(t,"DD.MM.YYYY").lang("en").format("dd");a(Sa(n,t,e))};return Object(C.jsx)("div",{className:"chosen_teacher",children:Object(C.jsxs)(Pa.b,{bordered:!0,size:"small",column:1,children:[Object(C.jsx)(Pa.b.Item,{label:"\u0423\u0447\u0438\u0442\u0435\u043b\u044c",children:"".concat(r," ").concat(o," ").concat(i)}),Object(C.jsx)(Pa.b.Item,{label:"\u0414\u0430\u0442\u0430 \u0443\u0440\u043e\u043a\u0430",className:"date",children:t?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Ba.a,{onClick:function(){return s(0)}}),t?ce()(t,"DD.MM.YYYY").format("DD - MMMM - YYYY"):"",Object(C.jsx)(Ya.a,{onClick:function(){return s(1)}})]}):""}),Object(C.jsx)(Pa.b.Item,{label:"\u041d\u0430\u0447\u0430\u043b\u043e \u0443\u0440\u043e\u043a\u0430",children:"".concat(n.time?"\u0432":""," ").concat(n.time)})]})})})),Ua={add_trial_lessons:function(e){return{type:"ADD_TRIAL_LESSONS",payload:e}},clear_pupil_to_trial_lesson:function(){return{type:"CLEAR_PUPIL_TO_TRIAL_LESSON"}}},Ha=Object(j.b)((function(e){return{tutor:e.chosen_teacher.tutor,StartTime:e.chosen_teacher.time,EndTime:"".concat(ce()(e.chosen_teacher.time,"HH").add(1,"h").format("HH"),":00"),date:e.trial_lesson_day,pupils_id:e.students_for_trial_lesson.map((function(e){return e.id})),subject:e.selected_subject}}),Ua)((function(e){var t=e.pupils_id,n=e.date,a=e.tutor,c=e.StartTime,r=e.EndTime,o=e.subject,i=e.add_trial_lessons,l=e.updateTeachers,u=e.clear_pupil_to_trial_lesson,d=Object(s.useState)(!1),j=Object(g.a)(d,2),b=j[0],p=j[1];return Object(C.jsx)(ve.a,{style:{marginTop:"16px"},type:"primary",loading:b,onClick:function e(){n&&a._id&&t.length&&o&&(p(!0),de()({method:"POST",url:"".concat(k.a,"/CRM/Groups"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:{group_name:"\u041f\u0440\u043e\u0431\u043d\u044b\u0439 \u0443\u0440\u043e\u043a: ".concat(o),tutor:a._id,level:1,places:t.length,pupils:t,trial:!0,global_schedule:[{duration:[c,r],status:2,date:n,paid:!1}]}}).then((function(e){p(!1),i(e.data),Object(N.f)("\u041f\u0440\u043e\u0431\u043d\u044b\u0439 \u0443\u0440\u043e\u043a \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d!"),l(),u()})).catch((function(t){K(e,t,(function(){p(!1),u()}))})))},children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0443\u0440\u043e\u043a"})})),Wa=Object(j.b)((function(e){return{subjects:e.all_disciplines,selected_subject:e.selected_subject,loading:e.loading,subject_teachers:e.subject_teachers,week:e.local_week,chosen_teacher:e.chosen_teacher}}),Oa)((function(e){var t=e.subjects,n=e.when_choosing_subject,a=e.selected_subject,c=e.specify_loading,r=e.loading,o=e.set_subject_teachers,i=e.week,l=e.set_local_week,u=e.set_chosen_teacher,d=e.chosen_teacher,j=e.set_trial_lesson_day,b=i.hour8,p=i.hour9,f=i.hour10,h=i.hour11,m=i.hour12,x=i.hour13,O=i.hour14,g=i.hour15,v=i.hour16,_=i.hour17,y=i.hour18,S=i.hour19,k=i.hour20,I=i.hour21;Object(s.useEffect)((function(){return function(e){e?Object(N.b)():N.c.fire({icon:"info",title:"\u0427\u0442\u043e\u0431\u044b \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u043d\u044b\u0439 \u0443\u0440\u043e\u043a, \u0432\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0443 \u0434\u043b\u044f \u0438\u0437\u0443\u0447\u0435\u043d\u0438\u044f!",text:"(\u041d\u0430\u0436\u043c\u0438, \u0447\u0442\u043e \u0431\u044b \u0441\u043a\u0440\u044b\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435)",timer:null,position:"top"})}(a),function(){Object(N.b)()}}),[a]);var w=Object(C.jsx)(xa,{children:Object(C.jsxs)("tbody",{children:[Object(C.jsxs)("tr",{className:"week",children:[Object(C.jsx)("td",{className:"white"}),["\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431","\u0412\u0441"].map((function(e){return Object(C.jsx)("td",{children:e},e)}))]}),ka([],b,0,"08:00",u,d,j,Sa),ka([],p,0,"09:00",u,d,j,Sa),ka([],f,0,"10:00",u,d,j,Sa),ka([],h,0,"11:00",u,d,j,Sa),ka([],m,0,"12:00",u,d,j,Sa),ka([],x,0,"13:00",u,d,j,Sa),ka([],O,0,"14:00",u,d,j,Sa),ka([],g,0,"15:00",u,d,j,Sa),ka([],v,0,"16:00",u,d,j,Sa),ka([],_,0,"17:00",u,d,j,Sa),ka([],y,0,"18:00",u,d,j,Sa),ka([],S,0,"19:00",u,d,j,Sa),ka([],k,0,"20:00",u,d,j,Sa),ka([],I,0,"21:00",u,d,j,Sa)]})}),T=Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("br",{}),[1,2,3,4,5,6,7,10,11,12,13,14,15,16,17,18,19].map((function(e){return Object(C.jsx)(Wt.a.Button,{style:{marginRight:"8px",marginBottom:"8px",width:"50px",height:"675px"},active:!0},e)}))]});return Object(C.jsxs)(ma,{children:[Object(C.jsx)(Oe.a,{defaultValue:a,placeholder:"\u0427\u0442\u043e \u0445\u043e\u0447\u0435\u0442 \u0438\u0437\u0443\u0447\u0438\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442?",allowClear:!0,className:"select",onChange:function(e){n(e),ya(o,e,c,0,(function(e){_a(e,l,c)})),u({tutor:{_id:"",surname:"",name:"",midname:""},time:"",index:""}),j("")},children:Ia(t)}),Object(C.jsxs)("div",{className:"week-and-pupils ".concat(a?"":"none-table"),children:[r?T:w,Object(C.jsxs)("div",{className:"selection-students",children:[Object(C.jsx)(Aa,{}),Object(C.jsx)(Ga,{}),Object(C.jsx)(Ha,{updateTeachers:function(){ya(o,a,c,0,(function(e){_a(e,l,c)})),u({tutor:{_id:"",surname:"",name:"",midname:""},time:"",index:""}),j("")}})]})]})]})})),qa=function(){return Object(C.jsxs)(ca,{children:[Object(C.jsxs)(ra.a,{style:{margin:"0 0 16px 0"},children:[Object(C.jsx)(ra.a.Item,{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(C.jsx)(ra.a.Item,{children:"\u041f\u0440\u043e\u0431\u043d\u044b\u0435 \u0443\u0440\u043e\u043a\u0438"})]}),Object(C.jsx)(Wa,{}),Object(C.jsx)(ha,{})]})},Ka=l.a.lazy((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,673))})),Va=aa(Object(C.jsx)("div",{children:"Loading SalesFunnel..."}),Ka),Ja=l.a.lazy((function(){return n.e(5).then(n.bind(null,672))})),$a=aa(Object(C.jsx)("div",{children:"Loading TasksPage..."}),Ja),Xa=L.a.Sider,Qa=F.a.SubMenu,Za=w.a.div({overflow:"auto"}),ec={default_drop_down_menu_index:function(){return{type:"DEFAULT_DROP_DOWN_MENU_INDEX"}}},tc=Object(j.b)((function(){}),ec)((function(e){var t=e.logOut,n=e.default_drop_down_menu_index,a=Object(s.useState)(!1),c=Object(g.a)(a,2),r=c[0],o=c[1],i=Object(s.useRef)();Object(s.useEffect)((function(){document.querySelector(".ant-layout-sider-trigger").style.width=r?"80px":"257px",i.current.addEventListener("click",(function(e){"ant-dropdown-trigger"!==e.target.classList[0]&&"ant-dropdown-trigger-span"!==e.target.classList[0]&&n()}),!1)}));var l=w.a.div({".ant-menu":{height:"100vh",position:"relative",width:r?"80px":"257px"},".vag123":{position:"absolute",bottom:"48px",width:r?"80px":""},".site-layout":{padding:"15px"},"& > section":{"& > aside":{position:"fixed",zIndex:99},"& > section":{marginLeft:r?"80px":"257px"}}});return Object(C.jsx)(R.a,{children:Object(C.jsx)(l,{ref:i,children:Object(C.jsxs)(L.a,{style:{minHeight:"100vh"},children:[Object(C.jsx)(Xa,{collapsible:!0,collapsed:r,onCollapse:function(e){o(e)},children:Object(C.jsxs)(F.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline",children:[Object(C.jsx)(F.a.Item,{icon:Object(C.jsx)(A.a,{}),children:Object(C.jsx)(ee,{})},"Search"),Object(C.jsx)(F.a.Item,{icon:Object(C.jsx)(P.a,{onClick:function(){return document.querySelector(".ButtonUpload").click()}}),children:Object(C.jsx)(Bn,{})},"UploadOutlined"),Object(C.jsx)(F.a.Item,{icon:Object(C.jsx)(B.a,{}),children:Object(C.jsx)(R.b,{to:"/student",children:"\u0423\u0447\u0435\u043d\u0438\u043a\u0438"})},"2"),Object(C.jsx)(F.a.Item,{icon:Object(C.jsx)(Y.a,{}),children:Object(C.jsx)(R.b,{to:"/group",children:"\u0413\u0440\u0443\u043f\u043f\u044b"})},"3"),Object(C.jsx)(F.a.Item,{icon:Object(C.jsx)(z.a,{}),children:Object(C.jsx)(R.b,{to:"/tasks",children:"\u0417\u0430\u0434\u0430\u0447\u0438"})},"4"),Object(C.jsx)(F.a.Item,{icon:Object(C.jsx)(G.a,{}),children:Object(C.jsx)(R.b,{to:"/sales-funnel",children:"\u0412\u043e\u0440\u043e\u043d\u043a\u0430 \u043f\u0440\u043e\u0434\u0430\u0436"})},"5"),Object(C.jsx)(F.a.Item,{icon:Object(C.jsx)(U.a,{}),children:Object(C.jsx)(R.b,{to:"/trial-lessons",children:"\u041f\u0440\u043e\u0431\u043d\u044b\u0435 \u0443\u0440\u043e\u043a\u0438"})},"trial-lessons"),Object(C.jsxs)(Qa,{icon:Object(C.jsx)(H.a,{}),title:"\u0421\u0432\u043e\u0434\u043d\u044b\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b",children:[Object(C.jsx)(F.a.Item,{children:Object(C.jsx)(R.b,{to:"/table-pupils",children:"\u0423\u0447\u0435\u043d\u0438\u043a\u0438"})},"sub-student"),Object(C.jsx)(F.a.Item,{children:Object(C.jsx)(R.b,{to:"/table-groups",children:"\u0413\u0440\u0443\u043f\u043f\u044b"})},"sub-groups")]},"sub1"),Object(C.jsx)(F.a.Item,{onClick:function(){localStorage.removeItem("tokenID"),t()},id:"LogoutOut",className:"vag123",icon:Object(C.jsx)(W.a,{}),children:Object(C.jsx)(R.b,{to:"/",children:"\u0412\u044b\u0445\u043e\u0434"})},"Logout")]})}),Object(C.jsx)(L.a,{className:"site-layout",children:Object(C.jsxs)(M.c,{children:[Object(C.jsx)(M.a,{exact:!0,path:"/student",component:Fe}),Object(C.jsx)(M.a,{path:"/student/:id",children:function(){return Object(C.jsx)(un,{})}}),Object(C.jsx)(M.a,{exact:!0,path:"/group",component:mn}),Object(C.jsx)(M.a,{path:"/group/:id",children:function(){return Object(C.jsx)(Fn,{})}}),Object(C.jsx)(M.a,{path:"/sales-funnel",component:Va}),Object(C.jsx)(M.a,{path:"/tasks",render:function(){return Object(C.jsx)($a,{})}}),Object(C.jsx)(M.a,{path:"/trial-lessons",component:qa}),Object(C.jsx)(M.a,{exact:!0,path:"/table-groups",component:function(){return Object(C.jsx)(qn,{})}}),Object(C.jsx)(M.a,{exact:!0,path:"/table-pupils",component:function(){return Object(C.jsx)(Za,{children:Object(C.jsx)(na,{})})}}),Object(C.jsx)(M.a,{path:"/student/*",children:Object(C.jsx)("h2",{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})})]})})]})})})})),nc=n(25),ac=function e(t,n){nc({method:"post",url:"".concat(k.a,"/CRM/Pupils/").concat(t,"/Notes"),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:{text:n}}).catch((function(t){K(e,t)}))},cc=n(25),rc=function e(t,n,a,c){cc({method:"put",url:"".concat(k.a,"/CRM/Groups/").concat(a,"/Pupils/").concat(n,"/Schedule"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:t}).then((function(e){c("\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435")})).catch((function(t){K(e,t)}))},oc=ne.a.Column,ic=ne.a.ColumnGroup,sc=X.a.TextArea,lc=function(e){var t=e.ID_Group,n=e.Group,a=e.getUser,c=Object(s.useState)({}),r=Object(g.a)(c,2),o=r[0],i=r[1],l=Object(s.useState)([]),u=Object(g.a)(l,2),d=u[0],j=u[1],b=Object(h.a)({},o),p=Object(f.a)(d),m=function(){for(var e in p=[],b)2==b[e].arr[t].status&&p.push(e)},x={},O=n.pupils.map((function(e,a){var c=e._id,r=e.name,o=e.surname,i=e.midname;b[c]={arr:e.localSchedule?e.localSchedule[n._id]:[],pupil_id:c},m();var s=b[c].arr[t].start?b[c].arr[t].start:"",l=b[c].arr[t].start?b[c].arr[t].finish:"",u=function(e){b[c]?b[c].arr=e:b[c]||(b[c]={arr:e,pupil_id:c})},d="";return n.pupils[a]&&(d=n.pupils[a].localSchedule[n._id][t].title),{key:c,name:"".concat(o," ").concat(r," ").concat(i),title:{text:d,action:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,c=Object(f.a)(e.localSchedule[n._id]);2==a&3==c[t].status||3==a?(c[t].status=a,u(c)):3!=a&2!=a&&(c[t].title=a,u(c))},addNotes:function(e){x[c]={text:e,id:c}}},progres:{start:s,finish:l,action:function(e,n){b[c].arr[t][e]=n}}}})),v={selectedRowKeys:p,onChange:function(){i(b),j(p)},onSelect:function(e){var n;n=2==b[e.key].arr[t].status?3:2,b[e.key].arr[t].status=n,m()},onSelectAll:function(e){if(e)for(var n in b)b[n].arr[t].status=2;else if(!e)for(var a in b)b[a].arr[t].status=3;m()}};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(ne.a,{pagination:!1,loading:!1,rowSelection:v,scroll:{x:0},dataSource:O,children:[Object(C.jsx)(oc,{title:"\u0423\u0447\u0435\u043d\u0438\u043a",dataIndex:"name",render:function(e){return Object(C.jsx)(te.a,{color:"blue",children:e})}},"name"),Object(C.jsxs)(ic,{title:"\u041f\u0440\u043e\u0433\u0440\u0435\u0441\u0441",children:[Object(C.jsx)(oc,{title:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",dataIndex:"title",render:function(e){return Object(C.jsx)(sc,{defaultValue:e.text,placeholder:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0443\u0447\u0435\u043d\u0438\u043a\u0443",onBlur:function(t){e.action(t.target.value),e.addNotes(t.target.value)},autoSize:{minRows:2,maxRows:6}})}},"title"),Object(C.jsx)(oc,{title:"\u041d\u0430\u0447\u0430\u043b\u043e",dataIndex:"progres",render:function(e){return Object(C.jsx)(sc,{defaultValue:e.start,placeholder:"\u0421\u0442\u0430\u0440\u0442...",onBlur:function(t){e.action("start",t.target.value)},autoSize:{minRows:2,maxRows:6}})}},"progres"),Object(C.jsx)(oc,{title:"\u041a\u043e\u043d\u0435\u0446",dataIndex:"progres",render:function(e){return Object(C.jsx)(sc,{defaultValue:e.finish,placeholder:"\u0424\u0438\u043d\u0438\u0448...",onBlur:function(t){e.action("finish",t.target.value)},autoSize:{minRows:2,maxRows:6}})}},"progres")]})]}),Object(C.jsx)("div",{className:"Button",children:Object(C.jsx)(ve.a,{onClick:function(){for(var e in b)rc(b[e].arr,e,n._id,a);for(var t in x)ac(t,x[t].text)},type:"primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})},uc=n(648),dc=w.a.div({".time":{"h5, h6":{margin:0}},".TablePupils":{marginTop:"15px",".ant-tag":{fontSize:"13px"},td:{padding:"16px 3px"}},".Button":{marginTop:"15px",display:"flex",justifyContent:"flex-end"}}),jc=uc.a.Text,bc=function(e){var t=e.rowKey,n=e.setRowKey,a=e.GROUP,c=e.Group,r=e.getUser,o=c;return a.group.group_name&&(o=a),Object(C.jsxs)(dc,{className:"LessonNow",children:[Object(C.jsxs)("div",{className:"row",children:[Object(C.jsx)("div",{className:"col-md-8",children:Object(C.jsxs)("h4",{children:[Object(C.jsx)(jc,{type:"secondary",children:" \u0423\u0440\u043e\u043a \u0441\u0435\u0439\u0447\u0430\u0441: "})," ",o.group.group_name," "]})}),Object(C.jsxs)("div",{className:"col-md-3 time",children:[Object(C.jsxs)("h6",{children:[" ",Object(C.jsx)(jc,{type:"secondary",children:"\u041d\u0430\u0447\u0430\u043b\u043e"})," "]}),Object(C.jsxs)("h5",{children:[" ",Object(C.jsxs)(jc,{type:"warning",children:[o.group.global_schedule[o.indexD].date," \u0432 ",o.group.global_schedule[0].duration[0]]})," "]})]})]}),Object(C.jsx)("div",{className:"TablePupils",children:Object(C.jsx)(lc,{rowKey:t,getUser:r,ID_Group:o.indexD,setRowKey:n,Group:o.group})})]})},pc=ne.a.Column,fc=function(e){var t=e.Groups,n=e.newGroup,a=e.setGROUP,c=e.GROUP,r=t.map((function(e,t){var a=e.group,r=a._id,o=a.group_name,i=a.global_schedule,s="cyan";return c.group&&(n.group._id==r&!c.group.group_name||r==c.group._id)&&(s="volcano"),{key:t,groupName:{group_name:o,G:e},date:{date:"".concat(i["".concat(e.indexD)].date," \u0432 ").concat(i[0].duration[0]),color:s,G:e}}}));return Object(C.jsxs)(ne.a,{pagination:{pageSize:15},loading:!1,scroll:{x:0},dataSource:r,children:[Object(C.jsx)(pc,{title:"\u0412\u0440\u0435\u043c\u044f",dataIndex:"date",render:function(e){return Object(C.jsx)(te.a,{onClick:function(){a(e.G)},style:{cursor:"pointer"},color:e.color,children:e.date})}},"date"),Object(C.jsx)(pc,{title:"\u0413\u0440\u0443\u043f\u043f\u0430",dataIndex:"groupName",render:function(e){return Object(C.jsx)(te.a,{onClick:function(){a(e.G)},style:{cursor:"pointer"},color:"volcano",children:e.group_name})}},"groupName")]})};fc.defaultProps={Groups:[{group_name:"",global_schedule:[{date:"",duration:["",""]}],pupils:[]}]};var hc=fc,mc=function(e){var t=e.Groups,n=e.newGroup,a=e.setGROUP,c=e.GROUP,r=Object(f.a)(t),o=w.a.div({padding:"15px",borderRadius:"2px",backgroundColor:"#fff"});return Object(C.jsxs)(o,{className:"AllLesson",children:[Object(C.jsx)("div",{className:"row",children:Object(C.jsx)("div",{className:"col-md-8",children:Object(C.jsx)("h5",{children:"\u0411\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0435 \u0443\u0440\u043e\u043a\u0438"})})}),Object(C.jsx)("div",{className:"TableGroups",children:Object(C.jsx)(hc,{Groups:r,newGroup:n,setGROUP:a,GROUP:c})})]})},xc=function(e){var t=e.rowKey,n=e.setRowKey,a=e.Groups,c=e.GROUP,r=e.setGROUP,o=e.getUser,i={timeN:"",group:{group_name:"",global_schedule:[{date:"",duration:["",""]}],pupils:[]},indexD:0},s=[{timeN:"",group:{group_name:"",global_schedule:[{date:"",duration:["",""]}],pupils:[]},indexD:0}];a.forEach((function(e,t){var n=[],a="f";if((e.global_schedule?e.global_schedule:[]).forEach((function(e,t){var c=ce()(e.date,"DD.MM.YYYY").format("YYYY-MM-DD");ce()().diff(c,"day")<=0&&("f"==a&&(a=t),n.push("".concat(c," ").concat(e.duration[0])))})),n[0]){if(i.timeN){var c=ce()().diff(n[0],"hours");c>ce()().diff(i.timeN,"hours")&c<=0&&(i={timeN:n[0],group:e,indexD:a})}else i.timeN||(i={timeN:n[0],group:e,indexD:a});n[0]&&s.push({timeN:n[0],group:e,indexD:a})}}));var l=[{timeN:"",group:{group_name:"",global_schedule:[{date:"",duration:["",""]}],pupils:[]},indexD:0}],u=[];s.forEach((function(e){u.push(ce()().diff(e.timeN,"minutes"))})),u.sort((function(e,t){return t-e})),u.forEach((function(e){s.forEach((function(t){if(ce()().diff(t.timeN,"minutes")==e){var n=!0;l.forEach((function(e){e.group._id===t.group._id&&(n=!1)})),n&&l.push(t)}}))})),void 0!=l[1]&&l.splice(0,1);var d=w.a.div({".site-layout-background":{".allCol":{padding:"0 7.5px"},".LessonNow, .AllLesson":{padding:"15px",borderRadius:"2px",backgroundColor:"#fff"}}});c||r(l[0]);var j=L.a.Content;return Object(C.jsx)(d,{children:Object(C.jsxs)(j,{style:{margin:"0 16px"},children:[Object(C.jsxs)(ra.a,{style:{margin:"16px 0"},children:[Object(C.jsx)(ra.a.Item,{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(C.jsx)(ra.a.Item,{children:"\u0411\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0435 \u0443\u0440\u043e\u043a\u0438"})]}),Object(C.jsxs)("div",{className:"row site-layout-background",style:{padding:"7.5px",minHeight:360},children:[Object(C.jsx)("div",{className:"allCol col-8",children:Object(C.jsx)(bc,{rowKey:t,getUser:o,setRowKey:n,GROUP:c,Group:i})}),Object(C.jsx)("div",{className:"allCol col-4",children:Object(C.jsx)(mc,{Groups:l,setGROUP:r,newGroup:i,GROUP:c})})]})]})})},Oc=[{title:"",key:"time",dataIndex:"time",fixed:"left",width:100,render:function(e){return Object(C.jsx)(te.a,{color:"cyan",children:e})}},{title:"\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a",dataIndex:"1",key:"1"},{title:"\u0412\u0442\u043e\u0440\u043d\u0438\u043a",dataIndex:"2",key:"2"},{title:"\u0421\u0440\u0435\u0434\u0430",dataIndex:"3",key:"3"},{title:"\u0427\u0435\u0442\u0432\u0435\u0440\u0433",dataIndex:"4",key:"4"},{title:"\u041f\u044f\u0442\u043d\u0438\u0446\u0430",dataIndex:"5",key:"5"},{title:"\u0421\u0443\u0431\u0431\u043e\u0442\u0430",dataIndex:"6",key:"6"},{title:"\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435",dataIndex:"0",key:"7"}],gc=w.a.div({padding:"15px",borderRadius:"2px",backgroundColor:"#fff"}),vc=w.a.div({padding:"15px",borderRadius:"2px",backgroundColor:"#fff",marginBottom:"15px"}),_c=L.a.Content,yc=function(e){for(var t=e.Groups,n=t.map((function(e){return{title:function(){return Object(C.jsx)(te.a,{color:"magenta",children:e.group_name},e._id)},key:e._id,dataIndex:"pupil",fixed:"top",width:100,render:function(){return Object(C.jsx)(C.Fragment,{children:e.pupils.map((function(t,n){return Object(C.jsx)("div",{children:Object(C.jsxs)(te.a,{style:{marginBottom:"5px"},color:"green",children:[t.surname," ",t.name," ",t.midname]})},"".concat(e._id).concat(n))}))})}}})),a=t.map((function(e){if((e.global_schedule?e.global_schedule:[])[0]){var t={};return e.global_schedule.forEach((function(n){var a=ce()(n.date,"DD.MM.YYYY").day();t[a]=e.group_name})),Object(h.a)(Object(h.a)({key:e._id},t),{},{time:e.global_schedule[0].duration[0]})}return{key:e._id,1:'\u0414\u043b\u044f \u0433\u0440\u0443\u043f\u043f\u044b: "'.concat(e.group_name,'" \u043d\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u043e \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435.'),time:""}})),c=[],r=function(e){a.forEach((function(t){ce()(t.time,"hh:mm").hours()==e&&c.push(t)}))},o=0;o<=24;o++)r(o);return Object(C.jsxs)(_c,{style:{margin:"0 16px"},children:[Object(C.jsxs)(ra.a,{style:{margin:"16px 0"},children:[Object(C.jsx)(ra.a.Item,{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(C.jsx)(ra.a.Item,{children:"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0443\u0440\u043e\u043a\u043e\u0432"})]}),Object(C.jsx)(vc,{children:Object(C.jsxs)("div",{className:"row site-layout-background",style:{padding:"15px"},children:[Object(C.jsx)("h4",{children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(C.jsx)(ne.a,{bordered:!0,columns:n,dataSource:[{key:"777",pupil:""}],scroll:{x:1e3}})]})}),Object(C.jsx)(gc,{children:Object(C.jsxs)("div",{className:"row site-layout-background",style:{padding:"15px"},children:[Object(C.jsx)("h4",{children:"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(C.jsx)(ne.a,{bordered:!0,columns:Oc,dataSource:c,scroll:{x:1300}})]})})]})},Sc=w.a.div({padding:"15px",borderRadius:"2px",backgroundColor:"#fff"}),kc=function(e){var t=e.AllPupils,n=L.a.Content,a=ne.a.Column,c=[];return t.forEach((function(e){var t=e.surname,n=e.name,a=e.midname,r=e.dateOfBirth,o=e.gender,i=e.phone,s=e.discord,l=e._id,u=!0;c.forEach((function(e){e.key==l&&(u=!1)})),u&&c.push({key:l,surname:[t,l],name:n,midname:a,dateOfBirth:re(r),gender:o,phone:i,discord:s})})),Object(C.jsxs)(n,{style:{margin:"0 16px"},children:[Object(C.jsxs)(ra.a,{style:{margin:"16px 0"},children:[Object(C.jsx)(ra.a.Item,{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(C.jsx)(ra.a.Item,{children:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0423\u0447\u0435\u043d\u0438\u043a\u043e\u0432"})]}),Object(C.jsx)("div",{className:"site-layout-background",style:{padding:"10px",minHeight:360},children:Object(C.jsx)(Sc,{children:Object(C.jsxs)(ne.a,{dataSource:c,children:[Object(C.jsx)(a,{title:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",dataIndex:"surname",render:function(e){return Object(C.jsx)(R.b,{className:"link-info",to:"/student/".concat(e[1]),children:e[0]})}},"surname"),Object(C.jsx)(a,{title:"\u0418\u043c\u044f",dataIndex:"name"},"name"),Object(C.jsx)(a,{title:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",dataIndex:"midname"},"midname"),Object(C.jsx)(a,{title:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442",dataIndex:"dateOfBirth"},"dateOfBirth"),Object(C.jsx)(a,{title:"\u041f\u043e\u043b",dataIndex:"gender"},"gender"),Object(C.jsx)(a,{title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",dataIndex:"phone"},"phone"),Object(C.jsx)(a,{title:"\u0414\u0438\u0441\u043a\u043e\u0440\u0434 \u043d\u0438\u043a\u043d\u0435\u0439\u043c",dataIndex:"discord"},"discord")]})})})]})},Nc=w.a.div({padding:"15px",borderRadius:"2px",backgroundColor:"#fff"}),Ic=function(e){var t=e.AllGroups,n=L.a.Content,a=ne.a.Column,c=t.map((function(e){var t=e.group_name,n=e.level,a=e.places,c=e.pupils,r=e._id,o=e.global_schedule,i="";return o&&o[0]&&(i="\u0441 ".concat(o[0].duration[0]," \u0434\u043e ").concat(o[0].duration[1])),{key:r,group_name:[t,r],level:n,places:a,free_places:a-c.length,time:i}}));return Object(C.jsxs)(n,{style:{margin:"0 16px"},children:[Object(C.jsxs)(ra.a,{style:{margin:"16px 0"},children:[Object(C.jsx)(ra.a.Item,{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(C.jsx)(ra.a.Item,{children:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0413\u0440\u0443\u043f\u043f"})]}),Object(C.jsx)("div",{className:"site-layout-background",style:{padding:"10px",minHeight:360},children:Object(C.jsx)(Nc,{children:Object(C.jsxs)(ne.a,{dataSource:c,children:[Object(C.jsx)(a,{title:"\u0418\u043c\u044f \u0413\u0440\u0443\u043f\u043f\u044b",dataIndex:"group_name",render:function(e){return Object(C.jsx)(R.b,{className:"link-info",to:"/group/".concat(e[1]),children:e[0]})}},"group_name"),Object(C.jsx)(a,{title:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c",dataIndex:"level"},"level"),Object(C.jsx)(a,{title:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0435\u0441\u0442",dataIndex:"places"},"places"),Object(C.jsx)(a,{title:"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043c\u0435\u0441\u0442",dataIndex:"free_places"},"free_places"),Object(C.jsx)(a,{title:"\u0412\u0440\u0435\u043c\u044f \u0437\u0430\u043d\u044f\u0442\u0438\u0439",dataIndex:"time"},"time")]})})})]})},wc=n(235),Cc=n(236),Tc=function(){return Object(C.jsxs)(ca,{children:[Object(C.jsxs)(ra.a,{style:{margin:"0 0 16px 0"},children:[Object(C.jsx)(ra.a.Item,{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(C.jsx)(ra.a.Item,{children:"\u041f\u0440\u043e\u0431\u043d\u044b\u0435 \u0443\u0440\u043e\u043a\u0438"})]}),Object(C.jsx)(ha,{})]})},Dc=n(25),Ec=n(131),Rc=L.a.Sider,Mc=function(e){var t=e.logOut,n=Object(s.useState)(!1),a=Object(g.a)(n,2),c=a[0],r=a[1],o=Object(s.useState)([]),i=Object(g.a)(o,2),l=i[0],u=i[1],d=Object(s.useState)({group:{group_name:"",global_schedule:[{date:"00",duration:["",""]}],pupils:[],_id:"3443"},indexD:0}),j=Object(g.a)(d,2),b=j[0],p=j[1],h=Object(s.useState)({groups:[],login:"",midname:"",name:"",role:"",surname:"",_id:"456456"}),m=Object(g.a)(h,2),x=m[0],O=m[1],v=Object(s.useState)([]),_=Object(g.a)(v,2),y=_[0],S=_[1],I=[];y.forEach((function(e){I.push.apply(I,Object(f.a)(e.pupils))}));var T=function e(t){var n=t.groups.map((function(e){return e._id}));n[0]?Dc({method:"post",url:"".concat(k.a,"/CRM/Groups/getByIds"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:{ids:n}}).then((function(e){S(e.data),Object(N.b)()})).catch((function(t){K(e,t)})):Object(N.b)()},D=function(e){Object(N.d)(e,""),Dc({method:"get",url:"".concat(k.a,"/CRM/Teachers/").concat(Ec.decode(localStorage.getItem("tokenID")).id),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){var t=e.data;t||(localStorage.removeItem("tokenID"),window.location.replace("/")),O(t),T(t)})).catch((function(e){K(T,e)}))};Object(s.useEffect)((function(){D("\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445...")}),[]),Object(s.useEffect)((function(){document.querySelector(".ant-layout-sider-trigger").style.width=c?"80px":"250px"}));var E=w.a.div({".ant-menu":{height:"100vh",position:"relative",width:c?"80px":"250px"},".vag123":{position:"absolute",bottom:"48px",width:c?"80px":""},".site-layout":{padding:"15px"},"& > section":{"& > aside":{position:"fixed",zIndex:99},"& > section":{marginLeft:c?"80px":"250px"}}});return Object(C.jsx)(R.a,{children:Object(C.jsx)(E,{children:Object(C.jsxs)(L.a,{style:{minHeight:"100vh"},children:[Object(C.jsxs)(Rc,{collapsible:!0,collapsed:c,onCollapse:function(){return r(!c)},children:[Object(C.jsx)("div",{className:"logo"}),Object(C.jsxs)(F.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline",children:[Object(C.jsx)(F.a.Item,{icon:Object(C.jsx)(A.a,{}),children:Object(C.jsx)(ee,{tutorid:"&tutorID=".concat(Ec.decode(localStorage.getItem("tokenID")).id)})},"Search"),Object(C.jsx)(F.a.Item,{icon:Object(C.jsx)(wc.a,{}),children:Object(C.jsx)(R.b,{to:"/",children:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f"})},"1"),Object(C.jsx)(F.a.Item,{icon:Object(C.jsx)(Cc.a,{}),children:Object(C.jsx)(R.b,{to:"/calendar",children:"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"})},"2"),Object(C.jsx)(F.a.Item,{icon:Object(C.jsx)(B.a,{}),children:Object(C.jsx)(R.b,{to:"/pupils",children:"\u0423\u0447\u0435\u043d\u0438\u043a\u0438"})},"3"),Object(C.jsx)(F.a.Item,{icon:Object(C.jsx)(Y.a,{}),children:Object(C.jsx)(R.b,{to:"/groups",children:"\u0413\u0440\u0443\u043f\u043f\u044b"})},"4"),Object(C.jsx)(F.a.Item,{icon:Object(C.jsx)(U.a,{}),children:Object(C.jsx)(R.b,{to:"/trial-lessons-tutor",children:"\u041f\u0440\u043e\u0431\u043d\u044b\u0435 \u0443\u0440\u043e\u043a\u0438"})},"trial-lessons-tutor"),Object(C.jsx)(F.a.Item,{onClick:function(){localStorage.removeItem("tokenID"),t()},className:"vag123",icon:Object(C.jsx)(W.a,{}),children:Object(C.jsxs)(R.b,{to:"/",children:["\u0412\u044b\u0445\u043e\u0434: ",x.login]})},"Logout")]})]}),Object(C.jsx)(L.a,{className:"site-layout",children:Object(C.jsx)("div",{children:Object(C.jsxs)(M.c,{children:[Object(C.jsx)(M.a,{exact:!0,path:"/",children:Object(C.jsx)(xc,{rowKey:l,getUser:D,setRowKey:u,GROUP:b,setGROUP:p,Groups:y})}),Object(C.jsx)(M.a,{exact:!0,path:"/calendar",children:Object(C.jsx)(yc,{Groups:y})}),Object(C.jsx)(M.a,{exact:!0,path:"/pupils",children:Object(C.jsx)(kc,{AllPupils:I})}),Object(C.jsx)(M.a,{exact:!0,path:"/groups",children:Object(C.jsx)(Ic,{AllGroups:y})}),Object(C.jsx)(M.a,{exact:!0,path:"/trial-lessons-tutor",component:Tc}),Object(C.jsx)(M.a,{exact:!0,path:"/student/:id",children:function(){return Object(C.jsx)(un,{})}}),Object(C.jsx)(M.a,{exact:!0,path:"/group/:id",children:function(){return Object(C.jsx)(Fn,{})}})]})})})]})})})},Lc=function(){var e=n(25),t=n(131),a=Object(s.useState)(""),c=Object(g.a)(a,2),r=(c[0],c[1]),o=Object(C.jsx)(E,{setUser:r}),i=localStorage.getItem("tokenID")?Object(C.jsx)(tc,{logOut:r}):o;return Object(s.useEffect)((function t(){i!==o&&e({method:"get",url:"".concat(k.a,"/auth-check"),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).catch((function(e){return K(t,e)}))}),[]),localStorage.getItem("tokenID")&&"teacher"===t.decode(localStorage.getItem("tokenID")).accountType&&(i=Object(C.jsx)(Mc,{logOut:r})),Object(C.jsx)(C.Fragment,{children:i})};d.a.render(Object(C.jsx)(j.a,{store:O,children:Object(C.jsx)(Lc,{})}),document.getElementById("root"))},74:function(e,t,n){"use strict";var a=n(22);t.a=function(e){403==e&&a.c.fire({icon:"error",title:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043f\u0440\u0430\u0432 \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})}},82:function(e,t,n){"use strict";n.d(t,"j",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"h",(function(){return m})),n.d(t,"f",(function(){return x})),n.d(t,"g",(function(){return O})),n.d(t,"e",(function(){return g})),n.d(t,"d",(function(){return v})),n.d(t,"c",(function(){return _})),n.d(t,"i",(function(){return y})),n.d(t,"a",(function(){return S}));var a,c,r,o,i,s,l,u,d,j,b=n(24),p=n(10),f=p.a.div(a||(a=Object(b.a)(["\n  position: ",";\n  transition: all .5s ease;\n  z-index: 10;\n  bottom: ",";\n  width: 100%;\n  border-radius: ",";\n  background: ",";\n  border: 1px solid ",";\n  padding: 0 10px;\n  \n  > .buttonUp {\n    position: relative;\n    top: -13px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    > button {\n      display: flex;\n      align-items: center;\n      border-radius: 4px;\n      border: 1px solid #1890FF;\n      background: #1890FF;\n      color: white;\n      transition: all .2s ease;\n      width: min-content;\n      &:hover {\n        background: white;\n        color: #1890FF;\n      }\n      .anticon-double-left {\n        margin: 0 5px 0 2.5px;\n        transform: rotate(","deg);\n      }\n    }\n  }\n"])),(function(e){return e.portable?"absolute":"static"}),(function(e){return e.opened?"-15px":2===e.type?"-300px":"-280px"}),(function(e){return e.portable?"10px 10px 0 0":"0"}),(function(e){return e.portable?"#1890FF":"white"}),(function(e){return e.portable?"#1890FF":"white"}),(function(e){return e.opened?-90:90})),h=p.a.div(c||(c=Object(b.a)(["\n  display: flex;\n  overflow: hidden auto;\n  flex-direction: column;\n  font-family: Tahoma;\n  .ant-picker {\n    cursor: pointer;\n    background: transparent;\n    border: none;\n    .ant-picker-suffix {\n      color: ",";\n    }\n  }\n  .data {\n      ","\n    padding: 5px 0;\n    border: none;\n    border-bottom: 1px solid ",";\n  }\n  input, textarea {\n    width: 100%;\n    color: ",";\n    background: transparent;\n    border: none;\n  }\n  input:focus, textarea:focus, .ant-picker:focus {\n      outline: none;\n  }\n  input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {\n    color: ",";\n  }\n  textarea {\n    resize: none;\n    width: 100%;\n  }\n  .type__select {\n    justify-content: space-between;\n    > select:first-of-type {\n      cursor: pointer;\n      width: 100%;\n      border: none;\n      color: ",";\n      background: transparent;\n      > option {\n        color: black;\n      }\n      &:focus {\n        outline: none;\n      }\n    }\n  }\n"])),(function(e){return e.portable?"white":"rgba(0, 0, 0, 0.75)"}),(function(e){return e.portable?"":"\n      font-weight: 500;\n      margin: 5px 0; \n      padding: 8px 10px;\n      background: #E8EDF7;\n      border-radius: 5px;\n    "}),(function(e){return e.portable?"rgba(255, 255, 255, 0.9)":"transparent"}),(function(e){return e.portable?"white":"rgba(0, 0, 0, 0.75)"}),(function(e){return e.portable?"rgba(255, 255, 255, 0.7)":""}),(function(e){return e.portable?"white":"rgba(0, 0, 0, 0.75)"})),m=p.a.div(r||(r=Object(b.a)(["\n  display: flex;\n  align-items: center;\n  .ant-select-selection-overflow-item {\n    max-width: 100px;\n  }\n  > div {\n    flex: 0 0 100%;\n  }\n"]))),x=p.a.div(o||(o=Object(b.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  color: ",";\n  * {\n    margin: 0;\n  }\n  .background-gray {\n    background: ",";\n  }\n  .ant-select-selection-search-input {\n    color: black;\n  }\n  > div {\n    border-radius: 5px;\n    margin: 0 0 5px 0;\n    flex: 0 0 calc(100% / 3.1);\n    max-width: calc(100% / 3.1);\n    > *:not(span) {\n      border: none;\n      border-radius: ","px;\n      margin: 2.5px;\n      background: ",";\n      border-bottom: 1px solid ",";\n      width: 100%;\n      height: 30px;\n    }\n    > .ant-picker {\n      width: 100%;\n      border-bottom: 1px solid ",";\n    }\n  }\n"])),(function(e){return e.portable?"white":"rgba(0, 0, 0, 0.75)"}),(function(e){return e.portable?"transparent":"#E8EDF7"}),(function(e){return e.portable?0:5}),(function(e){return e.portable?"transparent":"#E8EDF7"}),(function(e){return e.portable?"white":"transparent"}),(function(e){return e.portable?"white":"transparent"})),O=p.a.div(i||(i=Object(b.a)(["\n  > button {\n    border-radius: 4px;\n    color: ",";\n    border: none;\n    padding: 2.5px 15px;\n    background: ",";\n    margin: 10px 0 5px 0;\n    transition: all .2s ease;\n    ","\n    &:hover {\n      background: ",";\n    }\n    &:active {\n      background: ",";\n    }\n  }\n"])),(function(e){return e.portable?"#1890FF":"white"}),(function(e){return e.portable?"white":"#1890FF"}),(function(e){return e.portable?"":"\n      border-bottom: 3.5px solid #1D74FF;\n    "}),(function(e){return e.portable?"lightgray":"#1083FF"}),(function(e){return e.portable?"lightgray":"#1D74FF"})),g=p.a.p(s||(s=Object(b.a)(["\n  opacity: 0.8;\n  width: 95%;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n"]))),v=p.a.div(l||(l=Object(b.a)(["\n  display: flex;\n  opacity: 0.8;\n  width: 95%;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n"]))),_=p.a.button(u||(u=Object(b.a)(["\n  border: none;\n  background: transparent;\n  position: absolute;\n  top: 0;\n  right: 0;\n  > span {\n    color: gray;\n    transition: all .2s ease;\n    &:hover {\n      color: lightgray;\n    }\n  }\n"]))),y=p.a.div(d||(d=Object(b.a)(["\n  padding: 0 45px 0 0;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  > div > p:first-of-type {\n    font-weight: bold;\n  }\n  > .done {\n    text-decoration: ",";\n  }\n  p {\n    margin: 0;\n  }\n"])),(function(e){return e.done?"line-through":"none"})),S=p.a.div(j||(j=Object(b.a)(["\n  position: absolute;\n  bottom: 0;\n  right: 5px;\n"])))}},[[623,1,2]]]);
//# sourceMappingURL=main.2dad41a5.chunk.js.map