(this["webpackJsonpcrm-shool-app"]=this["webpackJsonpcrm-shool-app"]||[]).push([[0],{345:function(e,t,n){},346:function(e,t,n){},347:function(e,t,n){},381:function(e,t,n){},457:function(e,t){},459:function(e,t){},472:function(e,t){},474:function(e,t){},502:function(e,t){},504:function(e,t){},505:function(e,t){},510:function(e,t){},512:function(e,t){},531:function(e,t){},543:function(e,t){},546:function(e,t){},563:function(e,t,n){},564:function(e,t,n){},567:function(e,t,n){"use strict";n.r(t);var a,c,o,r,i,s,l,d,u,j,p,b,h,m,x=n(0),f=n(35),O=n.n(f),g=(n(345),n(5)),v=(n(346),n(31)),y=n.n(v),k=n(46),N=n(53),S=(n(347),"http://crm.3place.ru"),I=n(80),C=n.n(I),w=n(233),_=n.n(w),D=_()(C.a),P=function(e,t){D.fire({icon:"error",title:e,text:t})},E=_()(C.a),R=function(e,t){E.fire({icon:"success",title:e,text:t})},B=C.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",C.a.stopTimer),e.addEventListener("mouseleave",C.a.resumeTimer)}}),M=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";C.a.fire({title:e,html:n,timerProgressBar:!0,didOpen:function(){C.a.showLoading(),t=setInterval((function(){var e=C.a.getHtmlContainer();if(e){var t=e.querySelector("b");t&&(t.textContent=C.a.getTimerLeft())}}),100)},willClose:function(){clearInterval(t)}})},z=function(){C.a.close()},G=function(e){403==e&&B.fire({icon:"error",title:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043f\u0440\u0430\u0432 \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})},T=n(13),F=n(1),L=n(44),A=T.a.div({height:"500px",button:{fontWeight:"bold",fontSize:"21px",width:"150px",borderRadius:"19px",transition:"0.3s",borderColor:"#007bff",color:"#000","&:hover":{transition:"0.3s",backgroundColor:"#f7d99f"}},label:{fontSize:"24px",fontWeight:"400"},input:{color:"#000",fontSize:"20px"},"input[type=text]":{background:"none"},"input[type=password]":{background:"none"},i:{cursor:"pointer"}}),Y=function(e){var t=e.setUser,n=Object(x.useState)({icons:"bi-eye-fill",type:"password"}),r=Object(g.a)(n,2),i=r[0],s=r[1],l=Object(x.useState)(""),d=Object(g.a)(l,2),u=d[0],j=d[1],p=Object(x.useState)(""),b=Object(g.a)(p,2),h=b[0],m=b[1],f=Object(x.useState)("submit"),O=Object(g.a)(f,2),v=O[0],I=O[1],C=Object(x.useState)("\u041b\u043e\u0433\u0438\u043d"),w=Object(g.a)(C,2),_=w[0],D=w[1],E=Object(x.useState)(""),R=Object(g.a)(E,2),M=R[0],z=R[1],Y=Object(x.useState)(""),U=Object(g.a)(Y,2),V=U[0],H=U[1],q=h,K=u,W="1";"button"===v&&(W="0.3");var $=T.a.input(a||(a=Object(N.a)(["\n      border: ",";\n    "])),M),X=T.a.input(c||(c=Object(N.a)(["\n      border: ",";\n    "])),V),J=T.a.button(o||(o=Object(N.a)(["\n      opacity: ",";\n    "])),W),Q=new RegExp(/^[\w\d\W]{1,40}$/),Z=new RegExp(/^.{1,40}$/),ee=function(){var e=Object(k.a)(y.a.mark((function e(n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(K),m(q),D("\u041b\u043e\u0433\u0438\u043d"),n.preventDefault(),Q.test(q)?z(""):z("2px solid red"),Z.test(K)?H(""):H("2px solid red"),Q.test(q)&Z.test(K)&&(I("button"),L({method:"post",url:"".concat(S,"/auth"),headers:{"Content-Type":"application/json;charset=utf-8"},data:{login:q,password:K}}).then((function(e){localStorage.setItem("tokenID",e.data.token),j(""),m(""),I("submit"),B.fire({icon:"success",title:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u043e\u0448\u043b\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443"}),t(q)})).catch((function(e){e.response&&(G(e.response.status),400===e.response.status?(P("\u041e\u0439..","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"),z("2px solid red"),H("2px solid red"),I("submit")):I("submit"))})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(F.jsx)(A,{className:"LogIn container d-flex align-items-center justify-content-center",children:Object(F.jsx)("form",{onSubmit:ee,className:"col-md-8 col-12",children:Object(F.jsxs)("fieldset",{children:[Object(F.jsxs)("div",{className:"mb-3",children:[Object(F.jsx)("label",{htmlFor:"exampleInputEmail1",className:"form-label",children:_}),Object(F.jsx)($,{required:!0,onChange:function(e){q=e.target.value},defaultValue:h,autoComplete:"current-password",type:"name",className:"form-control",name:"login",id:"exampleInputEmail1"})]}),Object(F.jsxs)("div",{className:"mb-3",children:[Object(F.jsx)("label",{htmlFor:"exampleInputPassword1",className:"form-label",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(F.jsx)(X,{required:!0,onChange:function(e){K=e.target.value},defaultValue:u,autoComplete:"current-password",type:"".concat(i.type),className:"form-control",name:"password",id:"exampleInputPassword1"}),Object(F.jsx)("div",{className:"password-control",children:Object(F.jsx)("div",{className:"d-flex justify-content-end",children:Object(F.jsx)("i",{onClick:function(){j(K),m(q),"bi-eye-fill"===i.icons?s({icons:"bi-eye-slash-fill",type:"text"}):s({icons:"bi-eye-fill",type:"password"})},className:"bi ".concat(i.icons),style:{fontSize:"28px",color:"#F5896C"}})})})]}),Object(F.jsx)(J,{type:v,className:"btn",children:"\u0412\u043e\u0439\u0442\u0438"})]})},"form1")})},U=n(32),V=n(48),H=n(571),q=n(87),K=n(195),W=n(586),$=n(587),X=n(588),J=n(589),Q=n(590),Z=n(591),ee=function(e){localStorage.removeItem("tokenID"),localStorage.setItem("tokenID",e)},te=function(e,t){if(t.response){for(var n=arguments.length,a=new Array(n>2?n-2:0),c=2;c<n;c++)a[c-2]=arguments[c];a.forEach((function(e){e()})),G(t.response.status);var o=t.response,r=o.status,i=o.data;404==r||(401==r?"TOKEN_EXPIRED"==i.message?(ee(i.token),e()):(localStorage.removeItem("tokenID"),window.location.replace("/")):500==r?P("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430"):400==r&&P("\u041d\u0435 \u0432\u0435\u0440\u043d\u043e \u0432\u0432\u0435\u0434\u0435\u043d\u044b \u0434\u0430\u043d\u043d\u044b\u0435"))}},ne=n(569),ae=n(578),ce=T.a.div({height:"30px",input:{height:"30px"},".ant-input-search-button":{paddingBottom:"none"}}),oe=function(e,t){var n="/student/".concat(t.id);return n="pupil"==t.type?"/student/".concat(t.id):"/group/".concat(t.id),{value:e,label:Object(F.jsx)(U.b,{className:"link-info",to:n,style:{display:"flex",justifyContent:"space-between"},children:e})}},re=n(44),ie=function(e){var t=e.tutorid,n=void 0===t?"":t,a=Object(x.useState)([]),c=Object(g.a)(a,2),o=c[0],r=c[1],i=Object(x.useState)(""),s=Object(g.a)(i,2),l=s[0],d=s[1];Object(x.useEffect)((function(){document.getElementById("Search").focus()}));var u,j=function e(t){var a=encodeURI(t);re({method:"get",url:"".concat(S,"/CRM/Search/autocompletion?query=").concat(a).concat(n),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){d(t),r(e.data.body.hits.hits)})).catch((function(t){te(e,t)}))},p=function(e){return Object(F.jsx)("span",{children:e})},b=[{label:p("\u0423\u0447\u0435\u043d\u0438\u043a\u0438"),options:[]},{label:p("\u0413\u0440\u0443\u043f\u043f\u044b"),options:[]}];o.forEach((function(e){if("pupil"==e._source.type){var t=e._source,n=t.surname,a=t.name,c=t.midname;b[0].options.push(oe("".concat(n," ").concat(a," ").concat(c),e._source))}else{var o=e._source.group_name;b[1].options.push(oe(o,e._source))}}));var h=function(e){clearTimeout(u),e?u=setTimeout((function(){j(e)}),500):(d(""),r([]))};return Object(F.jsx)(ce,{children:Object(F.jsx)(ne.a,{dropdownClassName:"certain-category-search-dropdown",dropdownMatchSelectWidth:500,options:b,defaultOpen:function(){return!!l},defaultValue:"".concat(l),onSearch:function(e){h(e)},id:"Search",children:Object(F.jsx)(ae.a,{size:"large",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e CRM"})})})},se=n(2),le=n(9),de=n(8),ue=n(336),je=n(572),pe=n(24),be=n.n(pe),he=function(e){var t=be()(e).format("YYYY-MM-DD"),n=be()().diff(t,"years");return n||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"},me=n(193),xe=(n(254),Math.round(document.documentElement.clientHeight/55)-2),fe=function(e){var t=e.offset,n=e.setOffset,a=e.getItem,c=e.count,o=T.a.div({margin:"3px 3px 20px 3px",".ant-pagination-item-link":{height:"34px"}});return Object(F.jsx)(o,{children:Object(F.jsx)(me.a,{defaultPageSize:xe,defaultCurrent:t/xe+1,total:c,showSizeChanger:!1,onChange:function(e){n((e-1)*xe),a((e-1)*xe)}})})},Oe=n(577),ge=n(52),ve=n(573),ye=n(130),ke=n.n(ye),Ne=n(584),Se={borderRadius:"2px"},Ie={fontSize:"18px",color:"#001529",position:"absolute",top:"4px",right:"2px"},Ce=(T.a.span(r||(r=Object(N.a)(["\n  font-weight: bold;\n"]))),T.a.span(i||(i=Object(N.a)(["\n  opacity: 0.8;\n"])))),we=T.a.div(s||(s=Object(N.a)(["\n  position: relative;\n"]))),_e=T.a.div(l||(l=Object(N.a)(["\n  ::-webkit-scrollbar {\n    height: 5px;\n  }\n  ::-webkit-scrollbar-thumb {\n    background-color: darkgrey;\n  }\n  overflow: auto hidden;\n  height: auto;\n  min-width: 100%;\n  display: flex;\n  justify-content: ",";\n  .droppable-container {\n    min-height: 150px;\n    height: 100%;\n  }\n"])),(function(e){return e.jstctn?"space-evenly":"flex-start"})),De=T.a.div(d||(d=Object(N.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin: 10px 0;\n  > p {\n    flex: 1 0 50%;\n    margin: 0;\n    padding: 0;\n  }\n  > Input {\n    flex: 1 0 50%;\n  }\n"]))),Pe=T.a.div(u||(u=Object(N.a)(["\n  overflow: hidden;\n  max-width: 260px;\n  min-width: 260px;\n  margin: 0px 10px;\n  background: white;\n  border-radius: 4px;\n  .ant-pagination.ant-pagination-simple {\n    display: flex;\n    justify-content: center;\n    margin-bottom: 3px;\n  }\n"]))),Ee=T.a.div(j||(j=Object(N.a)(["\n  border-bottom: 1px solid ",";\n  max-height: 26px;\n  padding: 2px 5px;\n  background: white;\n  color: black;\n  font-weight: 500;\n"])),(function(e){return e.background?e.background:"#001529"})),Re=T.a.div(p||(p=Object(N.a)(["\n  position: relative;\n  margin: 0;\n  margin-bottom: 8px;\n  padding: 5px 0;\n  text-align: center;\n  background: white;\n  color: black;\n  font-weight: 500;\n  border-bottom: 4px solid ",';\n  &::before {\n    position: absolute;\n    content: "";\n    display: inline-block;\n    bottom: -20px;\n    right: calc((260px - (8px + 8px)) / 2);\n    border-top: 8px solid ',";\n    border-right: 8px solid transparent;\n    border-left: 8px solid transparent;\n    border-bottom: 8px solid transparent;\n  }\n"])),(function(e){return e.background?e.background:"#001529"}),(function(e){return e.background?e.background:"#001529"})),Be=T.a.p(b||(b=Object(N.a)(["\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  word-break: keep-all;\n  width: ",";\n  height: 25px;\n  margin: 0;\n"])),(function(e){return""!==e.width?e.width:"190px"})),Me=T.a.div(h||(h=Object(N.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  padding: 8px 3px 8px 8px;\n  margin: 5px 0;\n  border: 1px solid lightgray;\n  border-radius: 1px;\n  background: white;\n  color: black;\n  .funnelStepStudent__first--info {\n    display: flex;\n    flex-direction: column;\n    div:first-of-type {\n      font-weight: bold;\n    }\n    p {\n      margin: 0;\n    }\n    div:last-of-type {\n      margin-bottom: 3px;\n    }\n  }\n  p {\n    margin: 0;\n  }\n"]))),ze=n(44),Ge=n.n(ze),Te=function(){var e=Object(k.a)(y.a.mark((function e(t,n,a){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge.a.patch("".concat(t,"/CRM/Pupils/").concat(n),a,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("tokenID")),"Content-Type":"application/json;charset=utf-8"}});case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(k.a)(y.a.mark((function e(t){var n,a,c=arguments;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:1e3,e.next=3,Ge.a.get("".concat(t,"/CRM/SalesFunnel?limit=").concat(n),{headers:{"Content-Type":"application/jsoncharset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){return a=e.data}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Le=function(e){var t=e.funnel,n=e.Url,a=e.pupils,c=e.status,o=e.loader,r=e.bigIcon,i=void 0!==r&&r,s=e.update,l=void 0===s?function(){}:s,d=e.defaultValueOptionFunnel,u=void 0===d?"":d,j=o.setLoaded,p=a.setPupilsList,b=new RegExp(/\w+#[0-9]{4}/),h="DD-MM-YYYY",m=Object(x.useState)(!1),f=Object(g.a)(m,2),O=f[0],v=f[1],N=Object(x.useState)(!1),S=Object(g.a)(N,2),I=S[0],C=S[1],w=Object(x.useState)(be()("01-01-2021",h)),_=Object(g.a)(w,2),D=_[0],E=_[1],B=Object(x.useState)(""),M=Object(g.a)(B,2),z=M[0],T=M[1],L=Object(x.useState)(""),A=Object(g.a)(L,2),Y=A[0],U=A[1],V=Object(x.useState)(""),H=Object(g.a)(V,2),q=H[0],K=H[1],W=Object(x.useState)(""),$=Object(g.a)(W,2),X=$[0],J=$[1],Q=Object(x.useState)(""),Z=Object(g.a)(Q,2),te=Z[0],ne=Z[1],ce=Object(x.useState)(""),oe=Object(g.a)(ce,2),re=oe[0],ie=oe[1],se=Object(x.useState)(""),de=Object(g.a)(se,2),ue=de[0],je=de[1],pe=Object(x.useState)(""),he=Object(g.a)(pe,2),me=he[0],xe=he[1],fe=Object(x.useState)(t[0]._id),ye=Object(g.a)(fe,2),Ce=ye[0],we=ye[1],_e=function(){T((function(e){return""})),U((function(e){return""})),K((function(e){return""})),E((function(e){return be()("01-01-2021",h)})),J((function(e){return""})),ie((function(e){return""})),xe((function(e){return""}))},Pe=function(){C(!1),_e()},Ee=function(){C(!0)},Re=function(e){return e.target.value=""},Be=function(){var e=Object(k.a)(y.a.mark((function e(){var t,a,o,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,v(!0),""!==X){e.next=5;break}throw P("\u041e\u0448\u0438\u0431\u043a\u0430!","\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d \u043f\u043e\u043b"),new Error("\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d \u043f\u043e\u043b");case 5:if(3===re.split(" ").filter((function(e){return""!==e})).length){e.next=8;break}throw P("\u041e\u0448\u0438\u0431\u043a\u0430!","\u0424\u0418\u041e \u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0432\u0432\u0435\u0434\u0435\u043d\u044b \u043d\u0435\u0432\u0435\u0440\u043d\u043e"),new Error("\u0424\u0418\u041e \u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0432\u0432\u0435\u0434\u0435\u043d\u044b \u043d\u0435\u0432\u0435\u0440\u043d\u043e");case 8:if(""===me||-1!==me.search(b)){e.next=11;break}throw P("\u041e\u0448\u0438\u0431\u043a\u0430!","\u041d\u0438\u043a \u0432 \u0434\u0438\u0441\u043a\u043e\u0440\u0434\u0435 \u0431\u044b\u043b \u0432\u0432\u0435\u0434\u0451\u043d \u043d\u0435 \u0432\u0435\u0440\u043d\u043e, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043d\u0430\u043b\u0438\u0447\u0438\u0435 '#' \u0438 \u0446\u0438\u0444\u0440 \u043f\u043e\u0441\u043b\u0435 \u043d\u0435\u0451, \u0430 \u0442\u0430\u043a \u0436\u0435 \u0440\u0443\u0441\u0441\u043a\u0438\u0445 \u0431\u0443\u043a\u0432"),new Error("\u041d\u0438\u043a \u0432 \u0434\u0438\u0441\u043a\u043e\u0440\u0434\u0435 \u0431\u044b\u043b \u0432\u0432\u0435\u0434\u0451\u043d \u043d\u0435 \u0432\u0435\u0440\u043d\u043e, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043d\u0430\u043b\u0438\u0447\u0438\u0435 '#' \u0438 \u0446\u0438\u0444\u0440 \u043f\u043e\u0441\u043b\u0435 \u043d\u0435\u0451, \u0430 \u0442\u0430\u043a \u0436\u0435 \u0440\u0443\u0441\u0441\u043a\u0438\u0445 \u0431\u0443\u043a\u0432");case 11:if(Ce){e.next=14;break}throw P("\u041e\u0448\u0438\u0431\u043a\u0430!","\u042d\u0442\u0430\u043f \u0432 \u0432\u043e\u0440\u043e\u043d\u043a\u0435 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d"),new Error("\u042d\u0442\u0430\u043f \u0432 \u0432\u043e\u0440\u043e\u043d\u043a\u0435 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d");case 14:return t={_id:Date.now(),name:z,midname:q,surname:Y,gender:X,dateOfBirth:D.toISOString(),phone:ue||void 0,discord:""!==me?String(me.match(b).shift()):void 0,parentPhone:te,parentFullname:re,salesFunnelStep:Ce},e.next=17,i=n,s=t,void Ge.a.post("".concat(i,"/CRM/Pupils"),{name:s.name,midname:s.midname,surname:s.surname,gender:s.gender,dateOfBirth:s.dateOfBirth,phone:s.phone,discord:s.discord,parentPhone:s.parentPhone,parentFullname:s.parentFullname,salesFunnelStep:s.salesFunnelStep},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("tokenID")),"Content-Type":"application/json;charset=utf-8"}});case 17:return R("\u0423\u0441\u043f\u0435\u0448\u043d\u043e!","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441\u043e\u0437\u0434\u0430\u043d!"),l(),e.next=21,p((function(e){return[].concat(Object(le.a)(e),[t])}));case 21:j((function(e){return!0})),j((function(e){return!1})),C(!1),v(!1),_e(),e.next=34;break;case 28:e.prev=28,e.t0=e.catch(0),c||console.log(e.t0),C(!0),v(!1),e.t0.response&&(G(e.t0.response.status),a=e.t0.response,o=a.status,r=a.data,400===o&&P("\u041d\u0435 \u0432\u0435\u0440\u043d\u043e \u0432\u0432\u0435\u0434\u0435\u043d\u044b \u0434\u0430\u043d\u043d\u044b\u0435"),"TOKEN_EXPIRED"===r.message&&ee(r.token),401===o&&(localStorage.removeItem("tokenID"),window.location.replace("/")),500===o&&P("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430"));case 34:case"end":return e.stop()}var i,s}),e,null,[[0,28]])})));return function(){return e.apply(this,arguments)}}();return Object(F.jsxs)(F.Fragment,{children:[i?Object(F.jsx)("div",{style:{position:"absolute",right:0},className:"collapse d-flex flex-row-reverse",id:"navbarScroll",children:Object(F.jsx)("div",{className:"d-flex plus-box",children:Object(F.jsx)("div",{className:"nav-item plus",onClick:Ee,children:Object(F.jsx)("i",{className:"bi bi-person-plus",style:{fontSize:"38px",color:"#F56767"}})})})}):Object(F.jsx)(Ne.a,{style:Ie,onClick:Ee}),Object(F.jsx)(Oe.a,{width:900,title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0443\u0447\u0435\u043d\u0438\u043a\u0430",visible:I,onCancel:Pe,footer:[Object(F.jsx)(ge.a,{onClick:Pe,children:"\u041e\u0442\u043c\u0435\u043d\u0430"},"back"),Object(F.jsx)(ge.a,{onClick:Be,loading:O,type:"primary",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"},"submit")],children:Object(F.jsxs)("form",{action:"#",method:"POST",children:[Object(F.jsxs)(De,{children:[Object(F.jsx)("p",{children:"\u0418\u043c\u044f:"}),Object(F.jsx)(ae.a,{onChange:function(e){T((function(t){return e.target.value}))},value:z,required:!0})]}),Object(F.jsxs)(De,{children:[Object(F.jsx)("p",{children:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f:"}),Object(F.jsx)(ae.a,{onChange:function(e){K((function(t){return e.target.value}))},value:q,required:!0})]}),Object(F.jsxs)(De,{children:[Object(F.jsx)("p",{children:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e:"}),Object(F.jsx)(ae.a,{onChange:function(e){U((function(t){return e.target.value}))},value:Y,required:!0})]}),Object(F.jsxs)(De,{children:[Object(F.jsx)("p",{children:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442:"}),Object(F.jsx)(ve.a,{className:"form-control",placeholder:"\u0413\u0413\u0413\u0413.\u041c\u041c.\u0414\u0414",defaultValue:be()("01-01-2021",h),format:h,onChange:function(e){E((function(t){return e}))}})]}),Object(F.jsxs)(De,{children:[Object(F.jsx)("p",{children:"\u0424\u0418\u041e \u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044f:"}),Object(F.jsx)(ae.a,{onChange:function(e){ie((function(t){return e.target.value}))},value:re,required:!0,placeholder:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f \u0418\u043c\u044f \u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"})]}),Object(F.jsxs)(De,{children:[Object(F.jsx)("p",{children:"\u041d\u0438\u043a \u0432 \u0434\u0438\u0441\u043a\u043e\u0440\u0434\u0435:"}),Object(F.jsx)(ae.a,{onChange:function(e){xe((function(t){return e.target.value}))},value:me,placeholder:"\u041d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e"})]}),Object(F.jsxs)(De,{children:[Object(F.jsx)("p",{children:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0440\u0435\u0431\u0451\u043d\u043a\u0430:"}),Object(F.jsx)(ke.a,{autoComplete:"off",onChange:function(e){je((function(t){return e.target.value}))},onFocus:Re,style:Se,type:"tel",name:"tel",className:"form-control",mask:"+9 (999) 999-99-99",placeholder:"\u041d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e"})]}),Object(F.jsxs)(De,{children:[Object(F.jsx)("p",{children:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f:"}),Object(F.jsx)(ke.a,{autoComplete:"off",onChange:function(e){ne((function(t){return e.target.value}))},onFocus:Re,style:Se,type:"tel",name:"tel",className:"form-control",mask:"+9 (999) 999-99-99"})]}),Object(F.jsxs)(De,{children:[Object(F.jsx)("p",{children:"\u041f\u043e\u043b:"}),Object(F.jsxs)("select",{onChange:function(e){J((function(t){return e.target.value}))},name:"gender",value:X,className:"form-control",required:!0,children:[Object(F.jsx)("option",{defaultValue:!0}),Object(F.jsx)("option",{value:"\u041c\u0443\u0436\u0441\u043a\u043e\u0439",children:"\u041c\u0443\u0436\u0441\u043a\u043e\u0439"}),Object(F.jsx)("option",{value:"\u0416\u0435\u043d\u0441\u043a\u0438\u0439",children:"\u0416\u0435\u043d\u0441\u043a\u0438\u0439"})]})]}),Object(F.jsxs)(De,{children:[Object(F.jsx)("p",{children:"\u0412\u043e\u0440\u043e\u043d\u043a\u0430:"}),Object(F.jsxs)("select",{className:"form-control",name:"salesFunnelId",value:Ce,onChange:function(e){we((function(t){return e.target.value}))},children:[u,t.map((function(e){return t[0]._id===e._id?Object(F.jsx)("option",{value:e._id,defaultValue:!0,children:e.name},e._id):Object(F.jsx)("option",{value:e._id,children:e.name},e._id)}))]})]})]})})]})},Ae=(n(381),[1020,700].map((function(e){return"@media (max-width: ".concat(e,"px)")}))),Ye=T.a.div((m={padding:"0 30px"},Object(de.a)(m,Ae[1],{padding:"0 0"}),Object(de.a)(m,".log_h2",{}),Object(de.a)(m,"td",{paddingTop:"1px",paddingBottom:"4px"}),Object(de.a)(m,"th, td",{whiteSpace:"nowrap"}),m)),Ue=n(44),Ve=function(){var e=Object(x.useState)(0),t=Object(g.a)(e,2),n=t[0],a=t[1],c=Object(x.useState)(0),o=Object(g.a)(c,2),r=o[0],i=o[1],s=Object(x.useState)([{_id:""}]),l=Object(g.a)(s,2),d=l[0],u=l[1],j=Object(x.useState)([{_id:"45343235456645",surname:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0443\u0441\u0442...",name:"",midname:"",dateOfBirth:"2004-12-07",gender:"",phoneNumber:"",parentPhoneNumber:"",discordNickname:"",groups:[],parentFullname:""}]),p=Object(g.a)(j,2),b=p[0],h=p[1],m=function(){var e=Object(k.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe(S,8);case 2:t=e.sent,u((function(e){return t}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c={};for(var o in a)c.groups||(c.groups=[]),c.groups.push(o);for(var r in n)n[r][0]&&("surname"==r||"name"==r||"midname"==r||"dateOfBirth"==r?c["".concat(r,"s")]=n[r]:c["".concat(r)]=n[r]);if(c.ages){var s=Object(le.a)(c.ages);c.ages=[],s.forEach((function(e){c.ages.push(+e)}))}if(c.balance){var l=Object(le.a)(c.balance);1==l[0]&!l[1]?c.balance={$gte:0}:2==l[0]&!l[1]?c.balance={$lt:0}:l[1]&&(c.balance={$gte:0,$lte:0})}var d={filters:c};Ue({method:"post",url:"".concat(S,"/CRM/Pupils/find?limit=").concat(xe,"&offset=").concat(t),headers:{"Content-Type":"application/jsoncharset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:d}).then((function(e){var t=e.data,n=e.headers;h(t),i(n.count)})).catch((function(t){te(e,t)}))};Object(x.useEffect)((function(){f(),m()}),[]),Object(x.useEffect)((function(){document.querySelectorAll("input").forEach((function(e){e.value=""})),document.querySelectorAll("select").forEach((function(e){e.value=""}))}));var O=[];b.forEach((function(e){var t=function(){var a=Object(k.a)(y.a.mark((function a(){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:Ue({method:"DELETE",url:"".concat(S,"/CRM/Pupils/").concat(e._id),headers:{"Content-Type":"application/jsoncharset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){f(n)})).catch((function(e){te(t,e)}));case 1:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),a=e._id,c=e.parentFullname,o=e.surname,r=e.name,i=e.midname,s=e.dateOfBirth,l=e.gender,d=e.phone,u=e.balance,j=e.parentPhone,p=e.discord,b=e.groups;O.push({key:a,trash:t,surname:function(){return Object(F.jsx)(U.b,{className:"link-info",to:"/student/".concat(a),children:o})},name:r,midname:i,dateOfBirth:he(s),gender:l,phoneNumber:d,tutor:"",parentPhoneNumber:j,parentFullname:c,balance:"".concat(u),groups:b||[],discordNickname:p})}));var v=function(e,t){return{title:e,dataIndex:t,key:t}},N=[{title:"",dataIndex:"trash",key:"trash",render:function(e){if(e)return Object(F.jsx)("i",{onClick:e,className:"bi bi-trash",style:{fontSize:"30px",color:"#F56767",cursor:"pointer"}})}},Object(se.a)(Object(se.a)({},v("\u0424\u0430\u043c\u0438\u043b\u0438\u044f","surname")),{},{render:function(e){if("function"==typeof e)return e()}}),Object(se.a)({},v("\u0418\u043c\u044f","name")),Object(se.a)({},v("\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e","midname")),Object(se.a)({},v("\u0412\u043e\u0437\u0440\u0430\u0441\u0442","dateOfBirth")),Object(se.a)({},v("\u041f\u043e\u043b","gender")),Object(se.a)({},v("\u0424\u0418\u041e \u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044f","parentFullname")),Object(se.a)({},v("\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430","phoneNumber")),Object(se.a)({},v("\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f","parentPhoneNumber")),Object(se.a)({},v("\u0411\u0430\u043b\u0430\u043d\u0441","balance")),Object(se.a)(Object(se.a)({},v("\u0413\u0440\u0443\u043f\u043f\u044b","groups")),{},{render:function(e){if("function"==typeof e.map)return Object(F.jsx)(F.Fragment,{children:e.map((function(e){return Object(F.jsx)(ue.a,{color:"blue",children:e.group_name},"".concat(e._id))}))})}}),Object(se.a)({},v("\u0414\u0438\u0441\u043a\u043e\u0440\u0434 \u043d\u0438\u043a\u043d\u0435\u0439\u043c","discordNickname"))];return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("nav",{id:"navbar-student",className:"navbar navbar-expand-lg navbar-light",children:Object(F.jsx)("div",{className:"container-fluid d-flex",children:Object(F.jsx)("div",{className:"collapse d-flex flex-row h3-person",children:Object(F.jsx)("div",{className:"d-flex plus-box",children:Object(F.jsx)("div",{children:Object(F.jsx)("h3",{children:"\u0423\u0447\u0435\u043d\u0438\u043a\u0438"})})})})})}),Object(F.jsx)(Ye,{className:"",children:Object(F.jsxs)("div",{children:[Object(F.jsx)("div",{className:"table_user",children:Object(F.jsx)(je.a,{pagination:!1,dataSource:O,columns:N,scroll:{x:0}})}),Object(F.jsx)(fe,{getItem:f,count:r,offset:n,setOffset:a})]})}),Object(F.jsx)(Le,{loader:{loaded:!0,setLoaded:function(){}},status:1,funnel:d,pageSize:8,Url:S,pupils:{pupilsList:[],setPupilsList:function(){}},bigIcon:!0,update:f,defaultValueOptionFunnel:Object(F.jsx)("option",{value:"",defaultValue:!0})})]})},He=n(188),qe=n(581),Ke=n(44),We=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},c=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0,i=c?"/CRM/Pupils/".concat(t,"/Payment?amount=").concat(+e,"&subscription=").concat(c,"&group_id=").concat(o):"/CRM/Pupils/".concat(t,"/Payment?amount=").concat(+e);Ke({method:"post",url:"".concat(S).concat(i),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){a(),n()})).catch((function(e){te((function(){}),e,r,n,(function(){P("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0431\u0430\u043b\u0430\u043d\u0441","\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430")}))}))},$e=function(e){var t,a=e.itemG,c=e.dataGroup,o=e.getGroup_Id,r=e.setData,i=e.surname,s=e.name,l=e.pageInfo,d=e.type,u=n(44),j=Object(x.useState)("-1"),p=Object(g.a)(j,2),b=p[0],h=p[1],m=Object(x.useState)(["fixedSchedule-H","","bi-plus-circle"]),f=Object(g.a)(m,2),O=f[0],v=f[1],y=a.localSchedule["".concat(c)]?a.localSchedule["".concat(c)]:[],k=Object(x.useState)(y),N=Object(g.a)(k,2),I=N[0],C=N[1],w=Object(x.useState)([]),_=Object(g.a)(w,2),D=_[0],E=_[1],R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};u({method:"put",url:"".concat(S,"/CRM/Groups/").concat(c,"/Pupils/").concat(a._id,"/Schedule"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:e}).then((function(e){t()})).catch((function(e){if(e.response){G(e.response.status);var t=e.response,n=t.status,a=t.data;t.statusText;404==n?P("Error 404","\u0421\u0435\u0440\u0432\u0435\u0440 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"):401==n&&("TOKEN_EXPIRED"==a.message?(ee(e.response.data.token),o()):(localStorage.removeItem("tokenID"),window.location.replace("/")))}}))},B=D.map((function(e,t){console.log(e);return Object(F.jsx)(q.a.Item,{className:"li",children:Object(F.jsx)("span",{onClick:function(){for(var t=Object(le.a)(I),n=0,r=0;n<e.hoursCount;)t[r].paid||(t[r].paid=!0,n++),r++;var i=function(){};R(t,(function(){We("-".concat(e.price),a._id,i,o,e._id,c,(function(){R(t)}))})),C(t)},className:"dropdown-item bg-info text-light",href:"#",children:e.name})},t)})),M=Object(F.jsx)(q.a,{children:B});Object(x.useEffect)((function(){u({method:"get",url:"".concat(S,"/CRM/Subscriptions"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){E(e.data)})).catch((function(e){if(e.response){G(e.response.status);var t=e.response,n=t.status,a=t.data;t.statusText,404==n?P("Error 404","\u0421\u0435\u0440\u0432\u0435\u0440 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"):401==n&&("TOKEN_EXPIRED"==a.message?(ee(e.response.data.token),o()):(localStorage.removeItem("tokenID"),window.location.replace("/")))}}))}),[]);var z,L=[780,1380,2002],A=L.map((function(e){return"@media (max-width: ".concat(e,"px)")})),Y=(L.map((function(e){return"@media (min-width: ".concat(e,"px)")})),T.a.div({borderBottom:"1px solid #91A8B0",paddingBottom:"5px",marginBottom:"5px",i:{color:"#17a2b8",fontSize:"26px",cursor:"pointer",paddingTop:"10px"},".global-fon3000":{position:"fixed",top:"0",left:"0",zIndex:"99",height:"100vh",background:"rgba(0, 0, 0, 0.6)",overflowY:"scroll",i:{position:"fixed",top:"3px",left:"7px",color:"#fff"},".bi-trash":{display:"none"}},h4:{display:"inline-block",marginRight:"10px",marginBottom:"19px"},".fixedSchedule-H":{maxHeight:"81px",overflow:"hidden"},".scheblueFixet":{margin:"0 auto",marginTop:"50px",width:"86%"},".fixedSchedule-H, .scheblueFixet":(t={overflow:"hidden",width:"2476px"},Object(de.a)(t,A[2],{width:"1857px"}),Object(de.a)(t,A[1],{width:"1238px"}),Object(de.a)(t,A[0],{width:"619px"}),t),".boxDay":{overflowX:"auto",padding:"0 0 10px 0","&::-webkit-scrollbar":{height:"10px",backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:"10px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#17a2b8",borderRadius:"10px"}}})),V=T.a.div({margin:"0 3px 0 0",position:"initial",button:{fontSize:"15px",fontWeight:"600",padding:"1px 7px",width:"71px"},".btnAbic":{width:"100%"},ul:{border:"none",background:"rgba(0, 0, 0, 0.3)",padding:"6px"},".li":{border:"none",background:"rgba(0, 0, 0, 0)",span:{borderRadius:"6px",fontWeight:"500",cursor:"pointer"},".input-group-text":{margin:"0",borderRadius:"6px 0 0 6px"},textarea:{padding:"2px 7px",fontWeight:"500"}}}),H=1;z=I.map((function(e,t){var n=0;8==H?(n=27,H=1):H++;var c=be()(e.date,"DD.MM.YYYY").format("DD.MM"),r="#f8f9fa",i="1",s=be()(e.date,"DD.MM.YYYY").format("YYYY-MM-DD"),l=be()().diff(s,"day");e.paid&3!=e.status&l<=0?r="#17a2b8":3==e.status&l<=0?r="#6c757d":3==e.status&e.paid?r="#dc3545":l>0&e.paid?r="#28a745":l>0&!e.paid&3!=e.status?(r="#28a745",i="0.5"):l>0&!e.paid&3==e.status&&(r="#dc3545",i="0.5");var d=function(e){var n=Object(le.a)(I);2==e&3==n[t].status||3==e&l<0?(n[t].status=e,R(n),C(n)):3!==e&2!==e?(n[t].title=e,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};u({method:"post",url:"".concat(S,"/CRM/Pupils/").concat(a._id,"/Notes"),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:{text:e}}).then((function(){t()})).catch((function(e){e.response&&(G(e.response.status),o())}))}(e,(function(){R(n)})),C(n)):P("\u041d\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441")},j=T.a.span({marginRight:"".concat(n,"px")}),p="",m="";e.title&&(m="#ffc107");var x=Object(F.jsxs)(q.a,{children:[Object(F.jsx)(q.a.Item,{children:Object(F.jsx)("span",{onClick:function(){d("3")},className:"dropdown-item bg-secondary text-light",href:"#",children:"\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u043b"})},"".concat(c,"1")),Object(F.jsx)(q.a.Item,{children:Object(F.jsx)("span",{onClick:function(){d("2")},className:"dropdown-item bg-success text-light",href:"#",children:"\u0423\u0440\u043e\u043a \u043f\u0440\u043e\u0439\u0434\u0435\u043d"})},"".concat(c,"2")),Object(F.jsx)(q.a.Item,{children:Object(F.jsxs)("div",{className:"input-group",children:[Object(F.jsx)("span",{onClick:function(){d(p),h("")},className:"input-group-text bg-info text-light",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(F.jsx)("textarea",{placeholder:"\u041e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0443...",defaultValue:e.title,onChange:function(e){p=e.target.value},className:"form-control","aria-label":"With textarea"})]})},"".concat(c,"3"))]},c),f=!1;return b===t?f=!0:""===b&&(f=!1),Object(F.jsx)(j,{children:Object(F.jsx)(V,{className:"btn-group",children:Object(F.jsx)(He.a,{onVisibleChange:function(e){},overlay:x,visible:f,trigger:["click"],children:Object(F.jsx)("button",{type:"button",style:{color:"".concat(m),background:"".concat(r),opacity:"".concat(i)},className:"btn dropdown-toggle",onClick:function(){h(b===t?"":t)},children:c})})})},"".concat(c).concat(t))}));var K=a._id,W="student";l&&(W=l,K=c);var $=Object(F.jsx)(U.b,{to:"/".concat(W,"/").concat(K),children:Object(F.jsx)("h4",{children:"".concat(i," ").concat(s)})}),X="";"teacher"!=n(135).decode(localStorage.getItem("tokenID")).accountType&&(X=Object(F.jsx)("span",{children:Object(F.jsx)(V,{className:"btn-group",children:Object(F.jsx)(He.a,{overlay:M,trigger:["click"],children:Object(F.jsx)("button",{type:"button",className:"btn btn-success dropdown-toggle btnAbic",children:"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c"})})})}));return Object(F.jsx)(Y,{className:"table",children:Object(F.jsxs)("div",{className:"pupils-item row",children:[Object(F.jsxs)("div",{className:"col-12",children:[$,X]}),Object(F.jsxs)("div",{className:"col-12".concat(O[1]),children:[Object(F.jsx)("div",{className:"boxDay",children:Object(F.jsx)("div",{className:"".concat(O[0]),children:z})}),Object(F.jsx)("i",{onClick:function(){"fixedSchedule-H"==O[0]?v(["scheblueFixet"," global-fon3000","bi-x-circle"]):v(["fixedSchedule-H","","bi-plus-circle"])},className:"bi ".concat(O[2])}),Object(F.jsx)(qe.a,{title:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435",content:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0443\u0447\u0435\u043d\u0438\u043a\u0430 \u0438\u0437 \u0433\u0440\u0443\u043f\u043f\u044b",placement:"right",trigger:"hover",children:Object(F.jsx)("i",{onClick:function(){console.log(a,c),u({method:"delete",url:"".concat(S,"/CRM/Groups/").concat(c,"/Pupils/").concat(a._id),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){var t=e.data,n=t.group,a=t.pupil;"group"==d?r(n):"pupil"==d&&r(a)})).catch((function(e){e.response&&G(e.response.status)}))},className:"bi bi-trash",style:{color:"rgb(245, 103, 10",marginLeft:"10px"}})})]})]})},a._id)};$e.defaultProps={surname:""};var Xe,Je,Qe=$e,Ze=function(e){var t=e.dataStudent,a=e.updetePage,c={},o=n(44),r=Object(x.useState)(""),i=Object(g.a)(r,2),s=i[0],l=i[1],d=t.groups,u=t.name,j=t.surname,p=t.midname,b=t.gender,h=t.parentFullname,m=t.dateOfBirth,f=t.phone,O=t.parentPhone,v=t.discord,y=t._id,k=function(){M("\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f","\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435"),o({method:"patch",url:"".concat(S,"/CRM/Pupils/").concat(y),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:c}).then((function(e){a(e.data),z(),B.fire({icon:"success",title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b"})})).catch((function(e){e.response&&G(e.response.status)}))},N=[],I=d.map((function(e,t){return N.push(e.group_name),Object(F.jsx)("span",{className:"badge bg-light text-dark",children:e.group_name},e._id)})),C=T.a.ul({".ant-picker":{span:{margin:"0"}},".ant-picker-input":{input:{width:"127px"}}}),w=Object(F.jsxs)(q.a,{children:[Object(F.jsx)(q.a.Item,{children:Object(F.jsx)("input",{placeholder:"\u041f\u043e\u043c\u0435\u043d\u044f\u0442\u044c \u0444\u0430\u043c\u0438\u043b\u0438\u044e",onChange:function(e){c={surname:"".concat(e.target.value)}},type:"name",className:"text-dark form-control col-12"})}),Object(F.jsx)(q.a.Item,{children:Object(F.jsx)("span",{onClick:function(){l(""),k()},className:"badge bg-warning text-dark save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),_=Object(F.jsxs)(q.a,{children:[Object(F.jsx)(q.a.Item,{children:Object(F.jsx)("input",{placeholder:"\u041d\u043e\u0432\u043e\u0435 \u0438\u043c\u044f",onChange:function(e){c={name:"".concat(e.target.value)}},type:"name",className:"text-dark form-control col-12"})}),Object(F.jsx)(q.a.Item,{children:Object(F.jsx)("span",{onClick:function(){l(""),k()},className:"badge bg-warning text-dark save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),D=Object(F.jsxs)(q.a,{children:[Object(F.jsx)(q.a.Item,{children:Object(F.jsx)("input",{placeholder:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u0435...",onChange:function(e){c={midname:"".concat(e.target.value)}},type:"name",className:"text-dark form-control col-12"})}),Object(F.jsx)(q.a.Item,{children:Object(F.jsx)("span",{onClick:function(){k(),l("")},className:"badge bg-warning text-dark save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),P=Object(F.jsxs)(q.a,{children:[Object(F.jsx)(q.a.Item,{children:Object(F.jsx)(ke.a,{mask:"+9 (999) 999-99-99",placeholder:"\u041d\u043e\u0432\u044b\u0439 \u043d\u043e\u043c\u0435\u0440",onChange:function(e){c={parentPhone:"".concat(e.target.value)}},type:"name",className:"text-dark form-control col-12"})}),Object(F.jsx)(q.a.Item,{children:Object(F.jsx)("span",{onClick:function(){k(),l("")},className:"badge bg-warning text-dark save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),E=Object(F.jsxs)(q.a,{children:[Object(F.jsx)(q.a.Item,{children:Object(F.jsx)(ke.a,{mask:"+9 (999) 999-99-99",placeholder:"\u041d\u043e\u0432\u044b\u0439 \u043d\u043e\u043c\u0435\u0440",onChange:function(e){c={phone:"".concat(e.target.value)}},type:"name",className:"text-dark form-control col-12"})}),Object(F.jsx)(q.a.Item,{children:Object(F.jsx)("span",{onClick:function(){k(),l("")},className:"badge bg-warning text-dark save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),R=Object(F.jsxs)(q.a,{children:[Object(F.jsx)(q.a.Item,{children:Object(F.jsx)("input",{placeholder:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c NickName",onChange:function(e){c={discord:"".concat(e.target.value)}},type:"name",className:"text-dark form-control col-12"})}),Object(F.jsx)(q.a.Item,{children:Object(F.jsx)("span",{onClick:function(){k(),l("")},className:"badge bg-warning text-dark save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]});return Object(F.jsxs)(C,{className:"list-group list-group-flush",children:[Object(F.jsxs)("li",{className:"list-group-item",children:["\u0424\u0430\u043c\u0438\u043b\u0438\u044f: ",Object(F.jsx)("span",{className:"badge bg-warning text-dark",children:j}),Object(F.jsx)("div",{className:"btn-group",children:Object(F.jsx)(He.a,{overlay:w,visible:function(){return"Surname"===s},trigger:["click"],children:Object(F.jsx)("i",{className:"bi bi-pencil",onClick:function(){l("Surname"===s?"":"Surname")},style:{fontSize:"20px",color:"#17a2b8",cursor:"pointer"}})})})]}),Object(F.jsxs)("li",{className:"list-group-item",children:["\u0418\u043c\u044f: ",Object(F.jsx)("span",{className:"badge bg-warning text-dark",children:u}),Object(F.jsx)("div",{className:"btn-group",children:Object(F.jsx)(He.a,{overlay:_,visible:function(){return"Name"===s},trigger:["hover"],children:Object(F.jsx)("i",{onClick:function(){l("Name"===s?"":"Name")},className:"bi bi-pencil",style:{fontSize:"20px",color:"#17a2b8",cursor:"pointer"}})})})]}),Object(F.jsxs)("li",{className:"list-group-item",children:["\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e: ",Object(F.jsx)("span",{className:"badge bg-warning text-dark",children:p}),Object(F.jsx)("div",{className:"btn-group",children:Object(F.jsx)(He.a,{overlay:D,visible:function(){return"Midname"===s},trigger:["hover"],children:Object(F.jsx)("i",{className:"bi bi-pencil",onClick:function(){l("Midname"===s?"":"Midname")},style:{fontSize:"20px",color:"#17a2b8",cursor:"pointer"}})})})]}),Object(F.jsxs)("li",{className:"list-group-item",children:["\u0412\u043e\u0437\u0440\u0430\u0441\u0442:",Object(F.jsx)("span",{className:"badge bg-success text-light",children:he(m)}),Object(F.jsx)(ve.a,{onChange:function(e){c={dateOfBirth:e._d.toISOString()},k()},placeholder:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0432\u043e\u0437\u0440\u0430\u0441\u0442"})]}),Object(F.jsxs)("li",{className:"list-group-item",children:["\u041f\u043e\u043b:",Object(F.jsx)("span",{className:"badge bg-success text-light",children:b})]}),Object(F.jsxs)("li",{className:"list-group-item",children:["\u0424\u0418\u041e \u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044f:",Object(F.jsx)("span",{className:"badge bg-success text-light",children:h})]}),Object(F.jsxs)("li",{className:"list-group-item",children:["\u041d\u043e\u043c\u0435\u0440 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f: ",Object(F.jsx)("span",{className:"badge bg-info text-light",children:O}),Object(F.jsx)("div",{className:"btn-group",children:Object(F.jsx)(He.a,{overlay:P,visible:function(){return"ParentPhone"===s},children:Object(F.jsx)("i",{className:"bi bi-pencil",onClick:function(){l("ParentPhone"===s?"":"ParentPhone")},style:{fontSize:"20px",color:"#17a2b8",cursor:"pointer"}})})})]}),Object(F.jsxs)("li",{className:"list-group-item",children:["\u041d\u043e\u043c\u0435\u0440 \u0443\u0447\u0435\u043d\u0438\u043a\u0430: ",Object(F.jsx)("span",{className:"badge bg-warning text-dark",children:f}),Object(F.jsx)("div",{className:"btn-group",children:Object(F.jsx)(He.a,{overlay:E,visible:function(){return"Phone"===s},children:Object(F.jsx)("i",{className:"bi bi-pencil",onClick:function(){l("Phone"===s?"":"Phone")},style:{fontSize:"20px",color:"#17a2b8",cursor:"pointer"}})})})]}),Object(F.jsxs)("li",{className:"list-group-item",children:["Discord: ",Object(F.jsx)("span",{className:"badge bg-light text-dark",children:v}),Object(F.jsx)("div",{className:"btn-group",children:Object(F.jsx)(He.a,{className:"Discord",overlay:R,visible:function(){return"Discord"===s},children:Object(F.jsx)("i",{className:"bi bi-pencil",onClick:function(){l("Discord"===s?"":"Discord")},style:{fontSize:"20px",color:"#17a2b8",cursor:"pointer"}})})})]}),Object(F.jsxs)("li",{className:"list-group-item",children:["\u0413\u0440\u0443\u043f\u043f\u044b: ",I]})]})},et=function(e){var t=e.pay_History,n=t||[],a=[];n.forEach((function(e,t){0==e.type&&a.unshift(Object(F.jsxs)("li",{className:"list-group-item",children:[e.date," ",Object(F.jsxs)("span",{children:[e.amount,"\u20bd"]})," ",Object(F.jsx)("br",{}),e.issuer]},t))}));var c=[];n.forEach((function(e,t){1==e.type&&c.unshift(Object(F.jsxs)("li",{className:"list-group-item",children:[e.date," ",Object(F.jsxs)("span",{children:[e.amount,"\u20bd"]})," ",Object(F.jsx)("br",{}),e.issuer]},t))}));var o=T.a.div({margin:"0",padding:"0",".colona":{padding:"0 3px",marginBottom:"15px",h3:{fontSize:"16px"},ul:{borderRadius:"5px",overflow:"auto",maxHeight:"268px","&::-webkit-scrollbar":{width:"10px",backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:"10px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#17a2b8",borderRadius:"10px"}},li:{span:{fontSize:"17px"}}},".colona-1":{ul:{border:"1px solid #28a745"},li:{span:{color:"#28a745"}}},".colona-2":{ul:{border:"1px solid #f27474"},li:{span:{color:"#28a745"}}}});return Object(F.jsxs)(o,{className:"col-12 row",children:[Object(F.jsxs)("div",{className:"colona colona-1 col-6",children:[Object(F.jsx)("h3",{className:"badge bg-success text-light",children:"\u041f\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435"}),Object(F.jsx)("ul",{className:"list-group",children:a})]}),Object(F.jsxs)("div",{className:"colona colona-2 col-6",children:[Object(F.jsx)("h3",{className:"badge bg-danger text-light",children:"\u041e\u043f\u043b\u0430\u0442\u0430"}),Object(F.jsx)("ul",{className:"list-group",children:c})]})]})},tt=n(579),nt=n(582),at=n(570),ct=n(575),ot=ae.a.TextArea,rt=n(44),it=function(e){var t=e.notesGlobal,a=(e.update,e._id),c=function(e){var t=e.comments;return console.log(t),Object(F.jsx)(nt.b,{dataSource:t,header:"".concat(t.length," ").concat(t.length>1?"replies":"reply"),itemLayout:"horizontal",renderItem:function(e){var t=Object(se.a)({},e);return t.datetime=be()(e.datetime).locale("ru").format("dddd, D MMMM YYYY \u0433., HH:MM"),"Invalid date"===t.datetime&&(t.datetime=e.datetime),Object(F.jsx)(at.a,Object(se.a)({},t))}})};Object(x.useEffect)((function(){document.querySelector(".ant-input").value="";var e=document.querySelector(".ant-drawer-body");e.scrollTop=e.scrollHeight}));var o=n(135).decode(localStorage.getItem("tokenID")),r=o.surname,i=o.name,s=o.midname,l="".concat(r," ").concat(i," ").concat(s),d=Object(x.useState)(t),u=Object(g.a)(d,2),j=u[0],p=u[1],b=Object(x.useState)(!1),h=Object(g.a)(b,2),m=h[0],f=h[1],O="";return Object(F.jsxs)(F.Fragment,{children:[j.length>0&&Object(F.jsx)(c,{comments:j}),Object(F.jsx)(at.a,{content:Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(ct.a.Item,{children:Object(F.jsx)(ot,{id:"TextArea",onClick:function(){document.querySelector("#TextArea").value=""},rows:4,onChange:function(e){O=e.target.value},placeholder:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"})}),Object(F.jsx)(ct.a.Item,{children:Object(F.jsx)(ge.a,{htmlType:"submit",loading:m,onClick:function e(){O&&(f(!0),rt({method:"post",url:"".concat(S,"/CRM/Pupils/").concat(a,"/Notes"),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:{text:O}}).then((function(){f(!1),p([].concat(Object(le.a)(j),[{author:l,content:Object(F.jsx)("p",{children:O}),datetime:be()().locale("ru").format("dddd, D MMMM YYYY \u0433., HH:MM")}]))})).catch((function(t){if(t.response){G(t.response.status);var n=t.response,a=n.status,c=n.data;404==a?P("404","\u0421\u0435\u0440\u0432\u0435\u0440 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"):401==a&&("TOKEN_EXPIRED"==c.message?(ee(c.token),O=O,e()):(localStorage.removeItem("tokenID"),window.location.replace("/")))}})))},type:"primary",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"})})]})})]})},st=function(e){var t=e.notes,n=e.update,a=e._id,c=Object(x.useState)(!1),o=Object(g.a)(c,2),r=o[0],i=o[1],s=T.a.div({".ant-comment-content-detail":{borderBottom:"1px solid #f0f0f0"}}),l=[];return(t||[]).forEach((function(e){var t=e.author,n=e.date,a=e.text;l.push({author:t,content:Object(F.jsx)("p",{children:a}),datetime:n})})),Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(ge.a,{className:"Button-Drawer",type:"primary",onClick:function(){i(!0)},children:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u043a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438"}),Object(F.jsx)(tt.a,{width:"400px",placement:"right",closable:!1,onClose:function(){r&&n(),i(!1)},visible:r,children:Object(F.jsx)(s,{children:Object(F.jsx)(it,{notesGlobal:l,update:n,_id:a})})})]})},lt=function(e){var t=e.balance_item,n=e.pageStudent_id,a=e.updeteStudent,c=Object(x.useState)(!1),o=Object(g.a)(c,2),r=o[0],i=o[1],s=Object(x.useState)(+t?+t:0),l=Object(g.a)(s,2),d=l[0],u=l[1],j=0,p=function(){u(d)},b=T.a.span({borderRadius:"6px",fontWeight:"500",cursor:"pointer",fontSize:"14px"}),h=Object(F.jsxs)(q.a,{children:[Object(F.jsx)(q.a.Item,{children:Object(F.jsx)("input",{placeholder:"\u041f\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u044c",onChange:function(e){j=e.target.value},type:"number",className:"text-info form-control col-12"})}),Object(F.jsx)(q.a.Item,{children:Object(F.jsx)(b,{onClick:function(){i(!r),u(+d+ +j),We(j,n,a,void 0,void 0,void 0,p)},className:"badge bg-warning text-dark",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]});return Object(F.jsxs)("div",{className:"balance col-md-12 row",children:[Object(F.jsxs)("h6",{className:"calendar badge bg-success text-light",children:[d,Object(F.jsx)("span",{children:"\u20bd"})]}),Object(F.jsx)(He.a,{overlay:h,visible:r,trigger:["click"],children:Object(F.jsx)("i",{id:"dropdownMenuReference",className:"bi bi-plus",onClick:function(){i(!r)},style:{fontSize:"30px",color:"#17a2b8",cursor:"pointer"}})})]})},dt=function(){var e,t=Object(V.f)().id,a=(n(135),Object(x.useState)({_id:"60ba505dc12d3b9783c51d0f",name:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",surname:"",midname:"",gender:"",dateOfBirth:"2004-12-07",phone:"",parentPhone:"",discord:"",balance:0,localSchedule:{},groups:[],paymentHistory:[{type:1,date:"",amount:0,issuer:"",subscription:null},{type:0,date:"",amount:0,issuer:"",subscription:null}],notes:[]})),c=Object(g.a)(a,2),o=c[0],r=c[1],i=o.notes,s=o.groups,l=o.name,d=o.balance,u=o.localSchedule,j=o.paymentHistory,p=n(44),b=function e(){p({method:"get",url:"".concat(S,"/CRM/Pupils/").concat(t),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){r(e.data)})).catch((function(t){if(t.response){G(t.response.status);var n=t.response,a=n.status,c=n.data;404==a?P("404","\u0421\u0435\u0440\u0432\u0435\u0440 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"):401==a&&("TOKEN_EXPIRED"==c.message?(ee(c.token),e()):(localStorage.removeItem("tokenID"),window.location.replace("/")))}}))};Object(x.useEffect)((function(){b()}),[]);var h=[];for(var m in u)h.push(m);var f=[];s.forEach((function(e){f.push(e.group_name)}));var O=h.map((function(e,t){if(console.log(o),t<f.length)return console.log(f[t]),Object(F.jsx)(Qe,{pageInfo:"group",itemG:o,dataGroup:e,getGroup_Id:b,setData:r,name:f[t],type:"pupil"},e)})),v=[767].map((function(e){return"@media (max-width: ".concat(e,"px)")})),y=T.a.div({marginTop:"0px",margin:"0 auto",".pad":Object(de.a)({padding:"0px",paddingRight:"10px"},v[0],{paddingRight:"0px"}),".infoLog":(e={marginBottom:"10px",padding:"0"},Object(de.a)(e,v[0],{paddingBottom:"10px"}),Object(de.a)(e,".calendar",{margin:"auto 0",marginRight:"10px",fontSize:"20px",span:{paddingLeft:"6px"}}),e),".group-name":Object(de.a)({borderBottom:"1px solid #0dcaf0",padding:"0px"},v[0],{borderRight:"none"}),".balance":{h5:{fontSize:"1.25rem"}},".Button-Drawer":{position:"absolute",right:"0",top:"8px"},".ulBox":{borderRadius:"15px",padding:"0px"},".editing":{background:"#fff",borderRadius:"10px 10px 0 0",i:{marginLeft:"95%",cursor:"pointer"}},li:{backgroundColor:"none",span:{fontSize:"16px",margin:"0 5px 5px 0"}}}),k=T.a.div({background:"#fff",margin:"10px 0",padding:"10px",borderRadius:"15px","& > h3":{fontSize:"22px"}});return Object(F.jsxs)(y,{className:"container row col-12",children:[Object(F.jsxs)("div",{className:"col-12 col-md-6 pad",children:[Object(F.jsxs)("div",{className:"infoLog align-self-start col-md-12 col-12",children:[Object(F.jsxs)("div",{className:"group-name col-12 col-lg-12",children:[Object(F.jsx)("h3",{children:l}),Object(F.jsx)(st,{notes:i,update:b,_id:t})]}),Object(F.jsx)(lt,{balance_item:d,pageStudent_id:t,updeteStudent:b})]}),Object(F.jsx)(et,{pay_History:j})]}),Object(F.jsx)("div",{className:"col-md-6 ulBox",children:Object(F.jsx)(Ze,{dataStudent:o,updetePage:r})}),Object(F.jsxs)(k,{className:"container col-12",children:[Object(F.jsx)("h3",{className:"badge bg-warning",children:"\u0413\u0440\u0443\u043f\u043f\u044b:"}),O]})]})},ut=(n(563),n(44)),jt=function(){var e,t=Object(x.useState)(!1),n=Object(g.a)(t,2),a=n[0],c=n[1],o=Object(x.useState)(!1),r=Object(g.a)(o,2),i=r[0],s=r[1],l=function(){c(!1)},d=Object(x.useState)(0),u=Object(g.a)(d,2),j=u[0],p=u[1],b=Object(x.useState)(1),h=Object(g.a)(b,2),m=h[0],f=h[1],O=Object(x.useState)(["\u041f\u0443\u0441\u0442\u043e..."]),v=Object(g.a)(O,2),y=v[0],k=v[1],N=Object(x.useState)([]),I=Object(g.a)(N,2),C=I[0],w=I[1],_=Object(x.useState)([]),D=Object(g.a)(_,2),E=D[0],B=D[1],M=Object(x.useState)([]),z=Object(g.a)(M,2),L=z[0],A=z[1],Y=function(){ut({method:"post",url:"".concat(S,"/CRM/Pupils/find?limit=150&offset=0"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){var t=[];e.data.forEach((function(e){t.push(["".concat(e.surname," ").concat(e.name),e._id])})),k(t),w(t)})).catch((function(e){te(q,e)}))},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;ut({method:"post",url:"".concat(S,"/CRM/Groups/find?limit=10&offset=").concat(e),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){var t=e.data,n=e.headers;A(t),f(n.count)})).catch((function(e){te(q,e)}))},H=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;ut({method:"get",url:"".concat(S,"/AdminPanel/CRMAccounts?limit=10&offset=").concat(t,"&accountType=teacher"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){var t=e.data;B(t)})).catch((function(t){te(e,t)}))},q=function(){H(),Y(),V(j)};Object(x.useEffect)((function(){q()}),[]),Object(x.useEffect)((function(){a&&document.getElementById("fort").focus()}));var K=E.map((function(e,t){var n=e.name,a=e.surname,c=e.midname,o=e._id;return Object(F.jsxs)("option",{value:o,children:[a," ",n," ",c]},n+t)})),W=Object(x.useState)([]),$=Object(g.a)(W,2),X=$[0],J=$[1],Q=Object(x.useState)(""),Z=Object(g.a)(Q,2),ee=Z[0],ne=Z[1],ae=Object(x.useState)(""),ce=Object(g.a)(ae,2),oe=ce[0],re=ce[1],ie=Object(x.useState)(""),se=Object(g.a)(ie,2),ue=se[0],je=se[1],pe=Object(x.useState)(""),be=Object(g.a)(pe,2),he=be[0],me=be[1],xe={group_name:ee,places:oe,tutor:ue,level:he},ve=function(){var e=xe.group_name,t=xe.places,n=xe.tutor,a=xe.level;ne(e),re(t),je(n),me(a)},ye=Object(x.useState)(""),ke=Object(g.a)(ye,2),Ne=ke[0],Se=ke[1],Ie=C.map((function(e){return Object(F.jsx)("li",{onClick:function(){var t=[].concat(Object(le.a)(X),[e]);X.forEach((function(n){n[1]==e[1]&&(t=Object(le.a)(X))})),J(t),ve()},className:"list-group-item",children:Object(F.jsx)("span",{className:"badge bg-warning text-dark",children:e[0]})},e[1])})),Ce=X.map((function(e,t){return Object(F.jsxs)("button",{onClick:function(){var e=Object(le.a)(X);e.splice(t,1),J(e),ve()},type:"button",className:"btn btn-info",children:[e[0]," ",Object(F.jsx)("i",{className:"bi bi-x",style:{fontSize:"15px"}})]},e[1])})),we=L.map((function(e){var t=e.group_name,n=e.tutor,a=e.level,c=e.places,o=e.pupils,r=e.global_schedule,i=e._id,s=o||[],l="\u0423\u0447\u0438\u0442\u0435\u043b\u044c \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d...",d="-";if(r&&r[0]){var u=r[0].duration;d="\u0441 ".concat(u[0]," \u0434\u043e ").concat(u[1])}if(n){var p=n.surname,b=n.name,h=n.midname;l="".concat(p," ").concat(b," ").concat(h)}return Object(F.jsxs)("tr",{children:[Object(F.jsx)("td",{className:"td-trash",scope:"row",children:Object(F.jsx)("i",{id:i,onClick:function t(){var n=document.getElementById(e._id);n.style.opacity="0.3",ut({method:"DELETE",url:"".concat(S,"/CRM/Groups/").concat(e._id),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){V(j),n.style.opacity="1"})).catch((function(e){te(t,e)}))},className:"bi bi-trash",style:{fontSize:"30px",color:"#F56767"}})}),Object(F.jsx)("td",{className:"align-middle td-use",children:Object(F.jsx)(U.b,{className:"link-info",to:"/group/".concat(i),children:t})}),Object(F.jsx)("td",{className:"align-middle td-use",children:l}),Object(F.jsxs)("td",{className:"align-middle td-use",children:[a," \u043a\u043b\u0430\u0441\u0441"]}),Object(F.jsx)("td",{className:"align-middle td-use",children:c}),Object(F.jsx)("td",{className:"align-middle td-use",children:c-s.length}),Object(F.jsx)("td",{className:"align-middle td-use",children:d})]},"".concat(i))})),_e=[1020,700].map((function(e){return"@media (max-width: ".concat(e,"px)")})),De=T.a.div((e={padding:"0 30px"},Object(de.a)(e,_e[1],{padding:"0 0"}),Object(de.a)(e,".table_user",{overflowX:"auto","&::-webkit-scrollbar":{height:"10px",backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:"10px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#17a2b8",borderRadius:"10px"}}),Object(de.a)(e,".log_h2",{}),Object(de.a)(e,"td",{paddingTop:"1px",paddingBottom:"4px"}),Object(de.a)(e,"th, td",{whiteSpace:"nowrap"}),e)),Pe=T.a.form({".addPUPILS":{".input-group":{ul:{overflowY:"scroll",height:"100px"},li:{cursor:"pointer",padding:"5px",span:{fontSize:"11px"}}}}});return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("nav",{id:"navbar-student",className:"navbar navbar-expand-lg navbar-light",children:Object(F.jsxs)("div",{className:"container-fluid d-flex",children:[Object(F.jsx)("div",{className:"collapse d-flex flex-row h3-person",children:Object(F.jsx)("div",{className:"d-flex plus-box",children:Object(F.jsx)("div",{children:Object(F.jsx)("h3",{children:"\u0413\u0440\u0443\u043f\u043f\u044b"})})})}),Object(F.jsx)("div",{className:"collapse d-flex flex-row-reverse",id:"navbarScroll",children:Object(F.jsx)("div",{className:"d-flex plus-box",children:Object(F.jsxs)("div",{className:"nav-item plus",onClick:function(){c(!0)},children:[Object(F.jsx)("i",{className:"bi bi-people",style:{fontSize:"38px",color:"#F56767"}}),Object(F.jsx)("i",{className:"bi bi-plus",style:{fontSize:"30px",color:"#F56767"}})]})})})]})}),Object(F.jsx)(De,{className:"",children:Object(F.jsxs)("div",{children:[Object(F.jsx)("div",{className:"table_user",children:Object(F.jsxs)("table",{className:"table table-striped",children:[Object(F.jsx)("thead",{children:Object(F.jsxs)("tr",{children:[Object(F.jsx)("th",{className:"th-h",scope:"col"}),Object(F.jsx)("th",{className:"th-h align-middle",scope:"col",children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(F.jsx)("th",{className:"th-h align-middle",scope:"col",children:"\u0423\u0447\u0438\u0442\u0435\u043b\u044c"}),Object(F.jsx)("th",{className:"th-h align-middle",scope:"col",children:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c"}),Object(F.jsx)("th",{className:"th-h align-middle",scope:"col",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0435\u0441\u0442"}),Object(F.jsx)("th",{className:"th-h align-middle",scope:"col",children:"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043c\u0435\u0441\u0442"}),Object(F.jsx)("th",{className:"th-h align-middle",scope:"col",children:"\u0412\u0440\u0435\u043c\u044f \u0437\u0430\u043d\u044f\u0442\u0438\u0439"})]})}),Object(F.jsx)("tbody",{children:we})]})}),Object(F.jsx)(fe,{getItem:V,count:m,offset:j,setOffset:p})]})}),Object(F.jsx)(Oe.a,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443",visible:a,onCancel:l,width:1e3,footer:[Object(F.jsx)(ge.a,{onClick:l,children:"\u041e\u0442\u043c\u0435\u043d\u0430"},"onCancel1"),Object(F.jsx)(ge.a,{onClick:function(){var e=xe.group_name,t=xe.places,n=xe.tutor,a=xe.level,o=[];X.forEach((function(e){o.push(e[1])})),s(!0),ut({method:"POST",url:"".concat(S,"/CRM/Groups"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:{group_name:e,tutor:n||void 0,level:+a,places:+t,pupils:o}}).then((function(e){s(!1),R("\u0413\u0440\u0443\u043f\u043f\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0430","\u0422\u0435\u043f\u0435\u0440\u044c \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),c(!1),V(),ne(""),J([]),re(""),je(""),me("")})).catch((function(e){if(s(!1),e.response){G(e.response.status);var n=e.response.status;400==n?+t<o.length?P("\u041e\u0439...","\u041c\u0435\u0441\u0442 \u0434\u043b\u044f \u0443\u0447\u0435\u043d\u0438\u043a\u043e\u0432 \u043d\u0435 \u0445\u0432\u0430\u0442\u0430\u0435\u0442"):P("\u041e\u0439...","\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u044f \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e"):401==n?P("\u041e\u0439...","\u0413\u0434\u0435 \u0442\u043e\u043a\u0435\u043d ?"):500==n&&P("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043f\u043e\u043b\u043e\u043c\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430","\u0421\u043e\u043e\u0431\u0449\u0438\u0442\u0435 \u043e\u0431 \u043e\u0448\u0438\u0431\u043a\u0435 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0443 \u0441\u0435\u0440\u0432\u0438\u0441\u0430")}}))},loading:i,type:"primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},"onOk1")],children:Object(F.jsx)(Pe,{children:Object(F.jsxs)("div",{className:"modal-body",children:[Object(F.jsxs)("div",{className:"row mb-3",children:[Object(F.jsx)("label",{htmlFor:"inputName",className:"fs-5 col-sm-4 col-form-label",children:"\u0418\u043c\u044f \u0433\u0440\u0443\u043f\u043f\u044b"}),Object(F.jsx)("div",{className:"col-sm-8",children:Object(F.jsx)("input",{defaultValue:xe.group_name,autoComplete:"off",onChange:function(e){xe.group_name=e.target.value},required:!0,type:"name",name:"group_name",className:"form-control",id:"group_name"})})]}),Object(F.jsxs)("div",{className:"row mb-3",children:[Object(F.jsx)("label",{htmlFor:"inputMidname",className:"fs-5 col-sm-4 col-form-label",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0435\u0441\u0442"}),Object(F.jsx)("div",{className:"col-sm-8",children:Object(F.jsx)("input",{defaultValue:xe.places,autoComplete:"off",onChange:function(e){xe.places=e.target.value},required:!0,type:"number",name:"places",className:"form-control",id:"places"})})]}),Object(F.jsxs)("div",{className:"row mb-3",children:[Object(F.jsx)("label",{htmlFor:"inputSirname",className:"fs-5 col-sm-4 col-form-label",children:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0438"}),Object(F.jsx)("div",{className:"col-sm-8 input-group",children:Object(F.jsxs)("select",{defaultValue:xe.level,onChange:function(e){xe.level=e.target.value},required:!0,className:"form-control",id:"inputGroupSelect01",children:[Object(F.jsx)("option",{defaultValue:!0}),Object(F.jsx)("option",{value:"1",children:"1 \u043a\u043b\u0430\u0441\u0441"}),Object(F.jsx)("option",{value:"2",children:"2 \u043a\u043b\u0430\u0441\u0441"}),Object(F.jsx)("option",{value:"3",children:"3 \u043a\u043b\u0430\u0441\u0441"}),Object(F.jsx)("option",{value:"4",children:"4 \u043a\u043b\u0430\u0441\u0441"})]})})]}),Object(F.jsxs)("div",{className:"row mb-3",children:[Object(F.jsx)("label",{className:"fs-5 col-sm-4 col-form-label",children:"\u0423\u0447\u0438\u0442\u0435\u043b\u044c"}),Object(F.jsx)("div",{className:"col-sm-8 input-group",children:Object(F.jsxs)("select",{defaultValue:xe.tutor,onChange:function(e){xe.tutor=e.target.value},className:"form-control",children:[Object(F.jsx)("option",{defaultValue:!0}),K]})})]}),Object(F.jsxs)("div",{className:"mb-3",children:[Object(F.jsx)("label",{htmlFor:"inputSirname",className:"fs-5 col-sm-4 col-form-label",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0435\u043d\u0438\u043a\u043e\u0432"}),Object(F.jsxs)("div",{className:"row addPUPILS",children:[Object(F.jsxs)("div",{className:"col-sm-6 input-group",children:[Object(F.jsx)("input",{id:"fort",onChange:function(e){var t=RegExp(e.target.value,"gi"),n=y.filter((function(e){return t.test(e[0])}));Se(e.target.value),w(n),ve()},defaultValue:Ne,autoComplete:"off",type:"search",className:"form-control",name:"q",placeholder:"\u041d\u0430\u0439\u0442\u0438..."}),Object(F.jsx)("ul",{className:"col-12 list-group list-group-flush",children:Ie})]}),Object(F.jsx)("div",{className:"col-sm-6 boxPUPILS",children:Ce})]})]})]})})})]})},pt=T.a.div({padding:"0",marginBottom:"15px",".boxS":{overflow:"auto",maxHeight:"200px"},".dataNumber":{margin:"0 3px 0 0",fontSize:"15px",fontWeight:"600",width:"48px"}}),bt=function(e){var t=e.global_schedule;if(!t[0])return Object(F.jsx)(pt,{className:"col-12",children:Object(F.jsx)("h5",{children:"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u043d\u0435\u0442..."})});var n=t.map((function(e){var t=be()(e.date,"DD.MM.YYYY").format("DD.MM");return Object(F.jsx)("span",{className:"badge bg-light text-dark dataNumber",children:t},e.date)}));return Object(F.jsxs)(pt,{className:"col-12",children:[Object(F.jsxs)("h5",{children:[t[0].duration[0]," \u0434\u043e ",t[0].duration[1]]}),Object(F.jsx)("div",{className:"boxS",children:n})]})},ht=n(44),mt=function(e){var t=e.updateGroup,n=e.groupID,a=Object(x.useState)(!1),c=Object(g.a)(a,2),o=c[0],r=c[1],i=Object(x.useState)(!1),s=Object(g.a)(i,2),l=s[0],d=s[1],u=function(){r(!1)},j={startDate:"",endDate:"",duration_Start:"",duration_End:"",weekDay:[]},p={one:[],two:[],three:[],four:[],five:[],six:[],zero:[]},b=[],h=function e(){var a=j.startDate,c=j.duration_Start,o=j.duration_End,i=j.endDate,s=be()("2000-01-01, ".concat(o)).diff("2000-01-01, ".concat(c),"hours"),l=be()(a).day(),u=be()(i).format("DD.MM.YYYY"),h=be()(a).format("DD.MM.YYYY"),m=be()(h,"DD.MM.YYYY").day(),x=1,f=function(){j.weekDay.forEach((function(e){if(e==m)for(var t={date:h,duration:[c,o],status:"",tutor:"",paid:!1,title:""},n=0;n<s;n++)b.push(t)}))};f();do{h=be()(j.startDate).day(l+x).format("DD.MM.YYYY"),m=be()(h,"DD.MM.YYYY").day(),f(),x++}while(h!=u);ht({method:"post",url:"".concat(S,"/CRM/Groups/").concat(n,"/Schedule"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:b}).then((function(e){for(var n in document.querySelectorAll("input").forEach((function(e){e.value=""})),d(!1),r(!1),R("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u043e",""),p)p[n]=[];t()})).catch((function(t){te(e,t)})),console.log(b)},m=T.a.div({".form-check":{marginRight:"12px",paddingLeft:"100px"}});return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("i",{onClick:function(){r(!0)},className:"bi bi-calendar2-plus",style:{fontSize:"26px",color:"#17a2b8",cursor:"pointer"}}),Object(F.jsx)(Oe.a,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435",visible:o,onCancel:u,width:1e3,footer:[Object(F.jsx)(ge.a,{onClick:u,children:"\u041e\u0442\u043c\u0435\u043d\u0430"},"onCancel1"),Object(F.jsx)(ge.a,{onClick:function(){for(var e in d(!0),p)p[e][0]&&j.weekDay.push(p[e][1]);h()},loading:l,type:"primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},"onOk1")],children:Object(F.jsx)(m,{children:Object(F.jsxs)("form",{className:"row g-3",children:[Object(F.jsxs)("div",{className:"col-md-6",children:[Object(F.jsx)("label",{className:"form-label",children:"\u041f\u0435\u0440\u0438\u043e\u0434:"}),Object(F.jsxs)("div",{className:"row periud",children:[Object(F.jsx)("input",{onChange:function(e){j.startDate=e.target.value},type:"date",className:"form-control col-5"}),Object(F.jsx)("div",{className:"input-group-text",children:"\u0434\u043e"}),Object(F.jsx)("input",{onChange:function(e){j.endDate=e.target.value},type:"date",className:"form-control col-5"})]})]}),Object(F.jsxs)("div",{className:"col-md-6",children:[Object(F.jsx)("label",{className:"form-label",children:"\u0412\u0440\u0435\u043c\u044f \u0437\u0430\u043d\u044f\u0442\u0438\u044f:"}),Object(F.jsxs)("div",{className:"row periud",children:[Object(F.jsx)("input",{onChange:function(e){j.duration_Start=e.target.value},type:"time",className:"form-control col-5"}),Object(F.jsx)("div",{className:"input-group-text",children:"\u0434\u043e"}),Object(F.jsx)("input",{onChange:function(e){j.duration_End=e.target.value},type:"time",className:"form-control col-5"})]})]}),Object(F.jsxs)("div",{className:"col-12",children:[Object(F.jsx)("label",{className:"form-label",children:"\u0414\u043d\u0438 \u043d\u0435\u0434\u0435\u043b\u0438:"}),Object(F.jsxs)("div",{className:"row col-12",children:[Object(F.jsxs)("div",{className:"form-check",children:[Object(F.jsx)("input",{onChange:function(e){p.one=[e.target.checked,e.target.value]},className:"form-check-input",value:"1",type:"checkbox"}),Object(F.jsx)("label",{className:"form-check-label",children:"\u041f\u043d"})]}),Object(F.jsxs)("div",{className:"form-check",children:[Object(F.jsx)("input",{onChange:function(e){p.two=[e.target.checked,e.target.value]},className:"form-check-input",value:"2",type:"checkbox"}),Object(F.jsx)("label",{className:"form-check-label",children:"\u0412\u0442"})]}),Object(F.jsxs)("div",{className:"form-check",children:[Object(F.jsx)("input",{onChange:function(e){p.three=[e.target.checked,e.target.value]},className:"form-check-input",value:"3",type:"checkbox"}),Object(F.jsx)("label",{className:"form-check-label",children:"\u0421\u0440"})]}),Object(F.jsxs)("div",{className:"form-check",children:[Object(F.jsx)("input",{onChange:function(e){p.four=[e.target.checked,e.target.value]},className:"form-check-input",value:"4",type:"checkbox"}),Object(F.jsx)("label",{className:"form-check-label",children:"\u0427\u0442"})]}),Object(F.jsxs)("div",{className:"form-check",children:[Object(F.jsx)("input",{onChange:function(e){p.five=[e.target.checked,e.target.value]},className:"form-check-input",value:"5",type:"checkbox"}),Object(F.jsx)("label",{className:"form-check-label",children:"\u041f\u0442"})]}),Object(F.jsxs)("div",{className:"form-check",children:[Object(F.jsx)("input",{onChange:function(e){p.six=[e.target.checked,e.target.value]},className:"form-check-input",value:"6",type:"checkbox"}),Object(F.jsx)("label",{className:"form-check-label",children:"\u0421\u0431"})]}),Object(F.jsxs)("div",{className:"form-check",children:[Object(F.jsx)("input",{onChange:function(e){p.zero=[e.target.checked,e.target.value]},className:"form-check-input",value:"0",type:"checkbox"}),Object(F.jsx)("label",{className:"form-check-label",children:"\u0412\u0441"})]})]})]})]})})})]})},xt=n(44),ft=function(e){var t=e.PupilsGroup,n=e.http,a=e.title,c=e.pageId,o=e.update,r=e.schedule,i=Object(x.useState)(!1),s=Object(g.a)(i,2),l=s[0],d=s[1],u=function(){d(!1)},j=Object(x.useState)([]),p=Object(g.a)(j,2),b=p[0],h=p[1],m=function e(){xt({method:"post",url:"".concat(S).concat(n,"/find?limit=150&offset=0"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){var n=e.data;h(Object(le.a)(n));var a=[],c=0;n.forEach((function(e,n){e._id!==t[c]._id&&a.push(e),t.length-1>c&&c++}))})).catch((function(t){te(e,t)}))},f=function e(t){var n=[];r.forEach((function(e){var t=be()(e.date,"DD.MM.YYYY").format("YYYY-MM-DD");be()().diff(t,"day")<=0&&n.push(e)})),xt({method:"put",url:"".concat(S,"/CRM/Groups/").concat(c,"/Pupils/").concat(t,"/Schedule"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:n}).then((function(e){o(),z()})).catch((function(t){te(e,t)}))},O=function e(t,n){xt({method:"post",url:"".concat(S,"/CRM/Groups/").concat(c,"/Pupils"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:{ids:t}}).then((function(){f(n)})).catch((function(t){te(e,t)}))};Object(x.useEffect)((function(){m()}),[]);var v=b.map((function(e,t){var n=T.a.li({span:{cursor:"pointer"}});return Object(F.jsx)(n,{onClick:function(){M("\u0423\u0447\u0435\u043d\u0438\u043a \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f","\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435"),O([e._id],e._id)},className:"list-group-item",children:Object(F.jsxs)("span",{className:"badge bg-warning text-dark",children:[e.surname," ",e.name]})},e._id)})),y=T.a.span({cursor:"pointer"});return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(y,{className:"btn ",onClick:function(){d(!0)},children:Object(F.jsx)("i",{className:"bi bi-person-plus-fill",style:{color:"#ffc107",fontSize:"24px"}})}),Object(F.jsx)(Oe.a,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c ".concat(a),visible:l,onCancel:u,width:600,footer:[Object(F.jsx)(ge.a,{onClick:u,children:"\u041e\u0442\u043c\u0435\u043d\u0430"},"onCancel1")],children:Object(F.jsx)("div",{className:"row addPUPILS",children:Object(F.jsxs)("div",{className:"col-12 input-group",children:[Object(F.jsx)("input",{id:"fort",onChange:function(){},autoComplete:"off",type:"search",className:"form-control",name:"q",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435..."}),Object(F.jsx)("ul",{className:"col-12 list-group list-group-flush",children:v})]})})})]})},Ot=function(e){var t=e.Data_ALL,a=e.updetePage,c={},o=n(44),r=Object(x.useState)(""),i=Object(g.a)(r,2),s=i[0],l=i[1],d=t.group_name,u=t.tutor,j=t.level,p=t.places,b=t.pupils,h=t._id,m=b||"",f="\u0423\u0447\u0438\u0442\u0435\u043b\u044c \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d...";if(u){var O=u.surname,v=u.name,y=u.midname;f="".concat(O," ").concat(v," ").concat(y)}var k=Object(x.useState)([{name:"\u0423\u0447\u0438\u0442\u0435\u043b\u0435\u0439 \u043d\u0435 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d\u043d\u043e...",surname:"",midname:"",_id:"546456"}]),N=Object(g.a)(k,2),I=N[0],C=N[1],w=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;o({method:"get",url:"".concat(S,"/AdminPanel/CRMAccounts?limit=20&offset=").concat(t,"&accountType=teacher"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){var t=e.data;console.log(t),C(t)})).catch((function(t){t.response&&(G(t.response.status),401==t.response.status&&("TOKEN_EXPIRED"==t.response.data.message?(ee(t.response.data.token),e()):(localStorage.removeItem("tokenID"),window.location.replace("/"))))}))},_=function(){o({method:"get",url:"".concat(S,"/CRM/Groups/").concat(h),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){a(e.data),console.log(c),z(),B.fire({icon:"success",title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b"})})).catch((function(e){e.response&&G(e.response.status)}))},D=I.map((function(e,t){var n=e.name,a=e.surname,c=e.midname;return Object(F.jsxs)("option",{value:e._id,children:[a," ",n," ",c]},e._id)}));Object(x.useEffect)((function(){w()}),[]);var P=function(){M("\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f","\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435"),o({method:"patch",url:"".concat(S,"/CRM/Groups/").concat(h),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:c}).then((function(){_()})).catch((function(e){e.response&&G(e.response.status)}))},E=(T.a.ul({width:"318px",padding:"10px",background:"rgba(0, 0, 0, 0.5)",".save":{marginTop:"16px",cursor:"pointer"},li:{border:"none"}}),T.a.span({fontSize:"13px"})),R=Object(F.jsxs)(q.a,{children:[Object(F.jsx)(q.a.Item,{children:Object(F.jsx)("input",{placeholder:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",onChange:function(e){c={group_name:"".concat(e.target.value)}},type:"name",className:"text-dark form-control col-12"})}),Object(F.jsx)(q.a.Item,{children:Object(F.jsx)(E,{onClick:function(){P(),l("")},className:"badge bg-warning text-dark save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),L=Object(F.jsx)(q.a,{children:Object(F.jsx)(q.a.Item,{children:Object(F.jsx)("div",{className:"input-group",children:Object(F.jsxs)("select",{onChange:function(e){var t;t=e.target.value,M("\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f","\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435"),o({method:"post",url:"".concat(S,"/CRM/Groups/").concat(h,"/Teacher?tutor_id=").concat(t),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(){_()})).catch((function(e){e.response&&G(e.response.status)}))},className:"form-control",children:[Object(F.jsx)("option",{}),D]})})})}),A=Object(F.jsxs)(q.a,{children:[Object(F.jsx)(q.a.Item,{children:Object(F.jsx)("div",{className:"input-group",children:Object(F.jsxs)("select",{onChange:function(e){c={level:+e.target.value}},className:"form-control",children:[Object(F.jsx)("option",{}),Object(F.jsx)("option",{value:"1",children:"1 \u043a\u043b\u0430\u0441\u0441"}),Object(F.jsx)("option",{value:"2",children:"2 \u043a\u043b\u0430\u0441\u0441"}),Object(F.jsx)("option",{value:"3",children:"3 \u043a\u043b\u0430\u0441\u0441"}),Object(F.jsx)("option",{value:"4",children:"4 \u043a\u043b\u0430\u0441\u0441"})]})})}),Object(F.jsx)(q.a.Item,{children:Object(F.jsx)(E,{onClick:function(){P(),l("")},className:"badge bg-warning text-dark save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),Y=Object(F.jsxs)(q.a,{children:[Object(F.jsx)(q.a.Item,{children:Object(F.jsx)("input",{placeholder:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043a\u043e\u043b\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0435\u0441\u0442",onChange:function(e){c={places:+e.target.value}},type:"number",className:"text-dark form-control col-12"})}),Object(F.jsx)(q.a.Item,{children:Object(F.jsx)(E,{onClick:function(){P(),l("")},className:"badge bg-warning text-dark save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),U=function(e,t){return Object(F.jsx)(He.a,{overlay:e,visible:function(){return s===t},trigger:["click"],children:Object(F.jsx)("i",{className:"bi bi-pencil",onClick:function(){l(s===t?"":t)},style:{fontSize:"20px",color:"#17a2b8",cursor:"pointer"}})})};return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)("li",{className:"list-group-item",children:["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435: ",Object(F.jsx)("span",{className:"badge bg-info text-light",children:d}),Object(F.jsx)("div",{className:"btn-group",children:U(R,"group_name")})]}),Object(F.jsxs)("li",{className:"list-group-item",children:["\u0423\u0447\u0438\u0442\u0435\u043b\u044c: ",Object(F.jsx)("span",{className:"badge bg-warning text-dark",children:f}),Object(F.jsx)("div",{className:"btn-group",children:U(L,"tutor")})]}),Object(F.jsxs)("li",{className:"list-group-item",children:["\u041a\u043b\u0430\u0441\u0441: ",Object(F.jsx)("span",{className:"badge bg-success",children:j}),Object(F.jsx)("div",{className:"btn-group",children:U(A,"level")})]}),Object(F.jsxs)("li",{className:"list-group-item",children:["M\u0435\u0441\u0442 \u0432 \u0433\u0440\u0443\u043f\u043f\u0435: ",Object(F.jsx)("span",{className:"badge bg-info text-dark",children:p}),Object(F.jsx)("div",{className:"btn-group",children:U(Y,"places")})]}),Object(F.jsxs)("li",{className:"list-group-item",children:["\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043c\u0435\u0441\u0442: ",Object(F.jsx)("span",{className:"badge bg-light text-dark",children:p-m.length})]})]})},gt=(n(564),function(){var e,t=Object(V.f)().id,a=Object(x.useState)({pupils:[{_id:"564564",localSchedule:{}}],group_name:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",tutor:"",level:"",places:"",global_schedule:[{duration:["--:--","--:--"]}],_id:"6456"}),c=Object(g.a)(a,2),o=c[0],r=c[1],i=o.group_name,s=o.pupils,l=o.global_schedule,d=o._id,u=[];s&&s.forEach((function(e){e.paymentHistory&&e.paymentHistory.forEach((function(e){e.group_id==d&&u.push(e)}))}));var j=n(44),p=function e(){j({method:"get",url:"".concat(S,"/CRM/Groups/").concat(t),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){r(e.data)})).catch((function(t){te(e,t)}))};Object(x.useEffect)((function(){p()}),[]);var b=[767].map((function(e){return"@media (max-width: ".concat(e,"px)")})),h=T.a.div({marginTop:"0px",margin:"0 auto",".pad":Object(de.a)({padding:"0px",paddingRight:"10px"},b[0],{paddingRight:"0px"}),".infoLog":(e={marginBottom:"10px",padding:"0"},Object(de.a)(e,b[0],{paddingBottom:"10px"}),Object(de.a)(e,".calendar",{margin:"9px 0",marginRight:"10px",fontSize:"15px"}),e),".group-name":Object(de.a)({padding:"0",borderBottom:"1px solid #0dcaf0"},b[0],{borderRight:"none"}),".time":{margin:"0",padding:"0",h5:{fontSize:"1.25rem"}},".ulBox":{borderRadius:"15px",padding:"0px"},".editing":{background:"#fff",borderRadius:"10px 10px 0 0",i:{marginLeft:"95%",cursor:"pointer"}},li:{backgroundColor:"none",span:{fontSize:"16px",margin:"0 5px 5px 0"}}}),m=T.a.div({background:"#fff",margin:"10px 0",padding:"10px",borderRadius:"15px","& > h3":{fontSize:"22px"}}),f="";s&&(f=s.map((function(e){return Object(F.jsx)("span",{className:"badge bg-info text-dark",children:"".concat(e.name," ").concat(e.surname)},e._id)})));var O="";s&&(O=s.map((function(e){return Object(F.jsx)(Qe,{itemG:e,dataGroup:t,getGroup_Id:p,setData:r,surname:e.surname,name:e.name,type:"group"},e._id)})));var v=Object(F.jsx)(ft,{PupilsGroup:s,schedule:l,update:p,pageId:t,http:"/CRM/Pupils",title:"\u0443\u0447\u0435\u043d\u0438\u043a\u0430"});return Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)(h,{className:"container row col-12",children:[Object(F.jsx)("div",{className:"col-12 col-md-6 pad",children:Object(F.jsxs)("div",{className:"infoLog align-self-start col-md-12 col-12",children:[Object(F.jsx)("div",{className:"group-name col-12 col-lg-12",children:Object(F.jsx)("h3",{children:i})}),Object(F.jsxs)("div",{className:"time col-md-12 row",children:[Object(F.jsx)("h6",{className:"calendar badge bg-info text-dark",children:"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435: "}),Object(F.jsx)(mt,{updateGroup:p,groupID:t}),Object(F.jsx)(bt,{global_schedule:l||[]})]})]})}),Object(F.jsx)("div",{className:"col-md-6 ulBox",children:Object(F.jsxs)("ul",{className:"list-group list-group-flush",children:[Object(F.jsx)(Ot,{Data_ALL:o,updetePage:r}),Object(F.jsxs)("li",{className:"list-group-item",children:["\u0423\u0447\u0435\u043d\u0438\u043a\u0438: ",f," ",v]})]})}),Object(F.jsxs)(m,{className:"container col-12",children:[Object(F.jsx)("h3",{className:"badge bg-warning",children:"\u0423\u0447\u0435\u043d\u0438\u043a\u0438:"}),O]})]})})}),vt=n(148),yt=T.a.div(Xe||(Xe=Object(N.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: ",";\n  .lds-ring {\n    display: inline-block;\n    position: relative;\n    width: 80px;\n    height: 80px;\n  }\n  .lds-ring div {\n    box-sizing: border-box;\n    display: block;\n    position: absolute;\n    width: 64px;\n    height: 64px;\n    margin: 8px;\n    border: 8px solid #001529;\n    border-radius: 50%;\n    animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n    border-color: #001529 transparent transparent transparent;\n  }\n  .lds-ring div:nth-of-type(1) {\n    animation-delay: -0.45s;\n  }\n  .lds-ring div:nth-of-type(2) {\n    animation-delay: -0.3s;\n  }\n  .lds-ring div:nth-of-type(3) {\n    animation-delay: -0.15s;\n  }\n  @keyframes lds-ring {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n\n"])),(function(e){return e.precentage?"100%":"100vh"})),kt=function(e){var t=e.precentage;return Object(F.jsx)(yt,{precentage:t,children:Object(F.jsxs)("div",{className:"lds-ring",children:[Object(F.jsx)("div",{}),Object(F.jsx)("div",{}),Object(F.jsx)("div",{}),Object(F.jsx)("div",{})]})})},Nt=n(65),St=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:24,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return e+n.length>a?Object(F.jsx)(Nt.a,{placement:"leftTop",title:"".concat(o).concat(""!==o?" ":"").concat(t),children:Object(F.jsxs)(Be,{width:c,children:[n," ",t]})}):Object(F.jsxs)(Be,{children:[n," ",t]})},It=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:24,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return e+n.length>a?Object(F.jsx)(Nt.a,{placement:"leftTop",title:"".concat(o).concat(""!==o?" ":"").concat(t.midname," ").concat(t.name," ").concat(t.surname),children:Object(F.jsxs)(Be,{width:c,children:[t.midname," ",t.name," ",t.surname]})}):Object(F.jsxs)(Be,{children:[t.midname," ",t.name," ",t.surname]})},Ct=function(e){e.Url;var t=e.card,n=e.pupils,a=(e.pageSize,n.pupilsList),c=Object(x.useState)(!1),o=Object(g.a)(c,1)[0];return Object(F.jsx)(F.Fragment,{children:o?Object(F.jsx)(kt,{precentage:!0}):a.filter((function(e){return e.salesFunnelStep===t._id})).map((function(e,n){if(t._id===e.salesFunnelStep)return Object(F.jsx)(vt.b,{draggableId:"".concat(e._id),index:n,children:function(n){return Object(F.jsx)(Me,Object(se.a)(Object(se.a)(Object(se.a)({background:t.background},n.draggableProps),n.dragHandleProps),{},{ref:n.innerRef,children:Object(F.jsxs)("div",{className:"funnelStepStudent__first--info",children:[Object(F.jsx)("div",{children:Object(F.jsx)(U.c,{to:"/student/".concat(e._id),children:It("".concat(e.midname," ").concat(e.name," ").concat(e.surname).length,e,"",25,"230px","\u0424\u0418\u041e:")})}),Object(F.jsxs)("div",{children:[Object(F.jsx)(Ce,{children:"\u0422\u0435\u043b.\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044f:"})," ",e.parentPhone]}),Object(F.jsxs)("div",{children:[Object(F.jsx)(Ce,{children:"\u041c\u0438\u043d.\u0410\u0431\u043e\u043d\u0435\u043c\u0435\u043d\u0442:"})," ",e.minPaidSubscruption||0,"\u20bd"]})]})}))}},e._id)}))})},wt=function(){var e=S,t=Object(x.useState)(!0),n=Object(g.a)(t,2),a=n[0],c=n[1],o=Object(x.useState)([]),r=Object(g.a)(o,2),i=r[0],s=r[1],l=Object(x.useState)([]),d=Object(g.a)(l,2),u=d[0],j=d[1],p=Object(x.useCallback)(Object(k.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Fe(e);case 2:n=t.sent,s((function(e){return n})),j((function(e){return n.map((function(e){return e.pupils})).flat(2)})),c((function(e){return!1}));case 6:case"end":return t.stop()}}),t)}))),[e]);Object(x.useEffect)((function(){p()}),[e,p]);var b=function(){var t=Object(k.a)(y.a.mark((function t(n){var a,c,o,r,i;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.destination){t.next=2;break}return t.abrupt("return",j((function(e){return e})));case 2:if(a=u.filter((function(e){return e.salesFunnelStep===n.source.droppableId})),c=u.filter((function(e){return e.salesFunnelStep===n.destination.droppableId})),o=a.splice(n.source.index,1),r=Object(g.a)(o,1),i=r[0],n.source.droppableId!==n.destination.droppableId){t.next=8;break}return a.splice(n.destination.index,0,i),t.abrupt("return",j((function(e){return Array.from(new Set([].concat(Object(le.a)(e),Object(le.a)(a),Object(le.a)(c))))})));case 8:return i.salesFunnelStep=n.destination.droppableId,t.next=11,Te(e,i._id,i);case 11:return c.splice(n.destination.index,0,i),t.abrupt("return",j((function(e){return Array.from(new Set([].concat(Object(le.a)(e),Object(le.a)(a),Object(le.a)(c))))})));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(F.jsx)(we,{children:a?Object(F.jsx)(kt,{}):Object(F.jsx)(_e,{jstctn:i.length<6,children:Object(F.jsx)(vt.a,{onDragEnd:b,children:i.map((function(t){return Object(F.jsxs)(Pe,{className:"card",children:[Object(F.jsxs)(Ee,{background:t.background,children:[St(t.name.length,t.name,"",30,"220px"),1===t.order?Object(F.jsx)(Le,{loader:{loaded:a,setLoaded:c},status:1,funnel:i,Url:e,pupils:{pupilsList:u,setPupilsList:j}}):""]}),Object(F.jsxs)(Re,{background:t.background,children:[t.minPaidSubscriptionsAmount||0,"\u0440\u0443\u0431."]}),Object(F.jsx)(vt.c,{droppableId:"".concat(t._id),children:function(n){return Object(F.jsxs)("div",Object(se.a)(Object(se.a)({className:"droppable-container"},n.droppableProps),{},{ref:n.innerRef,children:[Object(F.jsx)(Ct,{card:t,pupils:{pupilsList:u,setPupilsList:j},Url:e}),n.placeholder]}))}})]},t._id)}))})})})},_t=n(574),Dt=T.a.div({".ButtonUpload":{padding:0,background:"rgba(0, 0, 0, 0)",border:"none",color:"#a6adb4","&:hover":{color:"#fff"}},".ant-upload-list":{display:"none"}}),Pt=function(){var e={name:"file",action:"".concat(S,"/CRM/Pupils/uploadFile"),accept:".csv,.xlsx",headers:{Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},onChange:function(e){"done"===e.file.status?B.fire({icon:"success",title:"\u0424\u0430\u0438\u043b ".concat(e.file.name,", \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d")}):"error"===e.file.status&&(403===e.file.response.statusCode?G(403):B.fire({icon:"error",title:"\u0412 ".concat(e.file.name,", \u043e\u0448\u0438\u0431\u043a\u0438 \u043d\u0430 \u0441\u0442\u0440\u043e\u043a\u0430\u0445: ").concat(e.file.response.message.join(", "))}))}};return Object(F.jsx)(Dt,{children:Object(F.jsx)(_t.a,Object(se.a)(Object(se.a)({},e),{},{children:Object(F.jsx)(ge.a,{className:"ButtonUpload",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0444\u0430\u0439\u043b\u044b c \u0443\u0447\u0435\u043d\u0438\u043a\u0430\u043c\u0438"})}))})},Et=n(583),Rt=n(149),Bt=n(200),Mt=T.a.div({".log_h2":{},td:{paddingTop:"1px",paddingBottom:"4px"},"th, td":{padding:"16px 11px",whiteSpace:"nowrap"}}),zt=function(e){var t=e.dataSource,n=void 0===t?[]:t,a=e.columns,c=void 0===a?[]:a,o=e.setParamFilrers,r=e.paramFilrers,i=e.update,s=void 0===i?function(){}:i;return Object(F.jsx)(Mt,{children:Object(F.jsx)(je.a,{pagination:!1,dataSource:n,columns:c,scroll:{x:0},onChange:function(e,t){var n=Object(se.a)({},r);for(var a in t)t[a]?n[a]=t[a]:"GROUP_NAME"!=a&&(n[a]=[]);s(0,n),o(n)}})})},Gt=n(585),Tt=function(e,t,n,a){return{title:function(){return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(Gt.a,{onClick:function(){e[1]?t(["",""]):t([Object(F.jsx)("span",{style:{paddingLeft:"7px"},children:n}),a])}}),e[0]]})},dataIndex:"".concat(e[1]),key:"".concat(e[1])}},Ft=function(){var e=Object(x.useState)(0),t=Object(g.a)(e,2),a=t[0],c=t[1],o=Object(x.useState)(1),r=Object(g.a)(o,2),i=r[0],s=r[1],l=Object(x.useState)([]),d=Object(g.a)(l,2),u=d[0],j=d[1],p=Object(x.useState)(!1),b=Object(g.a)(p,2),h=b[0],m=b[1],f=Object(x.useState)({group_name:!1}),O=Object(g.a)(f,2),v=O[0],y=O[1],k=Object(x.useState)([Object(F.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0413\u0440\u0443\u043f\u043f\u0430"}),"group_name"]),N=Object(g.a)(k,2),I=N[0],C=N[1],w=Object(x.useState)([Object(F.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0433\u0440\u0443\u043f\u043f\u044b"}),"level"]),_=Object(g.a)(w,2),D=_[0],P=_[1],E=Object(x.useState)([Object(F.jsx)("span",{style:{paddingLeft:"7px"},children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0435\u0441\u0442"}),"places"]),R=Object(g.a)(E,2),B=R[0],M=R[1],z=Object(x.useState)([Object(F.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043c\u0435\u0441\u0442"}),"occupied"]),G=Object(g.a)(z,2),L=G[0],A=G[1],Y=Object(x.useState)([Object(F.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0427\u0438\u0441\u043b\u043e \u0443\u0447\u0435\u043d\u0438\u043a\u043e\u0432"}),"NUMBER_PUPILS"]),V=Object(g.a)(Y,2),H=V[0],W=V[1],$=Object(x.useState)([Object(F.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0423\u0447\u0438\u0442\u0435\u043b\u044c"}),"tutor"]),X=Object(g.a)($,2),J=X[0],Q=X[1],Z=n(44),ee=Object(x.useState)([]),ne=Object(g.a)(ee,2),ce=ne[0],oe=ne[1],re=function e(){Z({method:"get",url:"".concat(S,"/AdminPanel/CRMAccounts?limit=100&offset=0&accountType=teacher"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){var t=e.data;oe(t)})).catch((function(t){te(e,t)}))},ie=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m(!0);var a={};for(var c in n)"occupied"!=c&void 0!=n[c][0]?(console.log(n[c],1),a["".concat(c,"s")]=n[c]):n[c].length&&(console.log(n[c],2),a[c]=n[c][0]);Z({method:"post",url:"".concat(S,"/CRM/Groups/find?limit=").concat(xe,"&offset=").concat(t),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:{filters:a}}).then((function(e){var t=e.data,n=e.headers;j(t),y({group_name:!1}),m(!1),s(n.count)})).catch((function(t){te(e,t,(function(){m(!1)}))}))};Object(x.useEffect)((function(){re(),ie()}),[]);var de=Object(x.useState)({group_name:[],level:[],tutor:[],occupied:[]}),ue=Object(g.a)(de,2),je=ue[0],pe=ue[1],be={group_name:{}},he=function(e){je[e].forEach((function(t){be[e][t]=!0}))};for(var me in be)he(me);var Oe,ve=Object(x.useState)({group_name:[]}),ye=Object(g.a)(ve,2),ke=ye[0],Ne=ye[1],Se=function(e,t,n){if(e[0]){var a=Object(se.a)({},ke);a[n].push({text:e[0],value:e[0]}),Ne(a),e[0]=""}},Ie=u.map((function(e){var t=e.group_name,n=e.level,a=e.places,c=e.pupils,o=e.tutor,r=e._id;return{key:r,group_name:[t,r],level:n,places:a,NUMBER_PUPILS:c?c.length:"",tutor:o?"".concat(o.surname," ").concat(o.name," ").concat(o.midname):"-",occupied:c?a-c.length:""}})),Ce=T.a.div({marginTop:"10px",svg:{marginBottom:"3px"}}),we=ce.map((function(e){return{text:"".concat(e.surname," ").concat(e.name),value:e._id}})),_e=[Object(se.a)(Object(se.a)({},Tt(I,C,"\u0413\u0440\u0443\u043f\u043f\u0430","group_name")),{},{render:function(e){if(e)return Object(F.jsx)(U.b,{to:"/group/".concat(e[1]),children:e[0]})}},(Oe="group_name",{filterDropdown:function(e){var t=e.setSelectedKeys,n=e.selectedKeys;return e.confirm,e.clearFilters,Object(F.jsxs)("div",{style:{padding:8},children:[Object(F.jsx)(ae.a,{placeholder:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440 ".concat(Oe),value:n[0],onChange:function(e){return t(e.target.value?[e.target.value]:[])},onPressEnter:function(){return Se(n,0,Oe)},style:{marginBottom:8,display:"block"}}),Object(F.jsxs)(Et.b,{children:[Object(F.jsx)(ge.a,{type:"primary",onClick:function(){Se(n,0,Oe)},size:"small",style:{width:140},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0444\u0438\u043b\u044c\u0442\u0440"}),Object(F.jsx)(ge.a,{type:"link",size:"small",onClick:function(){var e=Object(se.a)({},ke);e[Oe]=[],Ne(e);var t=Object(se.a)({},je);t[Oe]=[],pe(t),ie(0,t)},children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440"})]}),Object(F.jsx)(q.a,{children:ke[Oe].map((function(e,t){var n=!1;return je[Oe].forEach((function(t){t==e.text&&(n=!0)})),Object(F.jsx)(q.a.Item,{children:Object(F.jsx)(Rt.a,{defaultChecked:n,onChange:function(t){t.target.checked?be[Oe][e.text]=!0:be[Oe][e.text]=!1},children:e.text})},"".concat(e.text).concat(t))}))}),Object(F.jsx)(Ce,{children:Object(F.jsx)(ge.a,{loading:h,type:"primary",size:"small",icon:Object(F.jsx)(K.a,{}),onClick:function(){var e=[];for(var t in be[Oe])be[Oe][t]&&e.push(t);var n=Object(se.a)({},je);n[Oe]=e,pe(n),Ne(ke),ie(0,n)},children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440"})})]})},filterIcon:function(){var e=void 0;return je[Oe][0]&&(e="#1890ff"),v[Oe]?Object(F.jsx)(Bt.a,{}):Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(K.a,{style:{color:e}})})},onFilterDropdownVisibleChange:function(e){var t=Object(se.a)({},v);t[Oe]=e,y(t),e||(pe(je),Ne(ke))},filterDropdownVisible:v[Oe]})),Object(se.a)(Object(se.a)({},Tt(D,P,"\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0433\u0440\u0443\u043f\u043f\u044b","level")),{},{filters:[{text:"1",value:1},{text:"2",value:2},{text:"3",value:3},{text:"4",value:4}],defaultFilteredValue:je.level.map((function(e){return e+""}))}),Object(se.a)({},Tt(B,M,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0435\u0441\u0442","places")),Object(se.a)(Object(se.a)({},Tt(L,A,"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043c\u0435\u0441\u0442","occupied")),{},{filters:[{text:"\u0417\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u043e",value:!0},{text:"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u043e",value:!1}],defaultFilteredValue:je.occupied.map((function(e){return"".concat(e)}))}),Object(se.a)({},Tt(H,W,"\u0427\u0438\u0441\u043b\u043e \u0443\u0447\u0435\u043d\u0438\u043a\u043e\u0432","NUMBER_PUPILS")),Object(se.a)(Object(se.a)({},Tt(J,Q,"\u0423\u0447\u0438\u0442\u0435\u043b\u044c","tutor")),{},{filters:we,defaultFilteredValue:Object(le.a)(je.tutor)})],De=T.a.div({padding:"0 30px"});return Object(F.jsxs)(De,{children:[Object(F.jsx)(zt,{dataSource:Ie,columns:_e,setParamFilrers:pe,paramFilrers:je,update:ie}),Object(F.jsx)(fe,{getItem:ie,count:i,offset:a,setOffset:c})]})},Lt=T.a.div({"th, td":{padding:"16px 11px"}}),At=function(e){var t=e.paramFilrers,n=e.setParamFilrers,a=e.dataGroupsChecked,c=e.dataSource,o=e.update,r=e.columns,i=e.scrollLeft;Object(x.useEffect)((function(){document.querySelector(".ant-table-content").scrollLeft=i})),console.log(c);var s=c.map((function(e){var t=e._id,n=e.surname,a=e.name,c=e.midname,o=e.dateOfBirth,r=e.gender,i=e.phone,s=e.balance,l=e.parentPhone,d=e.parentFullname,u=e.discord,j=e.groups,p=e.tutor;return{key:t,surname:function(){return Object(F.jsx)(U.b,{className:"link-info",to:"/student/".concat(t),children:n})},name:a,midname:c,dateOfBirth:he(o),gender:r,phoneNumber:i,tutor:p,parentFullname:d,parentPhoneNumber:l,balance:"".concat(s),discordNickname:u,groups:j}}));return Object(F.jsx)(Lt,{children:Object(F.jsx)(je.a,{pagination:!1,dataSource:s,columns:r,scroll:{x:0},onChange:function(e,c){var r=Object(se.a)({},t);c.gender?r.gender=c.gender:r.gender=[],c.balance?r.balance=c.balance:r.balance=[],n(r),o(r,a)}})})},Yt=n(337),Ut=n(44),Vt=[1020,700].map((function(e){return"@media (max-width: ".concat(e,"px)")})),Ht=T.a.div((Je={padding:"0 30px"},Object(de.a)(Je,Vt[1],{padding:"0 0"}),Object(de.a)(Je,".log_h2",{}),Object(de.a)(Je,"td",{paddingTop:"1px",paddingBottom:"4px"}),Object(de.a)(Je,"th, td",{whiteSpace:"nowrap"}),Je)),qt=function(){var e=Object(x.useState)(""),t=Object(g.a)(e,2),n=t[0],a=t[1],c=Object(x.useState)(0),o=Object(g.a)(c,2),r=o[0],i=o[1],s=Object(x.useState)(0),l=Object(g.a)(s,2),d=l[0],u=l[1],j=Object(x.useState)([]),p=Object(g.a)(j,2),b=p[0],h=p[1],m=Object(x.useState)(0),f=Object(g.a)(m,2),O=f[0],v=f[1],y=Object(x.useState)({surname:[],name:[],midname:[],age:[],gender:[],groups:[],balance:[]}),k=Object(g.a)(y,2),N=k[0],I=k[1],C=Object(x.useState)(!1),w=Object(g.a)(C,2),_=w[0],D=w[1],P=!1,E=Object(x.useState)({surname:[],name:[],midname:[],age:[],balance:[]}),R=Object(g.a)(E,2),B=R[0],M=R[1],z=Object(x.useState)(!1),G=Object(g.a)(z,2),L=G[0],A=G[1],Y=Object(x.useState)({surname:!1,name:!1,midname:!1,age:!1,groups:!1}),U=Object(g.a)(Y,2),V=U[0],H=U[1],W=Object(x.useState)([Object(F.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"}),"surname"]),$=Object(g.a)(W,2),X=$[0],J=$[1],Q=Object(x.useState)([Object(F.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0418\u043c\u044f"}),"name"]),Z=Object(g.a)(Q,2),ee=Z[0],ne=Z[1],ce=Object(x.useState)([Object(F.jsx)("span",{style:{paddingLeft:"7px"},children:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"}),"midname"]),oe=Object(g.a)(ce,2),re=oe[0],ie=oe[1],de=Object(x.useState)([Object(F.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442"}),"dateOfBirth"]),je=Object(g.a)(de,2),pe=je[0],be=je[1],he=Object(x.useState)([Object(F.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0424\u0418\u041e \u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044f"}),"parentFullname"]),me=Object(g.a)(he,2),Oe=me[0],ve=me[1],ye=Object(x.useState)([Object(F.jsx)("span",{style:{paddingLeft:"7px"},children:"\u041f\u043e\u043b"}),"gender"]),ke=Object(g.a)(ye,2),Ne=ke[0],Se=ke[1],Ie=Object(x.useState)([Object(F.jsx)("span",{style:{paddingLeft:"7px"},children:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"}),"phoneNumber"]),Ce=Object(g.a)(Ie,2),we=Ce[0],_e=Ce[1],De=Object(x.useState)([Object(F.jsx)("span",{style:{paddingLeft:"7px"},children:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f"}),"parentPhoneNumber"]),Pe=Object(g.a)(De,2),Ee=Pe[0],Re=Pe[1],Be=Object(x.useState)([Object(F.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0411\u0430\u043b\u0430\u043d\u0441"}),"balance"]),Me=Object(g.a)(Be,2),ze=Me[0],Ge=Me[1],Te=Object(x.useState)([Object(F.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0414\u0438\u0441\u043a\u043e\u0440\u0434 \u043d\u0438\u043a\u043d\u0435\u0439\u043c"}),"discordNickname"]),Fe=Object(g.a)(Te,2),Le=Fe[0],Ae=Fe[1],Ye=Object(x.useState)([Object(F.jsx)("span",{style:{paddingLeft:"7px"},children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),"groups"]),Ue=Object(g.a)(Ye,2),Ve=Ue[0],He=Ue[1],qe={surname:{},name:{},midname:{},age:{}},Ke=function(e){N[e].forEach((function(t){qe[e][t]=!0}))};for(var We in qe)Ke(We);var $e=Object(x.useState)({}),Xe=Object(g.a)($e,2),Je=Xe[0],Qe=Xe[1],Ze=Object(x.useState)({}),et=Object(g.a)(Ze,2),tt=et[0],nt=et[1],at=Object(se.a)(Object(se.a)({},Je),tt),ct=[];for(var ot in at)ct.push({id:ot,text:at[ot][0],checked:at[ot][1]});var rt,it=Object(x.useState)(B),st=Object(g.a)(it,2),lt=st[0],dt=st[1],ut=function(e,t,n){if(e[0]){var a=Object(se.a)({},lt);a[n].push({text:e[0],value:e[0]}),dt(a),e[0]=""}},jt=T.a.div({marginTop:"10px",svg:{marginBottom:"3px"}}),pt=function(e){return"age"==e?"block":" none"},bt=function(e){return{filterDropdown:function(t){var n,a=t.setSelectedKeys,c=t.selectedKeys;t.confirm,t.clearFilters;return Object(F.jsxs)("div",{style:{padding:8},children:[Object(F.jsx)(ae.a,{type:(n=e,"age"==n?"number":"text"),placeholder:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440 ".concat(e),value:c[0],onChange:function(e){return a(e.target.value?[e.target.value]:[])},onPressEnter:function(){return ut(c,0,e)},style:{marginBottom:8,display:"block"}}),Object(F.jsx)(Et.b,{children:Object(F.jsx)(ge.a,{type:"primary",onClick:function(){ut(c,0,e)},size:"small",style:{width:140},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0444\u0438\u043b\u044c\u0442\u0440"})}),Object(F.jsxs)(q.a,{children:[lt[e].map((function(t,n){var a=!1;return N[e].forEach((function(e){e==t.text&&(a=!0)})),Object(F.jsx)(q.a.Item,{children:Object(F.jsx)(Rt.a,{defaultChecked:a,onChange:function(n){n.target.checked?qe[e][t.text]=!0:qe[e][t.text]=!1},children:t.text})},"".concat(t.text).concat(n))})),Object(F.jsx)(q.a.Item,{style:{display:pt(e)},children:Object(F.jsx)(Rt.a,{defaultChecked:_,onChange:function(e){P=e.target.checked},children:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"})},"emptyAge")]}),Object(F.jsx)(jt,{children:Object(F.jsx)(ge.a,{loading:L,type:"primary",size:"small",icon:Object(F.jsx)(K.a,{}),onClick:function(){var t=[];for(var n in qe[e])qe[e][n]&&t.push(n);var a=Object(se.a)({},N);a[e]=t,I(a),M(lt),kt(a,Je)},children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440"})})]})},filterIcon:function(){var t=void 0;return N[e][0]&&(t="#1890ff"),V[e]?Object(F.jsx)(Bt.a,{}):Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(K.a,{style:{color:t}})})},onFilterDropdownVisibleChange:function(t){var n=Object(se.a)({},V);n[e]=t,H(n),t||(I(N),M(lt))},filterDropdownVisible:V[e]}},ht=function e(t){var n=encodeURI(t);Ut({method:"get",url:"".concat(S,"/CRM/Search/autocompletion?query=").concat(n),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){var n={};e.data.body.hits.hits.map((function(e){var t=e._source,a=t.id,c=t.group_name;"group"==t.type&&(n[a]=["".concat(c),!1])})),a(t),nt(n)})).catch((function(t){te(e,t)}))},mt=function(e){clearTimeout(rt),e?rt=setTimeout((function(){ht(e)}),500):(a(""),nt({}))},xt=[Object(se.a)(Object(se.a)({},Tt(X,J,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f","surname")),{},{render:function(e){if("function"==typeof e)return e()}},bt("surname")),Object(se.a)(Object(se.a)({},Tt(ee,ne,"\u0418\u043c\u044f","name")),bt("name")),Object(se.a)(Object(se.a)({},Tt(re,ie,"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e","midname")),bt("midname")),Object(se.a)(Object(se.a)({},Tt(pe,be,"\u0412\u043e\u0437\u0440\u0430\u0441\u0442","age")),bt("age")),Object(se.a)(Object(se.a)({},Tt(Ne,Se,"\u041f\u043e\u043b","gender")),{},{filters:[{text:"\u041c\u0443\u0436\u0441\u043a\u043e\u0439",value:"\u041c\u0443\u0436\u0441\u043a\u043e\u0439"},{text:"\u0416\u0435\u043d\u0441\u043a\u0438\u0439",value:"\u0416\u0435\u043d\u0441\u043a\u0438\u0439"}],defaultFilteredValue:Object(le.a)(N.gender)}),Object(se.a)({},Tt(we,_e,"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430","phoneNumber")),Object(se.a)({},Tt(Ee,Re,"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044f","parentPhoneNumber")),Object(se.a)({},Tt(Oe,ve,"\u0424\u0418\u041e \u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044f","parentFullname")),Object(se.a)(Object(se.a)({},Tt(ze,Ge,"\u0411\u0430\u043b\u0430\u043d\u0441","balance")),{},{filters:[{text:"\u041f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439",value:"1"},{text:"\u041e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439",value:"2"}],defaultFilteredValue:Object(le.a)(N.balance)}),Object(se.a)(Object(se.a)({},Tt(Ve,He,"\u0413\u0440\u0443\u043f\u043f\u044b","groups")),{},{render:function(e){if(e)return e.map((function(e){return Object(F.jsx)(ue.a,{color:"blue",children:e.group_name},"".concat(e._id))}))}},{filterDropdown:function(e){return e.setSelectedKeys,e.selectedKeys,e.confirm,e.clearFilters,Object(F.jsxs)("div",{style:{padding:8},children:[Object(F.jsx)(ae.a,{id:"inputGroup",placeholder:"\u041d\u0430\u0439\u0442\u0438 \u0433\u0440\u0443\u043f\u043f\u044b",defaultValue:n,onChange:function(e){mt(e.target.value)},onPressEnter:function(){},style:{marginBottom:8,display:"block"}}),Object(F.jsx)(q.a,{children:ct.map((function(e){var t=e.id,n=e.text,a=e.checked;return Object(F.jsx)(q.a.Item,{children:Object(F.jsx)(Rt.a,{defaultChecked:a,onChange:function(e){var a=Object(se.a)({},Je);e.target.checked?a[t]=[n,!0]:delete a[t],Qe(a),nt({})},children:n})},t)}))}),Object(F.jsx)(jt,{children:Object(F.jsx)(ge.a,{loading:L,type:"primary",size:"small",icon:Object(F.jsx)(K.a,{}),onClick:function(){kt(N,Je)},children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440"})})]})},onFilterDropdownVisibleChange:function(e){v(e?document.querySelector(".ant-table-content").scrollLeft:0);var t=Object(se.a)({},V);t.groups=e,H(t),e||kt(N,Je)},filterDropdownVisible:V.groups,filterIcon:function(){return Object.keys(Je).length?Object(F.jsx)(Yt.a,{style:{color:"#1890ff"}}):Object(F.jsx)(Yt.a,{})}}),Object(se.a)({},Tt(Le,Ae,"\u0414\u0438\u0441\u043a\u043e\u0440\u0434 \u043d\u0438\u043a\u043d\u0435\u0439\u043c","discordNickname"))],ft=Object(x.useState)({filters:{}}),Ot=Object(g.a)(ft,2),gt=Ot[0],vt=Ot[1],yt=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;A(!0),Ut({method:"post",url:"".concat(S,"/CRM/Pupils/find?limit=").concat(xe,"&offset=").concat(t),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:n||gt}).then((function(e){var t=e.data,n=e.headers;console.log(t),h(t),u(n.count),H({surname:!1,name:!1,midname:!1}),A(!1)})).catch((function(t){te(e,t,(function(){A(!1)}))}))},kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};for(var a in t)n.groups||(n.groups=[]),n.groups.push(a);for(var c in e)e[c][0]&&("surname"==c||"name"==c||"midname"==c||"age"==c?n["".concat(c,"s")]=e[c]:n["".concat(c)]=e[c]);if(n.ages){var o=Object(le.a)(n.ages);n.ages=[],o.forEach((function(e){n.ages.push(+e)}))}if(n.balance){var r=Object(le.a)(n.balance);1==r[0]&!r[1]?n.balance={$gte:0}:2==r[0]&!r[1]?n.balance={$lt:0}:r[1]&&(n.balance={$gte:0,$lte:0})}n.emptyAge=P;var i={filters:n};D(P),vt(i),yt(0,i)};return Object(x.useEffect)((function(){yt()}),[]),Object(x.useEffect)((function(){var e=document.getElementById("inputGroup");e&&e.focus()})),Object(F.jsxs)(Ht,{children:[Object(F.jsx)(At,{paramFilrers:N,setParamFilrers:I,globalFiltersG:lt,setGlobalFiltersG:dt,dataGroupsChecked:Je,setDataGroupsChecked:Qe,dataSource:b,update:kt,loadingButtomFilrer:L,setLoadingButtomFilrer:A,filterDropdownVisible:V,setFilterDropdownVisible:H,columns:xt,scrollLeft:O}),Object(F.jsx)(fe,{getItem:yt,count:d,offset:r,setOffset:i})]})},Kt=H.a.Sider,Wt=q.a.SubMenu,$t=function(e){var t=e.logOut,n=Object(x.useState)(!1),a=Object(g.a)(n,2),c=a[0],o=a[1];Object(x.useEffect)((function(){document.querySelector(".ant-layout-sider-trigger").style.width=c?"80px":"257px"}));var r=T.a.div({".ant-menu":{height:"100vh",position:"relative",width:c?"80px":"257px"},".vag123":{position:"absolute",bottom:"48px",width:c?"80px":""},".site-layout":{padding:"15px"},"& > section":{"& > aside":{position:"fixed",zIndex:99},"& > section":{marginLeft:c?"80px":"257px"}}}),i=T.a.div({overflow:"auto"});return Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(U.a,{children:Object(F.jsx)(r,{children:Object(F.jsxs)(H.a,{style:{minHeight:"100vh"},children:[Object(F.jsx)(Kt,{collapsible:!0,collapsed:c,onCollapse:function(e){o(e)},children:Object(F.jsxs)(q.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline",children:[Object(F.jsx)(q.a.Item,{icon:Object(F.jsx)(K.a,{}),children:Object(F.jsx)(ie,{})},"Search"),Object(F.jsx)(q.a.Item,{icon:Object(F.jsx)(W.a,{onClick:function(){return document.querySelector(".ButtonUpload").click()}}),children:Object(F.jsx)(Pt,{})}),Object(F.jsx)(q.a.Item,{icon:Object(F.jsx)($.a,{}),children:Object(F.jsx)(U.b,{to:"/student",children:"\u0423\u0447\u0435\u043d\u0438\u043a\u0438"})},"2"),Object(F.jsx)(q.a.Item,{icon:Object(F.jsx)(X.a,{}),children:Object(F.jsx)(U.b,{to:"/group",children:"\u0413\u0440\u0443\u043f\u043f\u044b"})},"3"),Object(F.jsx)(q.a.Item,{icon:Object(F.jsx)(J.a,{}),children:Object(F.jsx)(U.b,{to:"/sales-funnel",children:"\u0412\u043e\u0440\u043e\u043d\u043a\u0430 \u043f\u0440\u043e\u0434\u0430\u0436"})},"4"),Object(F.jsxs)(Wt,{icon:Object(F.jsx)(Q.a,{}),title:"\u0421\u0432\u043e\u0434\u043d\u044b\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b",children:[Object(F.jsx)(q.a.Item,{children:Object(F.jsx)(U.b,{to:"/table-pupils",children:"\u0423\u0447\u0435\u043d\u0438\u043a\u0438"})},"sub-student"),Object(F.jsx)(q.a.Item,{children:Object(F.jsx)(U.b,{to:"/table-groups",children:"\u0413\u0440\u0443\u043f\u043f\u044b"})},"sub-groups")]},"sub1"),Object(F.jsx)(q.a.Item,{onClick:function(){localStorage.removeItem("tokenID"),t()},id:"LogoutOut",className:"vag123",icon:Object(F.jsx)(Z.a,{}),children:Object(F.jsx)(U.b,{to:"/",children:"\u0412\u044b\u0445\u043e\u0434"})},"Logout")]})}),Object(F.jsx)(H.a,{className:"site-layout",children:Object(F.jsxs)(V.c,{children:[Object(F.jsx)(V.a,{exact:!0,path:"/student",component:function(){return Object(F.jsx)(Ve,{})}}),Object(F.jsx)(V.a,{path:"/student/:id",children:function(){return Object(F.jsx)(dt,{})}}),Object(F.jsx)(V.a,{exact:!0,path:"/group",component:function(){return Object(F.jsx)(jt,{})}}),Object(F.jsx)(V.a,{path:"/group/:id",children:function(){return Object(F.jsx)(gt,{})}}),Object(F.jsx)(V.a,{path:"/sales-funnel",component:wt}),Object(F.jsx)(V.a,{exact:!0,path:"/table-groups",component:function(){return Object(F.jsx)(Ft,{})}}),Object(F.jsx)(V.a,{exact:!0,path:"/table-pupils",component:function(){return Object(F.jsx)(i,{children:Object(F.jsx)(qt,{})})}}),Object(F.jsx)(V.a,{path:"/student/*",children:Object(F.jsx)("h2",{children:"\u0421\u0442\u0440\u0430\u043d\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})})]})})]})})})})},Xt=n(580),Jt=n(44),Qt=function e(t,n){Jt({method:"post",url:"".concat(S,"/CRM/Pupils/").concat(t,"/Notes"),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:{text:n}}).catch((function(t){te(e,t)}))},Zt=n(44),en=function e(t,n,a,c){Zt({method:"put",url:"".concat(S,"/CRM/Groups/").concat(a,"/Pupils/").concat(n,"/Schedule"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:t}).then((function(e){c("\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435")})).catch((function(t){te(e,t)}))},tn=je.a.Column,nn=je.a.ColumnGroup,an=ae.a.TextArea,cn=function(e){var t=e.ID_Group,n=e.Group,a=e.getUser,c=Object(x.useState)({}),o=Object(g.a)(c,2),r=o[0],i=o[1],s=Object(x.useState)([]),l=Object(g.a)(s,2),d=l[0],u=l[1],j=Object(se.a)({},r),p=Object(le.a)(d),b=function(){for(var e in p=[],j)2==j[e].arr[t].status&&p.push(e)},h={},m=n.pupils.map((function(e,a){var c=e._id,o=e.name,r=e.surname,i=e.midname;j[c]={arr:e.localSchedule?e.localSchedule[n._id]:[],pupil_id:c},b();var s=j[c].arr[t].start?j[c].arr[t].start:"",l=j[c].arr[t].start?j[c].arr[t].finish:"",d=function(e){j[c]?j[c].arr=e:j[c]||(j[c]={arr:e,pupil_id:c})},u="";return n.pupils[a]&&(u=n.pupils[a].localSchedule[n._id][t].title),{key:c,name:"".concat(r," ").concat(o," ").concat(i),title:{text:u,action:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,c=Object(le.a)(e.localSchedule[n._id]);2==a&3==c[t].status||3==a?(c[t].status=a,d(c)):3!=a&2!=a&&(c[t].title=a,d(c))},addNotes:function(e){h[c]={text:e,id:c}}},progres:{start:s,finish:l,action:function(e,n){j[c].arr[t][e]=n}}}})),f={selectedRowKeys:p,onChange:function(){i(j),u(p)},onSelect:function(e){var n;n=2==j[e.key].arr[t].status?3:2,j[e.key].arr[t].status=n,b()},onSelectAll:function(e){if(e)for(var n in j)j[n].arr[t].status=2;else if(!e)for(var a in j)j[a].arr[t].status=3;b()}};return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)(je.a,{pagination:!1,loading:!1,rowSelection:f,scroll:{x:0},dataSource:m,children:[Object(F.jsx)(tn,{title:"\u0423\u0447\u0435\u043d\u0438\u043a",dataIndex:"name",render:function(e){return Object(F.jsx)(ue.a,{color:"blue",children:e})}},"name"),Object(F.jsxs)(nn,{title:"\u041f\u0440\u043e\u0433\u0440\u0435\u0441\u0441",children:[Object(F.jsx)(tn,{title:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",dataIndex:"title",render:function(e){return Object(F.jsx)(an,{defaultValue:e.text,placeholder:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0443\u0447\u0435\u043d\u0438\u043a\u0443",onBlur:function(t){e.action(t.target.value),e.addNotes(t.target.value)},autoSize:{minRows:2,maxRows:6}})}},"title"),Object(F.jsx)(tn,{title:"\u041d\u0430\u0447\u0430\u043b\u043e",dataIndex:"progres",render:function(e){return Object(F.jsx)(an,{defaultValue:e.start,placeholder:"\u0421\u0442\u0430\u0440\u0442...",onBlur:function(t){e.action("start",t.target.value)},autoSize:{minRows:2,maxRows:6}})}},"progres"),Object(F.jsx)(tn,{title:"\u041a\u043e\u043d\u0435\u0446",dataIndex:"progres",render:function(e){return Object(F.jsx)(an,{defaultValue:e.finish,placeholder:"\u0424\u0438\u043d\u0438\u0448...",onBlur:function(t){e.action("finish",t.target.value)},autoSize:{minRows:2,maxRows:6}})}},"progres")]})]}),Object(F.jsx)("div",{className:"Button",children:Object(F.jsx)(ge.a,{onClick:function(){for(var e in j)en(j[e].arr,e,n._id,a);for(var t in h)Qt(t,h[t].text)},type:"primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})},on=n(576),rn=T.a.div({".time":{"h5, h6":{margin:0}},".TablePupils":{marginTop:"15px",".ant-tag":{fontSize:"13px"},td:{padding:"16px 3px"}},".Button":{marginTop:"15px",display:"flex",justifyContent:"flex-end"}}),sn=on.a.Text,ln=function(e){var t=e.rowKey,n=e.setRowKey,a=e.GROUP,c=e.Group,o=e.getUser,r={group:{global_schedule:[{date:"",duration:""}]},indexD:0};return a.group.group_name||(r=c),Object(F.jsxs)(rn,{className:"LessonNow",children:[Object(F.jsxs)("div",{className:"row",children:[Object(F.jsx)("div",{className:"col-md-8",children:Object(F.jsxs)("h4",{children:[Object(F.jsx)(sn,{type:"secondary",children:" \u0423\u0440\u043e\u043a \u0441\u0435\u0439\u0447\u0430\u0441: "})," ",r.group.group_name," "]})}),Object(F.jsxs)("div",{className:"col-md-3 time",children:[Object(F.jsxs)("h6",{children:[" ",Object(F.jsx)(sn,{type:"secondary",children:"\u041d\u0430\u0447\u0430\u043b\u043e"})," "]}),Object(F.jsxs)("h5",{children:[" ",Object(F.jsxs)(sn,{type:"warning",children:[r.group.global_schedule[r.indexD].date," \u0432 ",r.group.global_schedule[0].duration[0]]})," "]})]})]}),Object(F.jsx)("div",{className:"TablePupils",children:Object(F.jsx)(cn,{rowKey:t,getUser:o,ID_Group:r.indexD,setRowKey:n,Group:r.group})})]})},dn=function(e){var t=e.Groups,n=e.newGroup,a=e.setGROUP,c=e.GROUP,o=je.a.Column,r=(je.a.ColumnGroup,t.map((function(e,t){var a=e.group,o=a._id,r=a.group_name,i=a.global_schedule,s="cyan";return c.group&&(n.group._id==o&!c.group.group_name||o==c.group._id)&&(s="volcano"),{key:t,groupName:{group_name:r,G:e},date:{date:"".concat(i["".concat(e.indexD)].date," \u0432 ").concat(i[0].duration[0]),color:s,G:e}}}))),i={pageSize:15,onChange:function(e){console.log("\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430: ".concat(e))}};return Object(F.jsxs)(je.a,{pagination:i,loading:!1,scroll:{x:0},dataSource:r,children:[Object(F.jsx)(o,{title:"\u0412\u0440\u0435\u043c\u044f",dataIndex:"date",render:function(e){return Object(F.jsx)(ue.a,{onClick:function(){a(e.G)},style:{cursor:"pointer"},color:e.color,children:e.date})}},"date"),Object(F.jsx)(o,{title:"\u0413\u0440\u0443\u043f\u043f\u0430",dataIndex:"groupName",render:function(e){return Object(F.jsx)(ue.a,{onClick:function(){a(e.G)},style:{cursor:"pointer"},color:"volcano",children:e.group_name})}},"groupName")]})};dn.defaultProps={Groups:[{group_name:"",global_schedule:[{date:"",duration:["",""]}],pupils:[]}]};var un,jn=dn,pn=T.a.div(un||(un=Object(N.a)(["\n\tpadding: 15px;\n\tborder-radius: 2px;\n\tbackground-color: #fff;\n"]))),bn=function(e){var t=e.Groups,n=e.newGroup,a=e.setGROUP,c=e.GROUP;return Object(F.jsxs)(pn,{className:"AllLesson",children:[Object(F.jsx)("div",{className:"row",children:Object(F.jsx)("div",{className:"col-md-8",children:Object(F.jsx)("h5",{children:"\u0411\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0435 \u0443\u0440\u043e\u043a\u0438"})})}),Object(F.jsx)("div",{className:"TableGroups",children:Object(F.jsx)(jn,{Groups:t,newGroup:n,setGROUP:a,GROUP:c})})]})},hn=function(e){var t=e.rowKey,n=e.setRowKey,a=e.Groups,c=e.GROUP,o=e.setGROUP,r=e.getUser,i={timeN:"",group:{group_name:"",global_schedule:[{date:"",duration:["",""]}],pupils:[]},indexD:0},s=[{timeN:"",group:{group_name:"",global_schedule:[{date:"",duration:["",""]}],pupils:[]},indexD:0}];a.forEach((function(e,t){var n=[],a="f";if((e.global_schedule?e.global_schedule:[]).forEach((function(e,t){var c=be()(e.date,"DD.MM.YYYY").format("YYYY-MM-DD");be()().diff(c,"day")<=0&&("f"==a&&(a=t),n.push("".concat(c," ").concat(e.duration[0])))})),n[0]){if(i.timeN){var c=be()().diff(n[0],"hours");c>be()().diff(i.timeN,"hours")&c<=0&&(i={timeN:n[0],group:e,indexD:a})}else i.timeN||(i={timeN:n[0],group:e,indexD:a});n[0]&&s.push({timeN:n[0],group:e,indexD:a})}}));var l=[{timeN:"",group:{group_name:"",global_schedule:[{date:"",duration:["",""]}],pupils:[]},indexD:0}],d=[];s.forEach((function(e){d.push(be()().diff(e.timeN,"minutes"))})),d.sort((function(e,t){return t-e})),d.forEach((function(e){s.forEach((function(t,n){be()().diff(t.timeN,"minutes")==e&&l.push(t)}))})),void 0!=l[1]&&l.splice(0,1);var u=T.a.div({".site-layout-background":{".allCol":{padding:"0 7.5px"},".LessonNow, .AllLesson":{padding:"15px",borderRadius:"2px",backgroundColor:"#fff"}}});c||o(l[0]);var j=H.a.Content;return Object(F.jsx)(u,{children:Object(F.jsxs)(j,{style:{margin:"0 16px"},children:[Object(F.jsxs)(Xt.a,{style:{margin:"16px 0"},children:[Object(F.jsx)(Xt.a.Item,{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(F.jsx)(Xt.a.Item,{children:"\u0411\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0435 \u0443\u0440\u043e\u043a\u0438"})]}),Object(F.jsxs)("div",{className:"row site-layout-background",style:{padding:"7.5px",minHeight:360},children:[Object(F.jsx)("div",{className:"allCol col-8",children:Object(F.jsx)(ln,{rowKey:t,getUser:r,setRowKey:n,GROUP:c,Group:i})}),Object(F.jsx)("div",{className:"allCol col-4",children:Object(F.jsx)(bn,{Groups:l,setGROUP:o,newGroup:i,GROUP:c})})]})]})})},mn=[{title:"",key:"time",dataIndex:"time",fixed:"left",width:100,render:function(e){return Object(F.jsx)(ue.a,{color:"cyan",children:e})}},{title:"\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a",dataIndex:"1",key:"1"},{title:"\u0412\u0442\u043e\u0440\u043d\u0438\u043a",dataIndex:"2",key:"2"},{title:"\u0421\u0440\u0435\u0434\u0430",dataIndex:"3",key:"3"},{title:"\u0427\u0435\u0442\u0432\u0435\u0440\u0433",dataIndex:"4",key:"4"},{title:"\u041f\u044f\u0442\u043d\u0438\u0446\u0430",dataIndex:"5",key:"5"},{title:"\u0421\u0443\u0431\u0431\u043e\u0442\u0430",dataIndex:"6",key:"6"},{title:"\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435",dataIndex:"0",key:"7"}],xn=T.a.div({padding:"15px",borderRadius:"2px",backgroundColor:"#fff"}),fn=T.a.div({padding:"15px",borderRadius:"2px",backgroundColor:"#fff",marginBottom:"15px"}),On=H.a.Content,gn=function(e){var t=e.Groups;console.log(t);var n=t.map((function(e){return{title:function(){return Object(F.jsx)(ue.a,{color:"magenta",children:e.GROUP_NAME},e._id)},key:e._id,dataIndex:"pupil",fixed:"top",width:100,render:function(){return Object(F.jsx)(F.Fragment,{children:e.PUPILS.map((function(t,n){return Object(F.jsx)("div",{children:Object(F.jsxs)(ue.a,{style:{marginBottom:"5px"},color:"green",children:[t.surname," ",t.name," ",t.midname]})},"".concat(e._id).concat(n))}))})}}})),a=[{key:"777",pupil:""}];console.log(a);for(var c=t.map((function(e){if((e.GLOBAL_SCHEDULE?e.GLOBAL_SCHEDULE:[])[0]){var t={};return e.GLOBAL_SCHEDULE.forEach((function(n){var a=be()(n.date,"DD.MM.YYYY").day();t[a]=e.GROUP_NAME})),Object(se.a)(Object(se.a)({key:e._id},t),{},{time:e.GLOBAL_SCHEDULE[0].duration[0]})}return{key:e._id,1:'\u0414\u043b\u044f \u0433\u0440\u0443\u043f\u043f\u044b: "'.concat(e.GROUP_NAME,'" \u043d\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u043e \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435.'),time:""}})),o=[],r=function(e){c.forEach((function(t){be()(t.time,"hh:mm").hours()==e&&o.push(t)}))},i=0;i<=24;i++)r(i);return Object(F.jsxs)(On,{style:{margin:"0 16px"},children:[Object(F.jsxs)(Xt.a,{style:{margin:"16px 0"},children:[Object(F.jsx)(Xt.a.Item,{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(F.jsx)(Xt.a.Item,{children:"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0443\u0440\u043e\u043a\u043e\u0432"})]}),Object(F.jsx)(fn,{children:Object(F.jsxs)("div",{className:"row site-layout-background",style:{padding:"15px"},children:[Object(F.jsx)("h4",{children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),Object(F.jsx)(je.a,{bordered:!0,columns:n,dataSource:a,scroll:{x:1e3}})]})}),Object(F.jsx)(xn,{children:Object(F.jsxs)("div",{className:"row site-layout-background",style:{padding:"15px"},children:[Object(F.jsx)("h4",{children:"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(F.jsx)(je.a,{bordered:!0,columns:mn,dataSource:o,scroll:{x:1300}})]})})]})},vn=T.a.div({padding:"15px",borderRadius:"2px",backgroundColor:"#fff"}),yn=function(e){var t=e.AllPupils,n=H.a.Content,a=je.a.Column,c=[];return t.forEach((function(e){var t=e.surname,n=e.name,a=e.midname,o=e.dateOfBirth,r=e.gender,i=e.phone,s=e.discord,l=e._id,d=!0;c.forEach((function(e){e.key==l&&(d=!1)})),d&&c.push({key:l,surname:[t,l],name:n,midname:a,dateOfBirth:he(o),gender:r,phone:i,discord:s})})),Object(F.jsxs)(n,{style:{margin:"0 16px"},children:[Object(F.jsxs)(Xt.a,{style:{margin:"16px 0"},children:[Object(F.jsx)(Xt.a.Item,{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(F.jsx)(Xt.a.Item,{children:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0423\u0447\u0435\u043d\u0438\u043a\u043e\u0432"})]}),Object(F.jsx)("div",{className:"site-layout-background",style:{padding:"10px",minHeight:360},children:Object(F.jsx)(vn,{children:Object(F.jsxs)(je.a,{dataSource:c,children:[Object(F.jsx)(a,{title:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",dataIndex:"surname",render:function(e){return Object(F.jsx)(U.b,{className:"link-info",to:"/student/".concat(e[1]),children:e[0]})}},"surname"),Object(F.jsx)(a,{title:"\u0418\u043c\u044f",dataIndex:"name"},"name"),Object(F.jsx)(a,{title:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",dataIndex:"midname"},"midname"),Object(F.jsx)(a,{title:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442",dataIndex:"dateOfBirth"},"dateOfBirth"),Object(F.jsx)(a,{title:"\u041f\u043e\u043b",dataIndex:"gender"},"gender"),Object(F.jsx)(a,{title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",dataIndex:"phone"},"phone"),Object(F.jsx)(a,{title:"\u0414\u0438\u0441\u043a\u043e\u0440\u0434 \u043d\u0438\u043a\u043d\u0435\u0439\u043c",dataIndex:"discord"},"discord")]})})})]})},kn=T.a.div({padding:"15px",borderRadius:"2px",backgroundColor:"#fff"}),Nn=function(e){var t=e.AllGroups,n=H.a.Content,a=je.a.Column,c=t.map((function(e){var t=e.group_name,n=e.level,a=e.places,c=e.pupils,o=e._id,r=e.global_schedule,i="";return r&&r[0]&&(i="\u0441 ".concat(r[0].duration[0]," \u0434\u043e ").concat(r[0].duration[1])),{key:o,group_name:[t,o],level:n,places:a,free_places:a-c.length,time:i}}));return Object(F.jsxs)(n,{style:{margin:"0 16px"},children:[Object(F.jsxs)(Xt.a,{style:{margin:"16px 0"},children:[Object(F.jsx)(Xt.a.Item,{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(F.jsx)(Xt.a.Item,{children:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0413\u0440\u0443\u043f\u043f"})]}),Object(F.jsx)("div",{className:"site-layout-background",style:{padding:"10px",minHeight:360},children:Object(F.jsx)(kn,{children:Object(F.jsxs)(je.a,{dataSource:c,children:[Object(F.jsx)(a,{title:"\u0418\u043c\u044f \u0413\u0440\u0443\u043f\u043f\u044b",dataIndex:"group_name",render:function(e){return Object(F.jsx)(U.b,{className:"link-info",to:"/group/".concat(e[1]),children:e[0]})}},"group_name"),Object(F.jsx)(a,{title:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c",dataIndex:"level"},"level"),Object(F.jsx)(a,{title:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0435\u0441\u0442",dataIndex:"places"},"places"),Object(F.jsx)(a,{title:"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043c\u0435\u0441\u0442",dataIndex:"free_places"},"free_places"),Object(F.jsx)(a,{title:"\u0412\u0440\u0435\u043c\u044f \u0437\u0430\u043d\u044f\u0442\u0438\u0439",dataIndex:"time"},"time")]})})})]})},Sn=n(201),In=n(202),Cn=n(44),wn=n(135),_n=H.a.Sider,Dn=function(e){var t=e.logOut,n=Object(x.useState)(!1),a=Object(g.a)(n,2),c=a[0],o=a[1],r=Object(x.useState)([]),i=Object(g.a)(r,2),s=i[0],l=i[1],d=Object(x.useState)({group:{group_name:"",global_schedule:[{date:"00",duration:["",""]}],pupils:[],_id:"3443"},indexD:0}),u=Object(g.a)(d,2),j=u[0],p=u[1],b=Object(x.useState)({groups:[],login:"",midname:"",name:"",role:"",surname:"",_id:"456456"}),h=Object(g.a)(b,2),m=h[0],f=h[1],O=Object(x.useState)([]),v=Object(g.a)(O,2),y=v[0],k=v[1],N=[];y.forEach((function(e){N.push.apply(N,Object(le.a)(e.pupils))}));var I=function e(t){var n=t.groups.map((function(e){return e._id}));n[0]?Cn({method:"post",url:"".concat(S,"/CRM/Groups/getByIds"),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))},data:n}).then((function(e){k(e.data),z()})).catch((function(t){te(e,t)})):z()},C=function(e){M(e,""),Cn({method:"get",url:"".concat(S,"/AdminPanel/CRMAccounts/").concat(wn.decode(localStorage.getItem("tokenID")).id),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).then((function(e){var t=e.data;t||(localStorage.removeItem("tokenID"),window.location.replace("/")),f(t),I(t)})).catch((function(e){te(I,e)}))};Object(x.useEffect)((function(){C("\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445...")}),[]),Object(x.useEffect)((function(){document.querySelector(".ant-layout-sider-trigger").style.width=c?"80px":"250px"}));var w=T.a.div({".ant-menu":{height:"100vh",position:"relative",width:c?"80px":"250px"},".vag123":{position:"absolute",bottom:"48px",width:c?"80px":""},".site-layout":{padding:"15px"},"& > section":{"& > aside":{position:"fixed",zIndex:99},"& > section":{marginLeft:c?"80px":"250px"}}});return Object(F.jsx)(U.a,{children:Object(F.jsx)(w,{children:Object(F.jsxs)(H.a,{style:{minHeight:"100vh"},children:[Object(F.jsxs)(_n,{collapsible:!0,collapsed:c,onCollapse:function(){return o(c)},children:[Object(F.jsx)("div",{className:"logo"}),Object(F.jsxs)(q.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline",children:[Object(F.jsx)(q.a.Item,{icon:Object(F.jsx)(K.a,{}),children:Object(F.jsx)(ie,{tutorid:"&tutorid=".concat(wn.decode(localStorage.getItem("tokenID")).id)})},"Search"),Object(F.jsx)(q.a.Item,{icon:Object(F.jsx)(Sn.a,{}),children:Object(F.jsx)(U.b,{to:"/",children:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f"})},"1"),Object(F.jsx)(q.a.Item,{icon:Object(F.jsx)(In.a,{}),children:Object(F.jsx)(U.b,{to:"/calendar",children:"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"})},"2"),Object(F.jsx)(q.a.Item,{icon:Object(F.jsx)($.a,{}),children:Object(F.jsx)(U.b,{to:"/pupils",children:"\u0423\u0447\u0435\u043d\u0438\u043a\u0438"})},"3"),Object(F.jsx)(q.a.Item,{icon:Object(F.jsx)(X.a,{}),children:Object(F.jsx)(U.b,{to:"/groups",children:"\u0413\u0440\u0443\u043f\u043f\u044b"})},"4"),Object(F.jsx)(q.a.Item,{onClick:function(){localStorage.removeItem("tokenID"),t()},className:"vag123",icon:Object(F.jsx)(Z.a,{}),children:Object(F.jsxs)(U.b,{to:"/",children:["\u0412\u044b\u0445\u043e\u0434: ",m.login]})},"Logout")]})]}),Object(F.jsx)(H.a,{className:"site-layout",children:Object(F.jsx)("div",{children:Object(F.jsxs)(V.c,{children:[Object(F.jsx)(V.a,{exact:!0,path:"/",children:Object(F.jsx)(hn,{rowKey:s,getUser:C,setRowKey:l,GROUP:j,setGROUP:p,Groups:y})}),Object(F.jsx)(V.a,{exact:!0,path:"/calendar",children:Object(F.jsx)(gn,{Groups:y})}),Object(F.jsx)(V.a,{exact:!0,path:"/pupils",children:Object(F.jsx)(yn,{AllPupils:N})}),Object(F.jsx)(V.a,{exact:!0,path:"/groups",children:Object(F.jsx)(Nn,{AllGroups:y})}),Object(F.jsx)(V.a,{exact:!0,path:"/student/:id",children:function(){return Object(F.jsx)(dt,{})}}),Object(F.jsx)(V.a,{exact:!0,path:"/group/:id",children:function(){return Object(F.jsx)(gt,{})}})]})})})]})})})},Pn=function(){var e=n(44),t=n(135),a=Object(x.useState)(""),c=Object(g.a)(a,2),o=(c[0],c[1]),r=Object(F.jsx)(Y,{setUser:o}),i=localStorage.getItem("tokenID")?Object(F.jsx)($t,{logOut:o}):r;return Object(x.useEffect)((function(){i!==r&&e({method:"get",url:"".concat(S,"/auth-check"),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("tokenID"))}}).catch((function(e){e.response&&(401===e.response.status&&(localStorage.removeItem("tokenID"),window.location.replace("/")))}))}),[]),localStorage.getItem("tokenID")&&"teacher"===t.decode(localStorage.getItem("tokenID")).accountType&&(i=Object(F.jsx)(Dn,{logOut:o})),Object(F.jsx)(F.Fragment,{children:i})};O.a.render(Object(F.jsx)(Pn,{}),document.getElementById("root"))}},[[567,1,2]]]);
//# sourceMappingURL=main.50806dd3.chunk.js.map